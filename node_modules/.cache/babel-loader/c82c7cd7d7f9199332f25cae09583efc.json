{"ast":null,"code":"import _asyncToGenerator from\"/home/spencer/Personal/Bibtex-web-database-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/spencer/Personal/Bibtex-web-database-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _createForOfIteratorHelper from\"/home/spencer/Personal/Bibtex-web-database-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _defineProperty from\"/home/spencer/Personal/Bibtex-web-database-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/spencer/Personal/Bibtex-web-database-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";function _regeneratorRuntime(){\"use strict\";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return exports;};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value;},$Symbol=\"function\"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||\"@@iterator\",asyncIteratorSymbol=$Symbol.asyncIterator||\"@@asyncIterator\",toStringTagSymbol=$Symbol.toStringTag||\"@@toStringTag\";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key];}try{define({},\"\");}catch(err){define=function define(obj,key,value){return obj[key]=value;};}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,\"_invoke\",{value:makeInvokeMethod(innerFn,self,context)}),generator;}function tryCatch(fn,obj,arg){try{return{type:\"normal\",arg:fn.call(obj,arg)};}catch(err){return{type:\"throw\",arg:err};}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,function(){return this;});var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){[\"next\",\"throw\",\"return\"].forEach(function(method){define(prototype,method,function(arg){return this._invoke(method,arg);});});}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if(\"throw\"!==record.type){var result=record.arg,value=result.value;return value&&\"object\"==typeof value&&hasOwn.call(value,\"__await\")?PromiseImpl.resolve(value.__await).then(function(value){invoke(\"next\",value,resolve,reject);},function(err){invoke(\"throw\",err,resolve,reject);}):PromiseImpl.resolve(value).then(function(unwrapped){result.value=unwrapped,resolve(result);},function(error){return invoke(\"throw\",error,resolve,reject);});}reject(record.arg);}var previousPromise;defineProperty(this,\"_invoke\",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl(function(resolve,reject){invoke(method,arg,resolve,reject);});}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(innerFn,self,context){var state=\"suspendedStart\";return function(method,arg){if(\"executing\"===state)throw new Error(\"Generator is already running\");if(\"completed\"===state){if(\"throw\"===method)throw arg;return doneResult();}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult;}}if(\"next\"===context.method)context.sent=context._sent=context.arg;else if(\"throw\"===context.method){if(\"suspendedStart\"===state)throw state=\"completed\",context.arg;context.dispatchException(context.arg);}else\"return\"===context.method&&context.abrupt(\"return\",context.arg);state=\"executing\";var record=tryCatch(innerFn,self,context);if(\"normal\"===record.type){if(state=context.done?\"completed\":\"suspendedYield\",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done};}\"throw\"===record.type&&(state=\"completed\",context.method=\"throw\",context.arg=record.arg);}};}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(undefined===method)return context.delegate=null,\"throw\"===methodName&&delegate.iterator.return&&(context.method=\"return\",context.arg=undefined,maybeInvokeDelegate(delegate,context),\"throw\"===context.method)||\"return\"!==methodName&&(context.method=\"throw\",context.arg=new TypeError(\"The iterator does not provide a '\"+methodName+\"' method\")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if(\"throw\"===record.type)return context.method=\"throw\",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,\"return\"!==context.method&&(context.method=\"next\",context.arg=undefined),context.delegate=null,ContinueSentinel):info:(context.method=\"throw\",context.arg=new TypeError(\"iterator result is not an object\"),context.delegate=null,ContinueSentinel);}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry);}function resetTryEntry(entry){var record=entry.completion||{};record.type=\"normal\",delete record.arg,entry.completion=record;}function Context(tryLocsList){this.tryEntries=[{tryLoc:\"root\"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0);}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if(\"function\"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=undefined,next.done=!0,next;};return next.next=next;}}return{next:doneResult};}function doneResult(){return{value:undefined,done:!0};}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,\"constructor\",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,\"constructor\",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,\"GeneratorFunction\"),exports.isGeneratorFunction=function(genFun){var ctor=\"function\"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||\"GeneratorFunction\"===(ctor.displayName||ctor.name));},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,\"GeneratorFunction\")),genFun.prototype=Object.create(Gp),genFun;},exports.awrap=function(arg){return{__await:arg};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,function(){return this;}),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then(function(result){return result.done?result.value:iter.next();});},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,\"Generator\"),define(Gp,iteratorSymbol,function(){return this;}),define(Gp,\"toString\",function(){return\"[object Generator]\";}),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next;}return next.done=!0,next;};},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method=\"next\",this.arg=undefined,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)\"t\"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=undefined);},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if(\"throw\"===rootRecord.type)throw rootRecord.arg;return this.rval;},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type=\"throw\",record.arg=exception,context.next=loc,caught&&(context.method=\"next\",context.arg=undefined),!!caught;}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if(\"root\"===entry.tryLoc)return handle(\"end\");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,\"catchLoc\"),hasFinally=hasOwn.call(entry,\"finallyLoc\");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc);}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);}else{if(!hasFinally)throw new Error(\"try statement without catch or finally\");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc);}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,\"finallyLoc\")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break;}}finallyEntry&&(\"break\"===type||\"continue\"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method=\"next\",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record);},complete:function complete(record,afterLoc){if(\"throw\"===record.type)throw record.arg;return\"break\"===record.type||\"continue\"===record.type?this.next=record.arg:\"return\"===record.type?(this.rval=this.arg=record.arg,this.method=\"return\",this.next=\"end\"):\"normal\"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel;},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel;}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if(\"throw\"===record.type){var thrown=record.arg;resetTryEntry(entry);}return thrown;}}throw new Error(\"illegal catch attempt\");},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},\"next\"===this.method&&(this.arg=undefined),ContinueSentinel;}},exports;}import React,{useEffect,useReducer,createRef,useRef}from'react';import*as utils from'../../actions/editor';import'./Editor.css';import entryFields from'../../utils/entryFields';import FileList from'./FileList';import EntryList from'./EntryList';import InfoList from'./InfoList';import EditWindow from'./EditWindow';function editorReducer(state,action){// console.log(action.type.toUpperCase())\n// console.log(action)\nswitch(action.type){//\n// File List\n//\ncase'setUser':{return _objectSpread(_objectSpread({},state),{},{user:action.user});}case'loadNewFiles':{return _objectSpread(_objectSpread({},state),{},{isLoading:true});}case'load':{var selectedFile=state.selectedFile?action.files.find(function(file){return file._id===state.selectedFile._id;}):null;return _objectSpread(_objectSpread({},state),{},{isLoading:false,fileList:action.files,groups:action.groups,selectedFile:selectedFile,selectedGroup:'user'});}case'inputName':{return _objectSpread(_objectSpread({},state),{},{inputName:action.value});}case'select':{var _selectedFile=state.selectedFile&&action.file._id===state.selectedFile._id?null:action.file;var name=_selectedFile?_selectedFile.bibtexdatabasename:'';return _objectSpread(_objectSpread({},state),{},{uploadedFile:null,selectedFile:_selectedFile,inputName:name,inputSearch:'',newEntry:null});}case'upload':{if(action.file.type!=='text/x-bibtex'){return _objectSpread(_objectSpread({},state),{},{errorMessage:'Uploaded file is not bibtex'});}return _objectSpread(_objectSpread({},state),{},{uploadedFile:action.file,inputName:action.file.name.split('.').slice(0,-1).join('.')});}case'delete':{if(!state.selectedFile)return _objectSpread(_objectSpread({},state),{},{errorMessage:'No Database selected'});return _objectSpread(_objectSpread({},state),{},{isDeletingFile:true});}case'save':{if(!state.inputName)return _objectSpread(_objectSpread({},state),{},{errorMessage:'Database name cannot be empty'});if(state.uploadedFile){return _objectSpread(_objectSpread({},state),{},{isUploadingFile:true});}else if(state.selectedFile){return _objectSpread(_objectSpread({},state),{},{isSavingFile:true});}else{return _objectSpread(_objectSpread({},state),{},{isCreatingFile:true});}}case'finishDeleting':{if(!action.ok){return _objectSpread(_objectSpread({},state),{},{isDeletingFile:false,errorMessage:action.err});}return _objectSpread(_objectSpread({},state),{},{isDeletingFile:false,selectedFile:null,isLoading:true,inputName:''});}case'finishSaving':{if(!action.ok){return _objectSpread(_objectSpread({},state),{},{isSavingFile:false,errorMessage:action.err});}return _objectSpread(_objectSpread({},state),{},{isSavingFile:false,selectedFile:action.file,isLoading:true});}case'finishCreating':{if(!action.ok){return _objectSpread(_objectSpread({},state),{},{isCreatingFile:false,errorMessage:action.err});}return _objectSpread(_objectSpread({},state),{},{isCreatingFile:false,selectedFile:action.file,isLoading:true,inputName:action.file.bibtexdatabasename});}case'finishUploading':{if(!action.ok){return _objectSpread(_objectSpread({},state),{},{isUploadingFile:false,uploadedFile:null,errorMessage:action.err});}return _objectSpread(_objectSpread({},state),{},{isUploadingFile:false,uploadedFile:null,isLoading:true,selectedFile:action.file,inputName:action.file.bibtexdatabasename});}//\n// Entry List\n//\ncase'selectEntry':{var selectedEntry=state.selectedEntry&&action.entry._id===state.selectedEntry._id?null:action.entry;return _objectSpread(_objectSpread({},state),{},{selectedEntry:selectedEntry,newEntry:null,entryChanges:selectedEntry});}case'inputSearch':{return _objectSpread(_objectSpread({},state),{},{inputSearch:action.value});}case'selectNew':{var newEntry={entryType:action.value};return _objectSpread(_objectSpread({},state),{},{newEntry:newEntry,selectedEntry:null,entryChanges:_objectSpread(_objectSpread({},newEntry),{},{entryTags:{},citationKey:''})});}case'unselectNew':{return _objectSpread(_objectSpread({},state),{},{newEntry:null});}//\n// Info List\n//\ncase'inputCitationKey':{return _objectSpread(_objectSpread({},state),{},{entryChanges:_objectSpread(_objectSpread({},state.entryChanges),{},{citationKey:action.value})});}case'inputTag':{return _objectSpread(_objectSpread({},state),{},{entryChanges:_objectSpread(_objectSpread({},state.entryChanges),{},{entryTags:_objectSpread(_objectSpread({},state.entryChanges.entryTags),{},_defineProperty({},action.tag,action.value))})});}case'deleteEntry':{if(state.newEntry){return _objectSpread(_objectSpread({},state),{},{newEntry:null});}return _objectSpread(_objectSpread({},state),{},{isDeletingEntry:true});}case'saveEntry':{var _iterator=_createForOfIteratorHelper(entryFields[state.entryChanges.entryType].required),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var tag=_step.value;if(!state.entryChanges.entryTags[tag]||state.entryChanges.entryTags[tag]==='')return _objectSpread(_objectSpread({},state),{},{errorMessage:\"Entry field '\".concat(tag,\"' cannot be empty\")});}}catch(err){_iterator.e(err);}finally{_iterator.f();}if(state.entryChanges.citationKey==='')return _objectSpread(_objectSpread({},state),{},{errorMessage:\"Citation key cannot be empty\"});if(state.newEntry){return _objectSpread(_objectSpread({},state),{},{isCreatingEntry:true});}return _objectSpread(_objectSpread({},state),{},{isSavingEntry:true});}case'finishDeletingEntry':{if(!action.ok){return _objectSpread(_objectSpread({},state),{},{isDeletingEntry:false,errorMessage:action.err});}return _objectSpread(_objectSpread({},state),{},{isDeletingEntry:false,selectedEntry:null,entryChanges:null,isLoading:true});}case'finishCreatingEntry':{if(!action.ok){return _objectSpread(_objectSpread({},state),{},{isCreatingEntry:false,errorMessage:action.err});}return _objectSpread(_objectSpread({},state),{},{isCreatingEntry:false,selectedEntry:action.entry,inputSearch:'',entryChanges:action.entry,isLoading:true,newEntry:null});}case'finishSavingEntry':{if(!action.ok){return _objectSpread(_objectSpread({},state),{},{isSavingEntry:false,windowOpened:false,errorMessage:action.err});}return _objectSpread(_objectSpread({},state),{},{isSavingEntry:false,windowOpened:false,selectedEntry:action.entry,entryChanges:action.entry,isLoading:true});}case'selectGroup':{console.log('GROUP');console.log(action);return _objectSpread(_objectSpread({},state),{},{selectedGroup:action.group});}default:return state;//\n// Edit window\n//\ncase'openWindow':{return _objectSpread(_objectSpread({},state),{},{windowOpened:true});}case'closeWindow':{return _objectSpread(_objectSpread({},state),{},{windowOpened:false});}case'showError':{return _objectSpread(_objectSpread({},state),{},{errorMessage:action.error});}case'removeError':{return _objectSpread(_objectSpread({},state),{},{errorMessage:null});}}}var Editor=function Editor(){var initialState={user:null,groups:null,windowOpened:false,selectedGroup:'user',isLoading:true,isDeletingFile:false,isDeletingEntry:false,isUploadingFile:false,isSavingFile:false,isSavingEntry:false,isCreatingFile:false,isCreatingEntry:false,selectedFile:null,selectedEntry:null,entryChanges:null,newEntry:null,uploadedFile:null,inputName:'',inputSearch:'',errorMessage:null,isErrorAppearing:false};var _useReducer=useReducer(editorReducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];var timeout=useRef({error:null,check:null});var intervalTime=5*1000;// USER\nuseEffect(function(){var fetchUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var user;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return utils.getUser();case 2:user=_context.sent;dispatch({type:'setUser',user:user});case 4:case\"end\":return _context.stop();}},_callee);}));return function fetchUser(){return _ref.apply(this,arguments);};}();fetchUser();},[]);// AUTO REFRESH\nuseEffect(function(){var checkFiles=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var files;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:console.log('CHECKING');_context2.next=3;return utils.getDatabases();case 3:files=_context2.sent;if(!utils.compareFileLists(state.fileList,files)){dispatch({type:'loadNewFiles'});}case 5:case\"end\":return _context2.stop();}},_callee2);}));return function checkFiles(){return _ref2.apply(this,arguments);};}();clearInterval(timeout.current.check);timeout.current.check=setInterval(checkFiles,intervalTime);},[intervalTime,state.fileList]);// FETCH\nuseEffect(function(){var fetchFiles=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var files,groups;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return utils.getDatabases();case 2:files=_context3.sent;_context3.next=5;return utils.getGroups();case 5:groups=_context3.sent;dispatch({type:'load',files:files,groups:groups});case 7:case\"end\":return _context3.stop();}},_callee3);}));return function fetchFiles(){return _ref3.apply(this,arguments);};}();if(state.isLoading)fetchFiles();},[state.isLoading]);// DELETE FILE\nuseEffect(function(){var deleteFile=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){var res,err;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.next=2;return utils.deleteDatabase(state.selectedFile._id);case 2:res=_context4.sent;err=res.data.error?res.data.error.reason:null;dispatch({type:'finishDeleting',ok:res.data.ok,err:err});case 5:case\"end\":return _context4.stop();}},_callee4);}));return function deleteFile(){return _ref4.apply(this,arguments);};}();if(state.isDeletingFile)deleteFile();},[state.isDeletingFile,state.selectedFile]);// CREATE FILE\nuseEffect(function(){var createFile=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(){var res,err,_res,_err;return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:if(!(state.selectedGroup==='user')){_context5.next=8;break;}_context5.next=3;return utils.createDatabase(state.inputName);case 3:res=_context5.sent;err=res.data.error?res.data.error.reason:null;dispatch({type:'finishCreating',ok:res.data.ok,file:res.data.response,err:err});_context5.next=13;break;case 8:_context5.next=10;return utils.createDatabase(state.inputName,state.selectedGroup);case 10:_res=_context5.sent;_err=_res.data.error?_res.data.error.reason:null;dispatch({type:'finishCreating',ok:_res.data.ok,file:_res.data.response,err:_err});case 13:case\"end\":return _context5.stop();}},_callee5);}));return function createFile(){return _ref5.apply(this,arguments);};}();if(state.isCreatingFile)createFile();},[state.isCreatingFile,state.inputName,state.selectedGroup]);// UPLOAD FILE\nuseEffect(function(){var uploadFile=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7(){var fileReader;return _regeneratorRuntime().wrap(function _callee7$(_context7){while(1)switch(_context7.prev=_context7.next){case 0:fileReader=new FileReader();fileReader.readAsText(state.uploadedFile);fileReader.onload=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(){var res,err;return _regeneratorRuntime().wrap(function _callee6$(_context6){while(1)switch(_context6.prev=_context6.next){case 0:_context6.next=2;return utils.uploadDatabase(fileReader.result,state.inputName,state.selectedGroup);case 2:res=_context6.sent;err=res.data.error?res.data.error.reason:null;dispatch({type:'finishUploading',ok:res.data.ok,file:res.data.response,err:err});case 5:case\"end\":return _context6.stop();}},_callee6);}));fileReader.onerror=function(){console.log(fileReader.error);dispatch({type:'finishUploading',ok:false,err:'Failed to read Bibtex file'});};case 4:case\"end\":return _context7.stop();}},_callee7);}));return function uploadFile(){return _ref6.apply(this,arguments);};}();if(state.isUploadingFile)uploadFile();},[state.isUploadingFile,state.uploadedFile,state.inputName,state.selectedGroup]);// CHANGE NAME\nuseEffect(function(){var changeName=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee8(){var res,err;return _regeneratorRuntime().wrap(function _callee8$(_context8){while(1)switch(_context8.prev=_context8.next){case 0:_context8.next=2;return utils.changeName(state.inputName,state.selectedFile._id);case 2:res=_context8.sent;err=res.data.error?res.data.error.reason:null;dispatch({type:'finishSaving',ok:res.data.ok,file:res.data.response,err:err});case 5:case\"end\":return _context8.stop();}},_callee8);}));return function changeName(){return _ref8.apply(this,arguments);};}();if(state.isSavingFile)changeName();},[state.isSavingFile,state.inputName,state.selectedFile]);// DELETE ENTRY\nuseEffect(function(){var deleteEntry=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee9(){var res,err;return _regeneratorRuntime().wrap(function _callee9$(_context9){while(1)switch(_context9.prev=_context9.next){case 0:_context9.next=2;return utils.deleteEntry(state.selectedEntry._id,state.selectedFile._id);case 2:res=_context9.sent;err=res.data.error?res.data.error.reason:null;dispatch({type:'finishDeletingEntry',ok:res.data.ok,err:err});case 5:case\"end\":return _context9.stop();}},_callee9);}));return function deleteEntry(){return _ref9.apply(this,arguments);};}();if(state.isDeletingEntry)deleteEntry();},[state.isDeletingEntry,state.selectedFile,state.selectedEntry]);// CREATE ENTRY\nuseEffect(function(){var createEntry=/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee10(){var res,err;return _regeneratorRuntime().wrap(function _callee10$(_context10){while(1)switch(_context10.prev=_context10.next){case 0:_context10.next=2;return utils.addEntry(state.entryChanges,state.selectedFile._id);case 2:res=_context10.sent;err=res.data.error?res.data.error.reason:null;dispatch({type:'finishCreatingEntry',ok:res.data.ok,entry:res.data.response,err:err});case 5:case\"end\":return _context10.stop();}},_callee10);}));return function createEntry(){return _ref10.apply(this,arguments);};}();if(state.isCreatingEntry)createEntry();},[state.isCreatingEntry,state.entryChanges,state.selectedFile]);// SAVE ENTRY\nuseEffect(function(){var saveEntry=/*#__PURE__*/function(){var _ref11=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee11(){var res,err;return _regeneratorRuntime().wrap(function _callee11$(_context11){while(1)switch(_context11.prev=_context11.next){case 0:_context11.next=2;return utils.changeEntry(state.entryChanges,state.selectedFile._id);case 2:res=_context11.sent;err=res.data.error?res.data.error.reason:null;dispatch({type:'finishSavingEntry',ok:res.data.ok,entry:res.data.response,err:err});case 5:case\"end\":return _context11.stop();}},_callee11);}));return function saveEntry(){return _ref11.apply(this,arguments);};}();if(state.isSavingEntry)saveEntry();},[state.isSavingEntry,state.entryChanges,state.selectedFile]);// ERROR\nuseEffect(function(){var onTimeout=function onTimeout(){dispatch({type:'removeError'});};if(state.errorMessage){if(timeout.current.error){clearTimeout(timeout.current.error);}timeout.current.error=setTimeout(onTimeout,6000);}},[state.errorMessage]);var fileActive=!state.isLoading;var entryActive=!!state.selectedFile&&!state.isLoading;var infoActive=!!state.selectedFile&&!state.isLoading&&(!!state.selectedEntry&&!!state.selectedFile.entries.find(function(entry){return entry._id===state.selectedEntry._id;})||!!state.newEntry);var isSelectedAllowed=state.selectedFile&&(state.selectedFile.user&&state.selectedFile.user._id===state.user._id||state.selectedFile.group&&(state.selectedFile.group.owner===state.user._id||state.selectedFile.group.users.includes(state.user._id)));return/*#__PURE__*/React.createElement(\"div\",{className:\"Editor\"},/*#__PURE__*/React.createElement(\"div\",{className:\"main-part\"},/*#__PURE__*/React.createElement(FileList,{active:fileActive,isSelectedAllowed:isSelectedAllowed,selectedFile:state.selectedFile,uploading:!!state.uploadedFile,inputName:state.inputName,fileList:state.fileList,groups:state.groups,user:state.user,dispatch:dispatch}),/*#__PURE__*/React.createElement(EntryList,{active:entryActive,isSelectedAllowed:isSelectedAllowed,file:state.selectedFile,selectedEntry:state.selectedEntry,newEntry:state.newEntry,search:state.inputSearch,dispatch:dispatch}),/*#__PURE__*/React.createElement(InfoList,{active:infoActive,isSelectedAllowed:isSelectedAllowed,entry:state.selectedEntry||state.newEntry,entryChanges:state.entryChanges,dispatch:dispatch}),/*#__PURE__*/React.createElement(EditWindow,{active:state.windowOpened,entry:state.selectedEntry||state.newEntry,entryChanges:state.entryChanges,dispatch:dispatch})),/*#__PURE__*/React.createElement(\"div\",{className:\"editor-error-message\",style:{bottom:state.errorMessage?'60px':'30px',opacity:state.errorMessage?'1':'0'}},state.errorMessage||''));};export default Editor;","map":{"version":3,"names":["React","useEffect","useReducer","createRef","useRef","utils","entryFields","FileList","EntryList","InfoList","EditWindow","editorReducer","state","action","type","user","isLoading","selectedFile","files","find","file","_id","fileList","groups","selectedGroup","inputName","value","name","bibtexdatabasename","uploadedFile","inputSearch","newEntry","errorMessage","split","slice","join","isDeletingFile","isUploadingFile","isSavingFile","isCreatingFile","ok","err","selectedEntry","entry","entryChanges","entryType","entryTags","citationKey","tag","isDeletingEntry","required","isCreatingEntry","isSavingEntry","windowOpened","console","log","group","error","Editor","initialState","isErrorAppearing","dispatch","timeout","check","intervalTime","fetchUser","getUser","checkFiles","getDatabases","compareFileLists","clearInterval","current","setInterval","fetchFiles","getGroups","deleteFile","deleteDatabase","res","data","reason","createFile","createDatabase","response","uploadFile","fileReader","FileReader","readAsText","onload","uploadDatabase","result","onerror","changeName","deleteEntry","createEntry","addEntry","saveEntry","changeEntry","onTimeout","clearTimeout","setTimeout","fileActive","entryActive","infoActive","entries","isSelectedAllowed","owner","users","includes","bottom","opacity"],"sources":["/home/spencer/Personal/Bibtex-web-database-master/client/src/components/editor/Editor.js"],"sourcesContent":["import React, { useEffect, useReducer, createRef, useRef } from 'react';\nimport * as utils from '../../actions/editor';\nimport './Editor.css';\nimport entryFields from '../../utils/entryFields';\nimport FileList from './FileList';\nimport EntryList from './EntryList';\nimport InfoList from './InfoList';\nimport EditWindow from './EditWindow';\n\nfunction editorReducer(state, action) {\n  // console.log(action.type.toUpperCase())\n  // console.log(action)\n  switch (action.type) {\n    //\n    // File List\n    //\n    case 'setUser': {\n      return { ...state, user: action.user };\n    }\n    case 'loadNewFiles': {\n      return {\n        ...state,\n        isLoading: true,\n      };\n    }\n    case 'load': {\n      const selectedFile = state.selectedFile\n        ? action.files.find((file) => file._id === state.selectedFile._id)\n        : null;\n      return {\n        ...state,\n        isLoading: false,\n        fileList: action.files,\n        groups: action.groups,\n        selectedFile,\n        selectedGroup: 'user',\n      };\n    }\n    case 'inputName': {\n      return {\n        ...state,\n        inputName: action.value,\n      };\n    }\n    case 'select': {\n      const selectedFile =\n        state.selectedFile && action.file._id === state.selectedFile._id\n          ? null\n          : action.file;\n      const name = selectedFile ? selectedFile.bibtexdatabasename : '';\n      return {\n        ...state,\n        uploadedFile: null,\n        selectedFile,\n        inputName: name,\n        inputSearch: '',\n        newEntry: null,\n      };\n    }\n    case 'upload': {\n      if (action.file.type !== 'text/x-bibtex') {\n        return {\n          ...state,\n          errorMessage: 'Uploaded file is not bibtex',\n        };\n      }\n      return {\n        ...state,\n        uploadedFile: action.file,\n        inputName: action.file.name.split('.').slice(0, -1).join('.'),\n      };\n    }\n    case 'delete': {\n      if (!state.selectedFile)\n        return {\n          ...state,\n          errorMessage: 'No Database selected',\n        };\n      return {\n        ...state,\n        isDeletingFile: true,\n      };\n    }\n    case 'save': {\n      if (!state.inputName)\n        return {\n          ...state,\n          errorMessage: 'Database name cannot be empty',\n        };\n      if (state.uploadedFile) {\n        return {\n          ...state,\n          isUploadingFile: true,\n        };\n      } else if (state.selectedFile) {\n        return {\n          ...state,\n          isSavingFile: true,\n        };\n      } else {\n        return {\n          ...state,\n          isCreatingFile: true,\n        };\n      }\n    }\n    case 'finishDeleting': {\n      if (!action.ok) {\n        return {\n          ...state,\n          isDeletingFile: false,\n          errorMessage: action.err,\n        };\n      }\n      return {\n        ...state,\n        isDeletingFile: false,\n        selectedFile: null,\n        isLoading: true,\n        inputName: '',\n      };\n    }\n    case 'finishSaving': {\n      if (!action.ok) {\n        return {\n          ...state,\n          isSavingFile: false,\n          errorMessage: action.err,\n        };\n      }\n      return {\n        ...state,\n        isSavingFile: false,\n        selectedFile: action.file,\n        isLoading: true,\n      };\n    }\n    case 'finishCreating': {\n      if (!action.ok) {\n        return {\n          ...state,\n          isCreatingFile: false,\n          errorMessage: action.err,\n        };\n      }\n      return {\n        ...state,\n        isCreatingFile: false,\n        selectedFile: action.file,\n        isLoading: true,\n        inputName: action.file.bibtexdatabasename,\n      };\n    }\n    case 'finishUploading': {\n      if (!action.ok) {\n        return {\n          ...state,\n          isUploadingFile: false,\n          uploadedFile: null,\n          errorMessage: action.err,\n        };\n      }\n      return {\n        ...state,\n        isUploadingFile: false,\n        uploadedFile: null,\n        isLoading: true,\n        selectedFile: action.file,\n        inputName: action.file.bibtexdatabasename,\n      };\n    }\n    //\n    // Entry List\n    //\n    case 'selectEntry': {\n      const selectedEntry =\n        state.selectedEntry && action.entry._id === state.selectedEntry._id\n          ? null\n          : action.entry;\n      return {\n        ...state,\n        selectedEntry,\n        newEntry: null,\n        entryChanges: selectedEntry,\n      };\n    }\n    case 'inputSearch': {\n      return {\n        ...state,\n        inputSearch: action.value,\n      };\n    }\n    case 'selectNew': {\n      const newEntry = { entryType: action.value };\n      return {\n        ...state,\n        newEntry,\n        selectedEntry: null,\n        entryChanges: {\n          ...newEntry,\n          entryTags: {},\n          citationKey: '',\n        },\n      };\n    }\n    case 'unselectNew': {\n      return {\n        ...state,\n        newEntry: null,\n      };\n    }\n    //\n    // Info List\n    //\n    case 'inputCitationKey': {\n      return {\n        ...state,\n        entryChanges: {\n          ...state.entryChanges,\n          citationKey: action.value,\n        },\n      };\n    }\n    case 'inputTag': {\n      return {\n        ...state,\n        entryChanges: {\n          ...state.entryChanges,\n          entryTags: {\n            ...state.entryChanges.entryTags,\n            [action.tag]: action.value,\n          },\n        },\n      };\n    }\n    case 'deleteEntry': {\n      if (state.newEntry) {\n        return {\n          ...state,\n          newEntry: null,\n        };\n      }\n      return {\n        ...state,\n        isDeletingEntry: true,\n      };\n    }\n    case 'saveEntry': {\n      for (let tag of entryFields[state.entryChanges.entryType].required) {\n        if (\n          !state.entryChanges.entryTags[tag] ||\n          state.entryChanges.entryTags[tag] === ''\n        )\n          return {\n            ...state,\n            errorMessage: `Entry field '${tag}' cannot be empty`,\n          };\n      }\n      if (state.entryChanges.citationKey === '')\n        return {\n          ...state,\n          errorMessage: `Citation key cannot be empty`,\n        };\n      if (state.newEntry) {\n        return {\n          ...state,\n          isCreatingEntry: true,\n        };\n      }\n      return {\n        ...state,\n        isSavingEntry: true,\n      };\n    }\n    case 'finishDeletingEntry': {\n      if (!action.ok) {\n        return {\n          ...state,\n          isDeletingEntry: false,\n          errorMessage: action.err,\n        };\n      }\n      return {\n        ...state,\n        isDeletingEntry: false,\n        selectedEntry: null,\n        entryChanges: null,\n        isLoading: true,\n      };\n    }\n    case 'finishCreatingEntry': {\n      if (!action.ok) {\n        return {\n          ...state,\n          isCreatingEntry: false,\n          errorMessage: action.err,\n        };\n      }\n      return {\n        ...state,\n        isCreatingEntry: false,\n        selectedEntry: action.entry,\n        inputSearch: '',\n        entryChanges: action.entry,\n        isLoading: true,\n        newEntry: null,\n      };\n    }\n    case 'finishSavingEntry': {\n      if (!action.ok) {\n        return {\n          ...state,\n          isSavingEntry: false,\n          windowOpened: false,\n          errorMessage: action.err,\n        };\n      }\n      return {\n        ...state,\n        isSavingEntry: false,\n        windowOpened: false,\n        selectedEntry: action.entry,\n        entryChanges: action.entry,\n        isLoading: true,\n      };\n    }\n    case 'selectGroup': {\n      console.log('GROUP');\n      console.log(action);\n      return {\n        ...state,\n        selectedGroup: action.group,\n      };\n    }\n    default:\n      return state;\n    //\n    // Edit window\n    //\n    case 'openWindow': {\n      return {\n        ...state,\n        windowOpened: true,\n      };\n    }\n    case 'closeWindow': {\n      return {\n        ...state,\n        windowOpened: false,\n      };\n    }\n    case 'showError': {\n      return {\n        ...state,\n        errorMessage: action.error,\n      };\n    }\n    case 'removeError': {\n      return {\n        ...state,\n        errorMessage: null,\n      };\n    }\n  }\n}\n\nconst Editor = () => {\n  const initialState = {\n    user: null,\n    groups: null,\n    windowOpened: false,\n    selectedGroup: 'user',\n    isLoading: true,\n    isDeletingFile: false,\n    isDeletingEntry: false,\n    isUploadingFile: false,\n    isSavingFile: false,\n    isSavingEntry: false,\n    isCreatingFile: false,\n    isCreatingEntry: false,\n    selectedFile: null,\n    selectedEntry: null,\n    entryChanges: null,\n    newEntry: null,\n    uploadedFile: null,\n    inputName: '',\n    inputSearch: '',\n    errorMessage: null,\n    isErrorAppearing: false,\n  };\n  const [state, dispatch] = useReducer(editorReducer, initialState);\n  const timeout = useRef({ error: null, check: null });\n  const intervalTime = 5 * 1000;\n\n  // USER\n  useEffect(() => {\n    const fetchUser = async () => {\n      const user = await utils.getUser();\n      dispatch({ type: 'setUser', user });\n    };\n    fetchUser();\n  }, []);\n  // AUTO REFRESH\n  useEffect(() => {\n    const checkFiles = async () => {\n      console.log('CHECKING');\n      const files = await utils.getDatabases();\n      if (!utils.compareFileLists(state.fileList, files)) {\n        dispatch({ type: 'loadNewFiles' });\n      }\n    };\n    clearInterval(timeout.current.check);\n    timeout.current.check = setInterval(checkFiles, intervalTime);\n  }, [intervalTime, state.fileList]);\n  // FETCH\n  useEffect(() => {\n    const fetchFiles = async () => {\n      const files = await utils.getDatabases();\n      const groups = await utils.getGroups();\n      dispatch({ type: 'load', files, groups });\n    };\n    if (state.isLoading) fetchFiles();\n  }, [state.isLoading]);\n  // DELETE FILE\n  useEffect(() => {\n    const deleteFile = async () => {\n      const res = await utils.deleteDatabase(state.selectedFile._id);\n      const err = res.data.error ? res.data.error.reason : null;\n      dispatch({ type: 'finishDeleting', ok: res.data.ok, err });\n    };\n    if (state.isDeletingFile) deleteFile();\n  }, [state.isDeletingFile, state.selectedFile]);\n  // CREATE FILE\n  useEffect(() => {\n    const createFile = async () => {\n      if (state.selectedGroup === 'user') {\n        const res = await utils.createDatabase(state.inputName);\n        const err = res.data.error ? res.data.error.reason : null;\n        dispatch({\n          type: 'finishCreating',\n          ok: res.data.ok,\n          file: res.data.response,\n          err,\n        });\n      } else {\n        const res = await utils.createDatabase(\n          state.inputName,\n          state.selectedGroup\n        );\n        const err = res.data.error ? res.data.error.reason : null;\n        dispatch({\n          type: 'finishCreating',\n          ok: res.data.ok,\n          file: res.data.response,\n          err,\n        });\n      }\n    };\n    if (state.isCreatingFile) createFile();\n  }, [state.isCreatingFile, state.inputName, state.selectedGroup]);\n  // UPLOAD FILE\n  useEffect(() => {\n    const uploadFile = async () => {\n      const fileReader = new FileReader();\n      fileReader.readAsText(state.uploadedFile);\n      fileReader.onload = async () => {\n        const res = await utils.uploadDatabase(\n          fileReader.result,\n          state.inputName,\n          state.selectedGroup\n        );\n        const err = res.data.error ? res.data.error.reason : null;\n        dispatch({\n          type: 'finishUploading',\n          ok: res.data.ok,\n          file: res.data.response,\n          err,\n        });\n      };\n      fileReader.onerror = () => {\n        console.log(fileReader.error);\n        dispatch({\n          type: 'finishUploading',\n          ok: false,\n          err: 'Failed to read Bibtex file',\n        });\n      };\n    };\n    if (state.isUploadingFile) uploadFile();\n  }, [\n    state.isUploadingFile,\n    state.uploadedFile,\n    state.inputName,\n    state.selectedGroup,\n  ]);\n  // CHANGE NAME\n  useEffect(() => {\n    const changeName = async () => {\n      const res = await utils.changeName(\n        state.inputName,\n        state.selectedFile._id\n      );\n      const err = res.data.error ? res.data.error.reason : null;\n      dispatch({\n        type: 'finishSaving',\n        ok: res.data.ok,\n        file: res.data.response,\n        err,\n      });\n    };\n    if (state.isSavingFile) changeName();\n  }, [state.isSavingFile, state.inputName, state.selectedFile]);\n  // DELETE ENTRY\n  useEffect(() => {\n    const deleteEntry = async () => {\n      const res = await utils.deleteEntry(\n        state.selectedEntry._id,\n        state.selectedFile._id\n      );\n      const err = res.data.error ? res.data.error.reason : null;\n      dispatch({ type: 'finishDeletingEntry', ok: res.data.ok, err });\n    };\n    if (state.isDeletingEntry) deleteEntry();\n  }, [state.isDeletingEntry, state.selectedFile, state.selectedEntry]);\n  // CREATE ENTRY\n  useEffect(() => {\n    const createEntry = async () => {\n      const res = await utils.addEntry(\n        state.entryChanges,\n        state.selectedFile._id\n      );\n      const err = res.data.error ? res.data.error.reason : null;\n      dispatch({\n        type: 'finishCreatingEntry',\n        ok: res.data.ok,\n        entry: res.data.response,\n        err,\n      });\n    };\n    if (state.isCreatingEntry) createEntry();\n  }, [state.isCreatingEntry, state.entryChanges, state.selectedFile]);\n  // SAVE ENTRY\n  useEffect(() => {\n    const saveEntry = async () => {\n      const res = await utils.changeEntry(\n        state.entryChanges,\n        state.selectedFile._id\n      );\n      const err = res.data.error ? res.data.error.reason : null;\n      dispatch({\n        type: 'finishSavingEntry',\n        ok: res.data.ok,\n        entry: res.data.response,\n        err,\n      });\n    };\n    if (state.isSavingEntry) saveEntry();\n  }, [state.isSavingEntry, state.entryChanges, state.selectedFile]);\n  // ERROR\n  useEffect(() => {\n    const onTimeout = () => {\n      dispatch({ type: 'removeError' });\n    };\n\n    if (state.errorMessage) {\n      if (timeout.current.error) {\n        clearTimeout(timeout.current.error);\n      }\n      timeout.current.error = setTimeout(onTimeout, 6000);\n    }\n  }, [state.errorMessage]);\n\n  const fileActive = !state.isLoading;\n  const entryActive = !!state.selectedFile && !state.isLoading;\n  const infoActive =\n    !!state.selectedFile &&\n    !state.isLoading &&\n    ((!!state.selectedEntry &&\n      !!state.selectedFile.entries.find(\n        (entry) => entry._id === state.selectedEntry._id\n      )) ||\n      !!state.newEntry);\n\n  const isSelectedAllowed =\n    state.selectedFile &&\n    ((state.selectedFile.user &&\n      state.selectedFile.user._id === state.user._id) ||\n      (state.selectedFile.group &&\n        (state.selectedFile.group.owner === state.user._id ||\n          state.selectedFile.group.users.includes(state.user._id))));\n\n  return (\n    <div className='Editor'>\n      <div className='main-part'>\n        <FileList\n          active={fileActive}\n          isSelectedAllowed={isSelectedAllowed}\n          selectedFile={state.selectedFile}\n          uploading={!!state.uploadedFile}\n          inputName={state.inputName}\n          fileList={state.fileList}\n          groups={state.groups}\n          user={state.user}\n          dispatch={dispatch}\n        />\n        <EntryList\n          active={entryActive}\n          isSelectedAllowed={isSelectedAllowed}\n          file={state.selectedFile}\n          selectedEntry={state.selectedEntry}\n          newEntry={state.newEntry}\n          search={state.inputSearch}\n          dispatch={dispatch}\n        />\n        <InfoList\n          active={infoActive}\n          isSelectedAllowed={isSelectedAllowed}\n          entry={state.selectedEntry || state.newEntry}\n          entryChanges={state.entryChanges}\n          dispatch={dispatch}\n        />\n        <EditWindow\n          active={state.windowOpened}\n          entry={state.selectedEntry || state.newEntry}\n          entryChanges={state.entryChanges}\n          dispatch={dispatch}\n        />\n      </div>\n      <div\n        className='editor-error-message'\n        style={{\n          bottom: state.errorMessage ? '60px' : '30px',\n          opacity: state.errorMessage ? '1' : '0',\n        }}\n      >\n        {state.errorMessage || ''}\n      </div>\n    </div>\n  );\n};\n\nEditor.propTypes = {};\n\nexport default Editor;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}