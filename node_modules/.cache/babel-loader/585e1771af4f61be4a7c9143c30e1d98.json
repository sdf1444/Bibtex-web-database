{"ast":null,"code":"import _createForOfIteratorHelper from\"/home/spencer/Personal/Bibtex-web-database-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _slicedToArray from\"/home/spencer/Personal/Bibtex-web-database-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect}from'react';import{Dropdown,Menu}from'semantic-ui-react';import{convertRefs}from'../../actions/bibtex';import Entry from'./Entry';import'./EntryList.css';var options=[{key:1,text:'Article',value:'article'},{key:2,text:'Book',value:'book'},{key:3,text:'Booklet',value:'booklet'},{key:4,text:'Conference',value:'conference'},{key:5,text:'InBook',value:'inBook'},{key:6,text:'InCollection',value:'inCollection'},{key:7,text:'InProceedings',value:'inProceedings'},{key:8,text:'Manual',value:'manual'},{key:9,text:'Masters Thesis',value:'mastersThesis'},{key:10,text:'Misc',value:'misc'},{key:11,text:'Online',value:'online'},{key:12,text:'Phd Thesis',value:'phdThesis'},{key:13,text:'Proceedings',value:'proceedings'}];function parseSearch(search){var result={entryTags:{}};var arr=search.trim().split(' ');var typeString=arr.find(function(str){return str.startsWith('@');});if(typeString){result.entryType=typeString.split('@')[1];}arr.forEach(function(str){if(str.split('=').length===2){var _str$split=str.split('='),_str$split2=_slicedToArray(_str$split,2),key=_str$split2[0],value=_str$split2[1];result.entryTags[key]=value;}});return result;}var EntryList=function EntryList(props){useEffect(function(){var chosen=document.querySelector('.chosen-entry');if(chosen)chosen.scrollIntoView({behavior:'smooth'});});if(!props.active||!props.file)return/*#__PURE__*/React.createElement(\"div\",{className:\"entry-div\"});var searchParams=parseSearch(props.search);var entryList=Object.keys(searchParams.entryTags).length!==0||searchParams.entryType?props.file.entries.filter(function(entry){var val=true;if(searchParams.entryType){val=val&&(entry.entryType.toLowerCase().startsWith(searchParams.entryType)||entry.entryType.toLowerCase().includes(searchParams.entryType));}var values=Object.entries(searchParams.entryTags);if(values.length!==0){var matches=false;var _iterator=_createForOfIteratorHelper(values),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var _step$value=_slicedToArray(_step.value,2),key=_step$value[0],value=_step$value[1];if(key==='citationKey'){if(entry[key].startsWith(value)||entry[key].includes(value)){matches=true;}continue;}if(entry.entryTags[key]&&(entry.entryTags[key].startsWith(value)||entry.entryTags[key].includes(value))){matches=true;}}}catch(err){_iterator.e(err);}finally{_iterator.f();}return val&&matches;}return val;}):props.file.entries;var bibtexString=convertRefs(entryList);var listDivs=entryList.map(function(entry){var isChosen=props.selectedEntry&&props.selectedEntry._id===entry._id;return/*#__PURE__*/React.createElement(Entry,{isChosen:isChosen,isNew:false,entry:entry,key:entry._id,onClick:function onClick(){return props.dispatch({type:'selectEntry',entry:entry});}});});var newEntryDiv=/*#__PURE__*/React.createElement(Entry,{isChosen:!!props.newEntry,isNew:true,isDisabled:!props.newEntry,entry:props.newEntry,key:\"newEntry\",onClick:function onClick(){return props.dispatch({type:'unselectNew'});}});return/*#__PURE__*/React.createElement(\"div\",{className:\"entry-div\"},/*#__PURE__*/React.createElement(Menu,{compact:true,className:\"add-entry-btn\"},/*#__PURE__*/React.createElement(Dropdown,{text:\"Add entry\",options:options,simple:true,item:true,onChange:function onChange(e,data){if(props.isSelectedAllowed)props.dispatch({type:'selectNew',value:data.value});}})),/*#__PURE__*/React.createElement(\"div\",{className:\"entry-search\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"entry-search\"},\"Find entries\"),/*#__PURE__*/React.createElement(\"input\",{className:\"entry-search-input\",id:\"entry-search\",placeholder:\"example: @article title=mytitle\",value:props.search,onChange:function onChange(e){return props.dispatch({type:'inputSearch',value:e.target.value});}})),/*#__PURE__*/React.createElement(\"div\",{className:\"entry-body\"},listDivs,newEntryDiv),/*#__PURE__*/React.createElement(\"a\",{className:\"download-btn\",href:\"data:text/x-bibtex,\".concat(bibtexString),download:\"\".concat(props.file.bibtexdatabasename,\".bib\")},\"Download\"));};export default EntryList;","map":{"version":3,"names":["React","useEffect","Dropdown","Menu","convertRefs","Entry","options","key","text","value","parseSearch","search","result","entryTags","arr","trim","split","typeString","find","str","startsWith","entryType","forEach","length","EntryList","props","chosen","document","querySelector","scrollIntoView","behavior","active","file","searchParams","entryList","Object","keys","entries","filter","entry","val","toLowerCase","includes","values","matches","bibtexString","listDivs","map","isChosen","selectedEntry","_id","dispatch","type","newEntryDiv","newEntry","e","data","isSelectedAllowed","target","bibtexdatabasename"],"sources":["/home/spencer/Personal/Bibtex-web-database-master/client/src/components/editor/EntryList.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport PropTypes, { element } from 'prop-types';\nimport { Dropdown, Menu } from 'semantic-ui-react';\nimport { convertRefs } from '../../actions/bibtex';\nimport Entry from './Entry';\nimport './EntryList.css';\n\nconst options = [\n  { key: 1, text: 'Article', value: 'article' },\n  { key: 2, text: 'Book', value: 'book' },\n  { key: 3, text: 'Booklet', value: 'booklet' },\n  { key: 4, text: 'Conference', value: 'conference' },\n  { key: 5, text: 'InBook', value: 'inBook' },\n  { key: 6, text: 'InCollection', value: 'inCollection' },\n  { key: 7, text: 'InProceedings', value: 'inProceedings' },\n  { key: 8, text: 'Manual', value: 'manual' },\n  { key: 9, text: 'Masters Thesis', value: 'mastersThesis' },\n  { key: 10, text: 'Misc', value: 'misc' },\n  { key: 11, text: 'Online', value: 'online' },\n  { key: 12, text: 'Phd Thesis', value: 'phdThesis' },\n  { key: 13, text: 'Proceedings', value: 'proceedings' },\n];\n\nfunction parseSearch(search) {\n  const result = { entryTags: {} };\n  const arr = search.trim().split(' ');\n  let typeString = arr.find((str) => str.startsWith('@'));\n  if (typeString) {\n    result.entryType = typeString.split('@')[1];\n  }\n  arr.forEach((str) => {\n    if (str.split('=').length === 2) {\n      const [key, value] = str.split('=');\n      result.entryTags[key] = value;\n    }\n  });\n  return result;\n}\n\nconst EntryList = (props) => {\n  useEffect(() => {\n    const chosen = document.querySelector('.chosen-entry');\n    if (chosen) chosen.scrollIntoView({ behavior: 'smooth' });\n  });\n\n  if (!props.active || !props.file) return <div className='entry-div'></div>;\n\n  const searchParams = parseSearch(props.search);\n  const entryList =\n    Object.keys(searchParams.entryTags).length !== 0 || searchParams.entryType\n      ? props.file.entries.filter((entry) => {\n          let val = true;\n          if (searchParams.entryType) {\n            val =\n              val &&\n              (entry.entryType\n                .toLowerCase()\n                .startsWith(searchParams.entryType) ||\n                entry.entryType.toLowerCase().includes(searchParams.entryType));\n          }\n          const values = Object.entries(searchParams.entryTags);\n          if (values.length !== 0) {\n            let matches = false;\n            for (let [key, value] of values) {\n              if (key === 'citationKey') {\n                if (\n                  entry[key].startsWith(value) ||\n                  entry[key].includes(value)\n                ) {\n                  matches = true;\n                }\n                continue;\n              }\n              if (\n                entry.entryTags[key] &&\n                (entry.entryTags[key].startsWith(value) ||\n                  entry.entryTags[key].includes(value))\n              ) {\n                matches = true;\n              }\n            }\n            return val && matches;\n          }\n          return val;\n        })\n      : props.file.entries;\n  const bibtexString = convertRefs(entryList);\n  const listDivs = entryList.map((entry) => {\n    const isChosen =\n      props.selectedEntry && props.selectedEntry._id === entry._id;\n    return (\n      <Entry\n        isChosen={isChosen}\n        isNew={false}\n        entry={entry}\n        key={entry._id}\n        onClick={() =>\n          props.dispatch({\n            type: 'selectEntry',\n            entry,\n          })\n        }\n      />\n    );\n  });\n\n  const newEntryDiv = (\n    <Entry\n      isChosen={!!props.newEntry}\n      isNew={true}\n      isDisabled={!props.newEntry}\n      entry={props.newEntry}\n      key='newEntry'\n      onClick={() => props.dispatch({ type: 'unselectNew' })}\n    />\n  );\n  return (\n    <div className='entry-div'>\n      <Menu compact className='add-entry-btn'>\n        <Dropdown\n          text='Add entry'\n          options={options}\n          simple\n          item\n          onChange={(e, data) => {\n            if (props.isSelectedAllowed)\n              props.dispatch({\n                type: 'selectNew',\n                value: data.value,\n              });\n          }}\n        ></Dropdown>\n      </Menu>\n      <div className='entry-search'>\n        <label htmlFor='entry-search'>Find entries</label>\n        <input\n          className='entry-search-input'\n          id='entry-search'\n          placeholder='example: @article title=mytitle'\n          value={props.search}\n          onChange={(e) =>\n            props.dispatch({\n              type: 'inputSearch',\n              value: e.target.value,\n            })\n          }\n        ></input>\n      </div>\n      <div className='entry-body'>\n        {listDivs}\n        {newEntryDiv}\n      </div>\n      <a\n        className='download-btn'\n        href={`data:text/x-bibtex,${bibtexString}`}\n        download={`${props.file.bibtexdatabasename}.bib`}\n      >\n        Download\n      </a>\n    </div>\n  );\n};\n\nEntryList.propTypes = {\n  active: PropTypes.bool.isRequired,\n  isSelectedAllowed: PropTypes.bool,\n  newEntry: PropTypes.any,\n  selectedEntry: PropTypes.any,\n  file: PropTypes.any,\n  search: PropTypes.string.isRequired,\n  dispatch: PropTypes.any.isRequired,\n};\n\nexport default EntryList;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}