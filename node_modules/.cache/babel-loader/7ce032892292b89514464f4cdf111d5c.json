{"ast":null,"code":"import _asyncToGenerator from\"/home/spencer/Personal/Bibtex-web-database-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/spencer/Personal/Bibtex-web-database-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"/home/spencer/Personal/Bibtex-web-database-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";function _regeneratorRuntime(){\"use strict\";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return exports;};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value;},$Symbol=\"function\"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||\"@@iterator\",asyncIteratorSymbol=$Symbol.asyncIterator||\"@@asyncIterator\",toStringTagSymbol=$Symbol.toStringTag||\"@@toStringTag\";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key];}try{define({},\"\");}catch(err){define=function define(obj,key,value){return obj[key]=value;};}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,\"_invoke\",{value:makeInvokeMethod(innerFn,self,context)}),generator;}function tryCatch(fn,obj,arg){try{return{type:\"normal\",arg:fn.call(obj,arg)};}catch(err){return{type:\"throw\",arg:err};}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,function(){return this;});var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){[\"next\",\"throw\",\"return\"].forEach(function(method){define(prototype,method,function(arg){return this._invoke(method,arg);});});}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if(\"throw\"!==record.type){var result=record.arg,value=result.value;return value&&\"object\"==typeof value&&hasOwn.call(value,\"__await\")?PromiseImpl.resolve(value.__await).then(function(value){invoke(\"next\",value,resolve,reject);},function(err){invoke(\"throw\",err,resolve,reject);}):PromiseImpl.resolve(value).then(function(unwrapped){result.value=unwrapped,resolve(result);},function(error){return invoke(\"throw\",error,resolve,reject);});}reject(record.arg);}var previousPromise;defineProperty(this,\"_invoke\",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl(function(resolve,reject){invoke(method,arg,resolve,reject);});}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(innerFn,self,context){var state=\"suspendedStart\";return function(method,arg){if(\"executing\"===state)throw new Error(\"Generator is already running\");if(\"completed\"===state){if(\"throw\"===method)throw arg;return doneResult();}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult;}}if(\"next\"===context.method)context.sent=context._sent=context.arg;else if(\"throw\"===context.method){if(\"suspendedStart\"===state)throw state=\"completed\",context.arg;context.dispatchException(context.arg);}else\"return\"===context.method&&context.abrupt(\"return\",context.arg);state=\"executing\";var record=tryCatch(innerFn,self,context);if(\"normal\"===record.type){if(state=context.done?\"completed\":\"suspendedYield\",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done};}\"throw\"===record.type&&(state=\"completed\",context.method=\"throw\",context.arg=record.arg);}};}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(undefined===method)return context.delegate=null,\"throw\"===methodName&&delegate.iterator.return&&(context.method=\"return\",context.arg=undefined,maybeInvokeDelegate(delegate,context),\"throw\"===context.method)||\"return\"!==methodName&&(context.method=\"throw\",context.arg=new TypeError(\"The iterator does not provide a '\"+methodName+\"' method\")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if(\"throw\"===record.type)return context.method=\"throw\",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,\"return\"!==context.method&&(context.method=\"next\",context.arg=undefined),context.delegate=null,ContinueSentinel):info:(context.method=\"throw\",context.arg=new TypeError(\"iterator result is not an object\"),context.delegate=null,ContinueSentinel);}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry);}function resetTryEntry(entry){var record=entry.completion||{};record.type=\"normal\",delete record.arg,entry.completion=record;}function Context(tryLocsList){this.tryEntries=[{tryLoc:\"root\"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0);}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if(\"function\"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=undefined,next.done=!0,next;};return next.next=next;}}return{next:doneResult};}function doneResult(){return{value:undefined,done:!0};}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,\"constructor\",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,\"constructor\",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,\"GeneratorFunction\"),exports.isGeneratorFunction=function(genFun){var ctor=\"function\"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||\"GeneratorFunction\"===(ctor.displayName||ctor.name));},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,\"GeneratorFunction\")),genFun.prototype=Object.create(Gp),genFun;},exports.awrap=function(arg){return{__await:arg};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,function(){return this;}),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then(function(result){return result.done?result.value:iter.next();});},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,\"Generator\"),define(Gp,iteratorSymbol,function(){return this;}),define(Gp,\"toString\",function(){return\"[object Generator]\";}),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next;}return next.done=!0,next;};},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method=\"next\",this.arg=undefined,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)\"t\"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=undefined);},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if(\"throw\"===rootRecord.type)throw rootRecord.arg;return this.rval;},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type=\"throw\",record.arg=exception,context.next=loc,caught&&(context.method=\"next\",context.arg=undefined),!!caught;}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if(\"root\"===entry.tryLoc)return handle(\"end\");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,\"catchLoc\"),hasFinally=hasOwn.call(entry,\"finallyLoc\");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc);}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);}else{if(!hasFinally)throw new Error(\"try statement without catch or finally\");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc);}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,\"finallyLoc\")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break;}}finallyEntry&&(\"break\"===type||\"continue\"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method=\"next\",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record);},complete:function complete(record,afterLoc){if(\"throw\"===record.type)throw record.arg;return\"break\"===record.type||\"continue\"===record.type?this.next=record.arg:\"return\"===record.type?(this.rval=this.arg=record.arg,this.method=\"return\",this.next=\"end\"):\"normal\"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel;},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel;}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if(\"throw\"===record.type){var thrown=record.arg;resetTryEntry(entry);}return thrown;}}throw new Error(\"illegal catch attempt\");},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},\"next\"===this.method&&(this.arg=undefined),ContinueSentinel;}},exports;}import React,{useReducer,useEffect}from'react';import*as utils from'../../actions/group';import'./Group.css';import GroupList from'./GroupList';import GroupInfo from'./GroupInfo';function groupReducer(state,action){switch(action.type){case'setUser':{return _objectSpread(_objectSpread({},state),{},{user:action.user});}case'selectType':{if(state.reqType===action.value)return state;return _objectSpread(_objectSpread({},state),{},{reqType:action.value,isLoading:true,selectedGroup:null,inputName:''});}case'selectGroup':{var group=state.selectedGroup&&state.selectedGroup._id===action.group._id?null:action.group;var inputName=group?group.name:'';return _objectSpread(_objectSpread({},state),{},{selectedGroup:group,inputName:inputName});}case'clickGroup':{return _objectSpread(_objectSpread({},state),{},{isGroupClicked:true,clickedGroup:action.group});}case'inputName':{return _objectSpread(_objectSpread({},state),{},{inputName:action.value});}case'clickCreate':{if(state.selectedGroup&&state.selectedGroup.name!==state.inputName){return _objectSpread(_objectSpread({},state),{},{isSaving:true});}return _objectSpread(_objectSpread({},state),{},{isCreating:true});}case'reply':{return _objectSpread(_objectSpread({},state),{},{isReplying:true,reply:action.reply,repliedUser:action.user});}case'ban':{return _objectSpread(_objectSpread({},state),{},{isBanning:true,bannedUser:action.user});}case'finishLoading':{return _objectSpread(_objectSpread({},state),{},{isLoading:false,groups:action.groups});}case'finishClicking':{if(!action.ok)return _objectSpread(_objectSpread({},state),{},{isGroupClicked:false,clickedGroup:null});return _objectSpread(_objectSpread({},state),{},{isLoading:true,isGroupClicked:false,clickedGroup:null,selectedGroup:action.group});}case'finishSaving':{if(!action.ok)return _objectSpread(_objectSpread({},state),{},{isSaving:false});return _objectSpread(_objectSpread({},state),{},{isSaving:false,isLoading:true});}case'finishCreating':{if(!action.ok)return _objectSpread(_objectSpread({},state),{},{isCreating:false});return _objectSpread(_objectSpread({},state),{},{isCreating:false,isLoading:true,selectedGroup:action.group});}case'finishReplying':{if(!action.ok)return _objectSpread(_objectSpread({},state),{},{isReplying:false,reply:null,repliedUser:null});return _objectSpread(_objectSpread({},state),{},{isReplying:false,isLoading:true,reply:null,repliedUser:null,selectedGroup:action.group});}case'finishBanning':{if(!action.ok)return _objectSpread(_objectSpread({},state),{},{isBanning:false,bannedUser:null});return _objectSpread(_objectSpread({},state),{},{isLoading:true,isBanning:false,bannedUser:null,selectedGroup:action.group});}default:return state;}}var Group=function Group(){var initialState={isLoading:true,groups:null,user:null,isGroupClicked:false,clickedGroup:null,selectedGroup:null,isBanning:false,bannedUser:null,isReplying:false,repliedUser:null,isCreating:false,isSaving:false,reply:null,reqType:'',inputName:''};var _useReducer=useReducer(groupReducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];useEffect(function(){var setUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return utils.getUser();case 2:res=_context.sent;dispatch({type:'setUser',user:res.data});case 4:case\"end\":return _context.stop();}},_callee);}));return function setUser(){return _ref.apply(this,arguments);};}();setUser();},[]);useEffect(function(){var loadGroups=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var res;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return utils.getGroups(state.reqType);case 2:res=_context2.sent;dispatch({type:'finishLoading',isGroupClicked:false,clickedGroup:null,groups:res.data.response});case 4:case\"end\":return _context2.stop();}},_callee2);}));return function loadGroups(){return _ref2.apply(this,arguments);};}();if(state.isLoading)loadGroups();},[state.isLoading,state.reqType]);useEffect(function(){var saveGroup=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var res;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return utils.saveGroup(state.inputName,state.selectedGroup._id);case 2:res=_context3.sent;dispatch({type:'finishSaving',ok:res.data.ok,group:res.data.response});case 4:case\"end\":return _context3.stop();}},_callee3);}));return function saveGroup(){return _ref3.apply(this,arguments);};}();if(state.isSaving)saveGroup();},[state.isSaving,state.inputName,state.selectedGroup]);useEffect(function(){var createGroup=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){var res;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.next=2;return utils.createGroup(state.inputName);case 2:res=_context4.sent;dispatch({type:'finishCreating',ok:res.data.ok,group:res.data.response});case 4:case\"end\":return _context4.stop();}},_callee4);}));return function createGroup(){return _ref4.apply(this,arguments);};}();if(state.isCreating)createGroup();},[state.isCreating,state.inputName]);useEffect(function(){var reply=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(){var res,_res;return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:if(!state.reply){_context5.next=7;break;}_context5.next=3;return utils.acceptMember(state.selectedGroup._id,state.repliedUser._id);case 3:res=_context5.sent;return _context5.abrupt(\"return\",dispatch({type:'finishReplying',ok:res.data.ok,group:res.data.response}));case 7:_context5.next=9;return utils.rejectMember(state.selectedGroup._id,state.repliedUser._id);case 9:_res=_context5.sent;return _context5.abrupt(\"return\",dispatch({type:'finishReplying',ok:_res.data.ok,group:_res.data.response}));case 11:case\"end\":return _context5.stop();}},_callee5);}));return function reply(){return _ref5.apply(this,arguments);};}();if(state.isReplying)reply();},[state.isReplying,state.repliedUser,state.reply,state.selectedGroup]);useEffect(function(){var ban=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(){var res;return _regeneratorRuntime().wrap(function _callee6$(_context6){while(1)switch(_context6.prev=_context6.next){case 0:_context6.next=2;return utils.banMember(state.selectedGroup._id,state.bannedUser._id);case 2:res=_context6.sent;return _context6.abrupt(\"return\",dispatch({type:'finishBanning',ok:res.data.ok,group:res.data.response}));case 4:case\"end\":return _context6.stop();}},_callee6);}));return function ban(){return _ref6.apply(this,arguments);};}();if(state.isBanning)ban();},[state.isBanning,state.selectedGroup,state.bannedUser]);useEffect(function(){var interactGroup=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7(){var res,_res2,_res3;return _regeneratorRuntime().wrap(function _callee7$(_context7){while(1)switch(_context7.prev=_context7.next){case 0:if(!(state.reqType==='')){_context7.next=5;break;}_context7.next=3;return utils.joinGroup(state.clickedGroup._id);case 3:res=_context7.sent;return _context7.abrupt(\"return\",dispatch({type:'finishClicking',ok:res.data.ok,group:res.data.response}));case 5:if(!(state.reqType==='own')){_context7.next=10;break;}_context7.next=8;return utils.deleteGroup(state.clickedGroup._id);case 8:_res2=_context7.sent;return _context7.abrupt(\"return\",dispatch({type:'finishClicking',ok:_res2.data.ok,group:_res2.data.response}));case 10:if(!(state.reqType==='me')){_context7.next=15;break;}_context7.next=13;return utils.leaveGroup(state.clickedGroup._id);case 13:_res3=_context7.sent;return _context7.abrupt(\"return\",dispatch({type:'finishClicking',ok:_res3.data.ok,group:_res3.data.response}));case 15:case\"end\":return _context7.stop();}},_callee7);}));return function interactGroup(){return _ref7.apply(this,arguments);};}();if(state.isGroupClicked)interactGroup();},[state.isGroupClicked,state.clickedGroup,state.reqType]);return/*#__PURE__*/React.createElement(\"div\",{className:\"Group\"},/*#__PURE__*/React.createElement(GroupList,{active:!state.isLoading,groups:state.groups,selectedType:state.reqType,inputName:state.inputName,selectedGroup:state.selectedGroup,user:state.user,dispatch:dispatch}),/*#__PURE__*/React.createElement(GroupInfo,{active:!!state.selectedGroup&&!state.isLoading,group:state.selectedGroup,isOwner:state.reqType==='own',dispatch:dispatch}));};export default Group;","map":{"version":3,"names":["React","useReducer","useEffect","utils","GroupList","GroupInfo","groupReducer","state","action","type","user","reqType","value","isLoading","selectedGroup","inputName","group","_id","name","isGroupClicked","clickedGroup","isSaving","isCreating","isReplying","reply","repliedUser","isBanning","bannedUser","groups","ok","Group","initialState","dispatch","setUser","getUser","res","data","loadGroups","getGroups","response","saveGroup","createGroup","acceptMember","rejectMember","ban","banMember","interactGroup","joinGroup","deleteGroup","leaveGroup"],"sources":["/home/spencer/Personal/Bibtex-web-database-master/client/src/components/group/Group.js"],"sourcesContent":["import React, { useReducer, useEffect } from 'react';\nimport * as utils from '../../actions/group';\nimport './Group.css';\nimport GroupList from './GroupList';\nimport GroupInfo from './GroupInfo';\n\nfunction groupReducer(state, action) {\n  switch (action.type) {\n    case 'setUser': {\n      return {\n        ...state,\n        user: action.user,\n      };\n    }\n    case 'selectType': {\n      if (state.reqType === action.value) return state;\n      return {\n        ...state,\n        reqType: action.value,\n        isLoading: true,\n        selectedGroup: null,\n        inputName: '',\n      };\n    }\n    case 'selectGroup': {\n      const group =\n        state.selectedGroup && state.selectedGroup._id === action.group._id\n          ? null\n          : action.group;\n      const inputName = group ? group.name : '';\n      return {\n        ...state,\n        selectedGroup: group,\n        inputName,\n      };\n    }\n    case 'clickGroup': {\n      return {\n        ...state,\n        isGroupClicked: true,\n        clickedGroup: action.group,\n      };\n    }\n    case 'inputName': {\n      return { ...state, inputName: action.value };\n    }\n    case 'clickCreate': {\n      if (state.selectedGroup && state.selectedGroup.name !== state.inputName) {\n        return { ...state, isSaving: true };\n      }\n      return { ...state, isCreating: true };\n    }\n    case 'reply': {\n      return {\n        ...state,\n        isReplying: true,\n        reply: action.reply,\n        repliedUser: action.user,\n      };\n    }\n    case 'ban': {\n      return {\n        ...state,\n        isBanning: true,\n        bannedUser: action.user,\n      };\n    }\n    case 'finishLoading': {\n      return {\n        ...state,\n        isLoading: false,\n        groups: action.groups,\n      };\n    }\n    case 'finishClicking': {\n      if (!action.ok)\n        return {\n          ...state,\n          isGroupClicked: false,\n          clickedGroup: null,\n        };\n      return {\n        ...state,\n        isLoading: true,\n        isGroupClicked: false,\n        clickedGroup: null,\n        selectedGroup: action.group,\n      };\n    }\n    case 'finishSaving': {\n      if (!action.ok)\n        return {\n          ...state,\n          isSaving: false,\n        };\n      return {\n        ...state,\n        isSaving: false,\n        isLoading: true,\n      };\n    }\n    case 'finishCreating': {\n      if (!action.ok)\n        return {\n          ...state,\n          isCreating: false,\n        };\n      return {\n        ...state,\n        isCreating: false,\n        isLoading: true,\n        selectedGroup: action.group,\n      };\n    }\n    case 'finishReplying': {\n      if (!action.ok)\n        return {\n          ...state,\n          isReplying: false,\n          reply: null,\n          repliedUser: null,\n        };\n      return {\n        ...state,\n        isReplying: false,\n        isLoading: true,\n        reply: null,\n        repliedUser: null,\n        selectedGroup: action.group,\n      };\n    }\n    case 'finishBanning': {\n      if (!action.ok)\n        return {\n          ...state,\n          isBanning: false,\n          bannedUser: null,\n        };\n      return {\n        ...state,\n        isLoading: true,\n        isBanning: false,\n        bannedUser: null,\n        selectedGroup: action.group,\n      };\n    }\n    default:\n      return state;\n  }\n}\n\nconst Group = () => {\n  const initialState = {\n    isLoading: true,\n    groups: null,\n    user: null,\n    isGroupClicked: false,\n    clickedGroup: null,\n    selectedGroup: null,\n    isBanning: false,\n    bannedUser: null,\n    isReplying: false,\n    repliedUser: null,\n    isCreating: false,\n    isSaving: false,\n    reply: null,\n    reqType: '',\n    inputName: '',\n  };\n\n  const [state, dispatch] = useReducer(groupReducer, initialState);\n\n  useEffect(() => {\n    const setUser = async () => {\n      const res = await utils.getUser();\n      dispatch({\n        type: 'setUser',\n        user: res.data,\n      });\n    };\n    setUser();\n  }, []);\n  useEffect(() => {\n    const loadGroups = async () => {\n      const res = await utils.getGroups(state.reqType);\n      dispatch({\n        type: 'finishLoading',\n        isGroupClicked: false,\n        clickedGroup: null,\n        groups: res.data.response,\n      });\n    };\n    if (state.isLoading) loadGroups();\n  }, [state.isLoading, state.reqType]);\n  useEffect(() => {\n    const saveGroup = async () => {\n      const res = await utils.saveGroup(\n        state.inputName,\n        state.selectedGroup._id\n      );\n      dispatch({\n        type: 'finishSaving',\n        ok: res.data.ok,\n        group: res.data.response,\n      });\n    };\n    if (state.isSaving) saveGroup();\n  }, [state.isSaving, state.inputName, state.selectedGroup]);\n  useEffect(() => {\n    const createGroup = async () => {\n      const res = await utils.createGroup(state.inputName);\n      dispatch({\n        type: 'finishCreating',\n        ok: res.data.ok,\n        group: res.data.response,\n      });\n    };\n    if (state.isCreating) createGroup();\n  }, [state.isCreating, state.inputName]);\n  useEffect(() => {\n    const reply = async () => {\n      if (state.reply) {\n        const res = await utils.acceptMember(\n          state.selectedGroup._id,\n          state.repliedUser._id\n        );\n        return dispatch({\n          type: 'finishReplying',\n          ok: res.data.ok,\n          group: res.data.response,\n        });\n      } else {\n        const res = await utils.rejectMember(\n          state.selectedGroup._id,\n          state.repliedUser._id\n        );\n        return dispatch({\n          type: 'finishReplying',\n          ok: res.data.ok,\n          group: res.data.response,\n        });\n      }\n    };\n    if (state.isReplying) reply();\n  }, [state.isReplying, state.repliedUser, state.reply, state.selectedGroup]);\n  useEffect(() => {\n    const ban = async () => {\n      const res = await utils.banMember(\n        state.selectedGroup._id,\n        state.bannedUser._id\n      );\n      return dispatch({\n        type: 'finishBanning',\n        ok: res.data.ok,\n        group: res.data.response,\n      });\n    };\n    if (state.isBanning) ban();\n  }, [state.isBanning, state.selectedGroup, state.bannedUser]);\n  useEffect(() => {\n    const interactGroup = async () => {\n      if (state.reqType === '') {\n        const res = await utils.joinGroup(state.clickedGroup._id);\n        return dispatch({\n          type: 'finishClicking',\n          ok: res.data.ok,\n          group: res.data.response,\n        });\n      }\n      if (state.reqType === 'own') {\n        const res = await utils.deleteGroup(state.clickedGroup._id);\n        return dispatch({\n          type: 'finishClicking',\n          ok: res.data.ok,\n          group: res.data.response,\n        });\n      }\n      if (state.reqType === 'me') {\n        const res = await utils.leaveGroup(state.clickedGroup._id);\n        return dispatch({\n          type: 'finishClicking',\n          ok: res.data.ok,\n          group: res.data.response,\n        });\n      }\n    };\n    if (state.isGroupClicked) interactGroup();\n  }, [state.isGroupClicked, state.clickedGroup, state.reqType]);\n\n  return (\n    <div className='Group'>\n      <GroupList\n        active={!state.isLoading}\n        groups={state.groups}\n        selectedType={state.reqType}\n        inputName={state.inputName}\n        selectedGroup={state.selectedGroup}\n        user={state.user}\n        dispatch={dispatch}\n      />\n      <GroupInfo\n        active={!!state.selectedGroup && !state.isLoading}\n        group={state.selectedGroup}\n        isOwner={state.reqType === 'own'}\n        dispatch={dispatch}\n      />\n    </div>\n  );\n};\n\nexport default Group;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}