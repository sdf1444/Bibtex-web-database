{"version":3,"sources":["components/layout/spinner.gif","actions/alert.js","actions/types.js","utils/setAuthToken.js","actions/auth.js","components/layout/Navbar.js","components/layout/Homepage.js","components/auth/Login.js","utils/entryFields.js","components/passwordReset/styles/mixins.js","components/passwordReset/styles/styledComponents.js","components/passwordReset/RecoverPassword.js","components/passwordReset/UpdatePassword.js","components/layout/Spinner.js","components/welcome/Welcome.js","components/admin/UserTableRow.js","actions/editor.js","components/admin/Admin.js","components/admin/CreateUser.js","actions/useredit.js","components/admin/EditUser.js","components/editor/File.js","components/editor/FileList.js","actions/bibtex.js","components/editor/Entry.js","components/editor/EntryList.js","components/editor/InfoList.js","components/editor/EditWindow.js","components/editor/Editor.js","actions/paper.js","components/paper/PaperTableRow.js","components/paper/ExtractWindow.js","components/paper/Paper.js","components/publicDatabases/publicDatabases.js","components/layout/Alert.js","components/routing/PrivateRoute.js","reducers/alert.js","reducers/auth.js","reducers/index.js","store.js","actions/group.js","components/group/GroupBox.js","components/group/GroupList.js","components/group/GroupUser.js","components/group/GroupRequest.js","components/group/GroupInfo.js","components/group/Group.js","App.js","index.js"],"names":["module","exports","setAlert","msg","alertType","timeout","dispatch","id","uuidv4","type","payload","setTimeout","setAuthToken","token","axios","defaults","headers","common","i","loadUser","localStorage","get","res","data","response","connect","state","auth","logout","isAuthenticated","loading","role","console","log","authLinks","to","onClick","href","className","login","username","password","config","post","error","reason","useState","formData","setFormData","onChange","e","target","name","value","onSubmit","preventDefault","placeholder","breakpoints","desktop","tablet","phone","validationErrorMixin","Object","keys","reduce","acc","label","css","flexCenterMixin","GhostInput","props","theme","primary","boxShadow","styled","div","input","white","inputTextColor","inputBorderColor","Button","form","button","width","primaryHover","tertiary","tertiaryHover","primaryLight","primaryDark","lightGray","offWhite","midGray","darkGray","secondaryDark","secondary","RecoverPasswordStyles","RecoverPassword","email","submitted","handleChange","setState","sendPasswordResetEmail","this","Component","UpdatePassword","confirmPassword","key","updatePassword","alert","put","match","params","then","catch","err","warn","style","paddingBottom","minLength","fontSize","maxWidth","paddingLeft","rel","src","spinner","margin","display","alt","user","useEffect","Spinner","UserTableRow","_id","variant","requiredEntryFields","article","book","booklet","conference","inBook","inCollection","inProceedings","manual","mastersThesis","misc","online","phdThesis","proceedings","extraEntryFields","entries","push","entryFields","forEach","required","extra","typeChange","ARTICLE","BOOK","BOOKLET","CONFERENCE","INBOOK","INCOLLECTION","INPROCEEDINGS","MANUAL","MASTERSTHESIS","MISC","ONLINE","PHDTHESIS","PROCEEDINGS","getGroups","getUser","getDatabases","changeName","newName","databaseId","bibtexdatabasename","createDatabase","group","deleteDatabase","delete","addEntry","entry","changeEntry","entryId","deleteEntry","uploadDatabase","bibtexFile","bibtexJSON","bibtexParse","toJSON","ok","entryType","entryTags","tag","includes","toLowerCase","contains","database","compareEntries","entryList1","entryList2","length","citationKey","compareFileLists","fileList1","fileList2","adminReducer","action","currentUser","isFetchingUser","isDeleting","deletedUser","search","searchParam","isLoading","users","searchParams","text","Admin","useReducer","fetchCurrentUser","deleteUser","dataTable","filter","map","Menu","compact","Dropdown","options","simple","item","Table","striped","bordered","hover","register","body","JSON","stringify","errors","password2","unique","updateUser","userObj","result","updateFields","fields","message","success","Promise","all","editUserDispater","messages","clearing","isSaving","EditUser","saveUser","userObject","autoComplete","Group","controlId","Label","Control","as","aria-autocomplete","size","block","File","info","file","d","Date","updatedAt","isSelected","toLocaleDateString","toLocaleTimeString","FileList","active","fileList","btnText","listDivs","isAllowed","owner","selectedFile","uploading","htmlFor","files","groups","isSelectedAllowed","inputName","convertRefs","refs","finalString","ref","strings","convertLastLine","convertMiddleLine","str","convertRef","xmlToBib","xmlText","title","xml","DOMParser","parseFromString","biblStruct","querySelector","Array","from","querySelectorAll","find","titleElem","getAttribute","innerHTML","authors","elem","authorString","children","node","trim","author","join","journal","year","Entry","entryClass","isChosen","isNew","isDisabled","EntryList","chosen","document","scrollIntoView","behavior","arr","split","typeString","startsWith","parseSearch","entryList","val","values","matches","bibtexString","selectedEntry","newEntryDiv","newEntry","download","InfoList","infoList","data-tag","entryChanges","readOnly","EditWindow","spellCheck","editorReducer","selectedGroup","uploadedFile","inputSearch","errorMessage","slice","isDeletingFile","isUploadingFile","isSavingFile","isCreatingFile","isDeletingEntry","isCreatingEntry","isSavingEntry","windowOpened","Editor","isErrorAppearing","useRef","check","utils","fetchUser","checkFiles","clearInterval","current","setInterval","fetchFiles","deleteFile","createFile","uploadFile","fileReader","FileReader","readAsText","onload","onerror","createEntry","saveEntry","clearTimeout","fileActive","entryActive","infoActive","bottom","opacity","extractDatabase","getFiles","saveFile","changeProgress","FormData","append","onUploadProgress","progressEvent","totalLength","lengthComputable","total","getResponseHeader","Math","round","loaded","extractFile","fileId","fetch","blob","method","Accept","status","bibBlob","extractHeader","bibtex","readUploadedFileAsText","inputFile","temporaryFileReader","resolve","reject","abort","DOMException","extractAndUploadBibtex","databaseName","extractAndUploadHeader","PaperTableRow","paper","uploadDate","filename","url","ExtractWindow","groupOptions","databases","option","disabled","selected","inputValue","windowMessage","paperReducer","isExtracting","progress","searchName","deletedFile","extractedFile","papers","selectedMethod","selectedCitationKey","Paper","setDatabases","setGroups","loadFiles","promises","window","URL","createObjectURL","n","extractBibtex","reverse","uploadText","PublicDatabases","alerts","component","roles","rest","render","initialState","getItem","combineReducers","setItem","removeItem","middleware","thunk","store","createStore","rootReducer","composeWithDevTools","applyMiddleware","deleteGroup","groupId","leaveGroup","joinGroup","createGroup","saveGroup","acceptMember","userId","rejectMember","banMember","GroupBox","btnName","btnClass","isRequested","groupType","joinRequests","classList","GroupList","selectedType","GroupUser","isOwner","GroupRequest","reply","GroupInfo","requests","groupReducer","reqType","isGroupClicked","clickedGroup","isCreating","isReplying","repliedUser","isBanning","bannedUser","setUser","loadGroups","ban","interactGroup","App","exact","path","Home","Login","Welcome","CreateUser","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.607ee6a7.chunk.js","sourcesContent":["module.exports = \"data:image/gif;base64,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\"","import { v4 as uuidv4 } from 'uuid';\nimport { SET_ALERT, REMOVE_ALERT } from './types';\n\nexport const setAlert = (msg, alertType, timeout = 5000) => (dispatch) => {\n  const id = uuidv4();\n  dispatch({\n    type: SET_ALERT,\n    payload: { msg, alertType, id },\n  });\n\n  setTimeout(() => dispatch({ type: REMOVE_ALERT, payload: id }), timeout);\n};\n","export const SET_ALERT = 'SET_ALERT';\nexport const REMOVE_ALERT = 'REMOVE_ALERT';\nexport const REGISTER_SUCCESS = 'REGISTER_SUCCESS';\nexport const REGISTER_FAIL = 'REGISTER_FAIL';\nexport const USER_LOADED = 'USER_LOADED';\nexport const AUTH_ERROR = 'AUTH_ERROR';\nexport const LOGIN_SUCCESS = 'LOGIN_SUCCESS';\nexport const LOGIN_FAIL = 'LOGIN_FAIL';\nexport const LOGOUT = 'LOGOUT';\nexport const GET_USER = 'GET_USER';\nexport const USER_ERROR = 'USER_ERROR';\n","import axios from 'axios';\n\nconst setAuthToken = (token) => {\n  if (token) {\n    axios.defaults.headers.common['x-auth-token'] = token;\n  } else {\n    delete axios.defaults.headers.common['x-auth-token'];\n  }\n};\n\nexport default setAuthToken;\n","import { push } from 'connected-react-router';\nimport axios from 'axios';\nimport { setAlert } from './alert';\nimport {\n  REGISTER_SUCCESS,\n  REGISTER_FAIL,\n  USER_LOADED,\n  AUTH_ERROR,\n  LOGIN_SUCCESS,\n  LOGIN_FAIL,\n  LOGOUT,\n} from './types';\nimport setAuthToken from '../utils/setAuthToken';\n\n// Load User\nexport const loadUser = () => async (dispatch) => {\n  if (localStorage.token) {\n    setAuthToken(localStorage.token);\n  }\n\n  try {\n    const res = await axios.get('/api/auth');\n\n    dispatch({\n      type: USER_LOADED,\n      payload: res.data.response,\n    });\n  } catch (err) {\n    dispatch({\n      type: AUTH_ERROR,\n    });\n  }\n};\n\n// Register User\nexport const register = ({ name, email, role, username, password }) => async (\n  dispatch\n) => {\n  const config = {\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  };\n\n  const body = JSON.stringify({ name, email, role, username, password });\n\n  try {\n    const res = await axios.post('/api/user/register-user', body, config);\n    console.log('HERE');\n    dispatch({\n      type: REGISTER_SUCCESS,\n      payload: res.data,\n    });\n    dispatch(setAlert('User created', 'success'));\n  } catch (err) {\n    const errors = err.response.data.errors;\n\n    if (errors) {\n      dispatch({\n        type: REGISTER_FAIL,\n      });\n      errors.forEach((error) => dispatch(setAlert(error.msg, 'danger')));\n    }\n  }\n};\n\n// Login User\nexport const login = (username, password) => async (dispatch) => {\n  const config = {\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  };\n\n  try {\n    const res = await axios.post('/api/auth', { username, password }, config);\n    dispatch({\n      type: LOGIN_SUCCESS,\n      payload: res.data.response,\n    });\n\n    dispatch(loadUser());\n  } catch (err) {\n    const error = err.response.data.error;\n\n    if (error) {\n      dispatch(setAlert(error.reason, 'danger'));\n    }\n\n    dispatch({\n      type: LOGIN_FAIL,\n    });\n  }\n};\n\n// Logout / Clear editor\nexport const logout = () => (dispatch) => {\n  dispatch({ type: LOGOUT });\n};\n","import React, { Fragment } from 'react';\nimport { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { PropTypes } from 'prop-types';\nimport { logout } from '../../actions/auth';\n\nconst Navbar = ({ auth: { isAuthenticated, loading, role }, logout }) => {\n  console.log(role);\n  const authLinks = (\n    <ul>\n      {(() => {\n        if (role !== 'user') {\n          return (\n            <li>\n              <Link to='/admin'>Admin</Link>\n            </li>\n          );\n        }\n      })()}\n      <li>\n        <Link to='/editor'>Editor</Link>\n      </li>\n      <li>\n        <Link to='/papers'>Papers</Link>\n      </li>\n      <li>\n        <Link to='/publicDatabases'>Databases</Link>\n      </li>\n      <li>\n        <Link to='/groups'>Groups</Link>\n      </li>\n      <li>\n        <a onClick={logout} href='#!'>\n          <i className='fas fa-sign-out-alt'></i>{' '}\n          <span className='hide-sm'></span>Logout\n        </a>\n      </li>\n    </ul>\n  );\n\n  return (\n    <nav className='navbar bg-dark'>\n      <h1>\n        <Link to='/'>\n          <i className='fas fa-code' /> Bibtex\n        </Link>\n      </h1>\n      {!loading && <Fragment>{isAuthenticated ? authLinks : null}</Fragment>}\n    </nav>\n  );\n};\n\nNavbar.propTypes = {\n  logout: PropTypes.func.isRequired,\n  auth: PropTypes.object.isRequired,\n};\n\nconst mapStateToProps = (state) => ({\n  auth: state.auth,\n});\n\nexport default connect(mapStateToProps, { logout })(Navbar);\n","import React from 'react';\nimport { Link, Redirect } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\n\nconst Homepage = ({ isAuthenticated }) => {\n  if (isAuthenticated) {\n    return <Redirect to='/welcome' />;\n  }\n\n  return (\n    <div>\n      <section className='landing'>\n        <div className='dark-overlay'>\n          <div className='landing-inner'>\n            <h1 className='x-large'>Bibtex</h1>\n            <p className='lead'>Online editor for bibtex references</p>\n            <div className='buttons centered'>\n              <Link to='/login' className='btn btn-light'>\n                Login\n              </Link>\n            </div>\n          </div>\n        </div>\n      </section>\n    </div>\n  );\n};\n\nHomepage.propTypes = {\n  isAuthenticated: PropTypes.bool,\n};\n\nconst mapStateToProps = (state) => ({\n  isAuthenticated: state.auth.isAuthenticated,\n});\n\nexport default connect(mapStateToProps)(Homepage);\n","import React, { Fragment, useState } from 'react';\nimport { Link, Redirect } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { login } from '../../actions/auth';\n\nconst Login = ({ login, isAuthenticated }) => {\n  const [formData, setFormData] = useState({\n    username: '',\n    password: '',\n  });\n\n  const { username, password } = formData;\n\n  const onChange = (e) =>\n    setFormData({ ...formData, [e.target.name]: e.target.value });\n\n  const onSubmit = async (e) => {\n    e.preventDefault();\n    login(username, password);\n  };\n\n  if (isAuthenticated) {\n    return <Redirect to='/welcome' />;\n  }\n\n  return (\n    <Fragment>\n      <h1 className='large text-primary'>Sign In</h1>\n      <p className='lead'>\n        <i className='fas fa-user' /> Sign Into Your Account\n      </p>\n      <form className='form' onSubmit={onSubmit}>\n        <div className='form-group'>\n          <input\n            type='username'\n            placeholder='Username'\n            name='username'\n            value={username}\n            onChange={onChange}\n          />\n        </div>\n        <div className='form-group'>\n          <input\n            type='password'\n            placeholder='Password'\n            name='password'\n            value={password}\n            onChange={onChange}\n          />\n        </div>\n        <input type='submit' className='btn btn-primary' value='Login' />\n      </form>\n      <Link to='/recoverPassword'>Forgot your password?</Link>\n      <p className='my-1'>Use username: 'demo' password: 'demo123' to login</p>\n      {/* <p className='my-1'>Don't have an account? Please contact admin.</p> */}\n    </Fragment>\n  );\n};\n\nLogin.propTypes = {\n  login: PropTypes.func.isRequired,\n  isAuthenticated: PropTypes.bool,\n};\n\nconst mapStateToProps = (state) => ({\n  isAuthenticated: state.auth.isAuthenticated,\n});\n\nexport default connect(mapStateToProps, { login })(Login);\n","const requiredEntryFields = {\n  article: ['journal'],\n  book: ['publisher'],\n  booklet: [],\n  conference: ['booktitle'],\n  inBook: ['chapter', 'publisher'],\n  inCollection: ['booktitle', 'publisher'],\n  inProceedings: ['booktitle'],\n  manual: [],\n  mastersThesis: [],\n  misc: [],\n  online: [],\n  phdThesis: ['school'],\n  proceedings: [],\n};\n\nconst extraEntryFields = {\n  article: ['number', 'pages', 'volume', 'month', 'doi', 'annotation'],\n  book: [\n    'series',\n    'address',\n    'edition',\n    'volume',\n    'month',\n    'doi',\n    'annotation',\n  ],\n  booklet: ['howpublished', 'address', 'month', 'doi', 'annotation'],\n  conference: [\n    'editor',\n    'volume',\n    'series',\n    'pages',\n    'address',\n    'organisation',\n    'publisher',\n    'month',\n    'doi',\n    'annotation',\n  ],\n  inBook: [\n    'volime',\n    'series',\n    'type',\n    'address',\n    'edition',\n    'month',\n    'doi',\n    'annotation',\n  ],\n  inCollection: [\n    'editor',\n    'volume',\n    'series',\n    'type',\n    'address',\n    'chapter',\n    'pages',\n    'edition',\n    'organization',\n    'month',\n    'doi',\n    'annotation',\n  ],\n  inProceedings: [\n    'editor',\n    'volume',\n    'series',\n    'pages',\n    'address',\n    'organization',\n    'publisher',\n    'month',\n    'doi',\n    'annotation',\n  ],\n  manual: ['organization', 'address', 'edititon', 'month', 'doi', 'annotation'],\n  mastersThesis: ['school', 'type', 'address', 'month', 'doi', 'annotation'],\n  misc: ['howpublished', 'month', 'doi', 'annotation'],\n  online: ['url', 'month', 'annotation'],\n  phdThesis: ['type', 'address', 'month', 'doi', 'annotation'],\n  proceedings: [\n    'editor',\n    'volume',\n    'series',\n    'address',\n    'publisher',\n    'organization',\n    'month',\n    'doi',\n    'annotation',\n  ],\n};\n\nfor (let [key, value] of Object.entries(requiredEntryFields)) {\n  requiredEntryFields[key].push('author');\n  requiredEntryFields[key].push('title');\n  requiredEntryFields[key].push('year');\n}\n\nconst entryFields = {};\nObject.keys(requiredEntryFields).forEach((key) => {\n  entryFields[key] = {\n    required: requiredEntryFields[key],\n    extra: extraEntryFields[key],\n  };\n});\n\nexport default entryFields;\n","import { css } from \"styled-components\"\n\n// MEDIA TEMPLATES\nconst breakpoints = {\n  desktop: 1024,\n  tablet: 768,\n  phone: 576\n}\n\nconst minBreakpoints = {\n  tablet: 577,\n  desktop: 769\n}\n\n/* You can use the media export in a styled-component like so:\n *   ${media.desktop`display: flex;`}\n *   ${media.tablet`display: inline-block;`}\n *   ${media.phone`display: none;`} */\nexport const media = Object.keys(breakpoints).reduce((acc, label) => {\n  acc[label] = (...args) => css`\n    @media (max-width: ${breakpoints[label] / 16}em) {\n      ${css(...args)};\n    }\n  `\n  return acc\n}, {})\n\nexport const minMedia = Object.keys(minBreakpoints).reduce((acc, label) => {\n  acc[label] = (...args) => css`\n    @media (min-width: ${breakpoints[label] / 16}em) {\n      ${css(...args)};\n    }\n  `\n  return acc\n}, {})\n\n// This mixin only works if you put the .error div *before* the input,\n// as the .error div selects its next sibling to apply border colors\nexport const validationErrorMixin = css`\n  .error + input {\n    /* Color input red when adjacent to an error: */\n    border: 1px solid #cea0a5;\n  }\n`\n\nexport const authFormErrorsMixin = css`\n  .form-field {\n    ${validationErrorMixin};\n    /* Mixin overrides: */\n    .error {\n      display: block;\n      padding: 5px 8px;\n      height: 30px;\n      background: #ffdce0;\n      border-radius: 3px;\n      border: 1px solid #cea0a5;\n      color: #86181d;\n      font-size: 0.75rem;\n      z-index: 10;\n    }\n    .client-error {\n      margin: 35px 0 0 5px;\n      position: absolute;\n    }\n    .client-error:after,\n    .client-error:before {\n      bottom: 100%;\n      left: 15%;\n      border: solid transparent;\n      content: \"\";\n      height: 0;\n      width: 0;\n      position: absolute;\n      pointer-events: none;\n    }\n\n    .client-error:after {\n      border-color: rgba(255, 220, 224, 0);\n      border-bottom-color: #ffdce0;\n      border-width: 6px;\n      margin-left: -6px;\n    }\n    .client-error:before {\n      border-color: rgba(206, 160, 165, 0);\n      border-bottom-color: #cea0a5;\n      border-width: 7px;\n      margin-left: -7px;\n    }\n    .server-error {\n      margin-top: 16px;\n    }\n  }\n  .spinner {\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    padding: 10px;\n  }\n`\n\n// General styles that you can spread around:\nexport const flexCenterMixin = css`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`\n\nexport const boxShadowMixin = css`\n  box-shadow: 0 0 0.625rem 0 rgba(0, 0, 0, 0.1);\n`\n\nexport const modalBlur = css`\n  filter: blur(1px);\n`\n\n// Wrote these in anticipation of a card component\nexport const card = css`\n  background: ${props => props.theme.primary};\n  box-shadow: ${props => props.theme.boxShadow};\n`\n\nexport const fontDeclarations = css`\n  @font-face {\n    font-family: \"Wals\";\n    src: local(\"Wals Regular\"), local(\"Wals-Regular\"),\n      url(\"/fonts/Wals-Regular.otf\") format(\"opentype\");\n    font-weight: 400;\n    font-style: normal;\n    font-display: fallback;\n  }\n  @font-face {\n    font-family: \"Wals\";\n    src: local(\"Wals Regular Oblique\"), local(\"Wals-Regular-Oblique\"),\n      url(\"/fonts/Wals-Regular-Oblique.otf\") format(\"opentype\");\n    font-weight: 400;\n    font-style: italic;\n    font-display: fallback;\n  }\n  @font-face {\n    font-family: \"Wals\";\n    src: local(\"Wals Light\"), local(\"Wals-Light\"),\n      url(\"/fonts/Wals-Light.otf\") format(\"opentype\");\n    font-weight: 300;\n    font-style: normal;\n    font-display: fallback;\n  }\n  @font-face {\n    font-family: \"Wals\";\n    src: local(\"Wals Light Oblique\"), local(\"Wals-Light-Oblique\"),\n      url(\"/fonts/Wals-Light-Oblique.otf\") format(\"opentype\");\n    font-weight: 300;\n    font-style: italic;\n    font-display: fallback;\n  }\n  @font-face {\n    font-family: \"Wals\";\n    src: local(\"Wals Medium\"), local(\"Wals-Medium\"),\n      url(\"/fonts/Wals-Medium.otf\") format(\"opentype\");\n    font-weight: 500;\n    font-style: normal;\n    font-display: fallback;\n  }\n  @font-face {\n    font-family: \"Wals\";\n    src: local(\"Wals Medium Oblique\"), local(\"Wals-Medium-Oblique\"),\n      url(\"/fonts/Wals-Medium-Oblique.otf\") format(\"opentype\");\n    font-weight: 500;\n    font-style: italic;\n    font-display: fallback;\n  }\n`\n\nexport const fontMixin = css`\n  html * {\n    font-family: Wals, sans-serif;\n    /* @SET: 1rem === 16px */\n    font-size: 16px;\n    text-rendering: optimizeLegibility;\n    -webkit-font-smoothing: antialiased;\n  }\n\n  h1 {\n    font-size: 3rem;\n    font-weight: 400;\n    color: ${props => props.theme.primary};\n  }\n\n  h2 {\n    font-size: 2.75rem;\n    font-weight: 500;\n  }\n\n  h3 {\n    font-size: 2.5rem;\n    letter-spacing: 0.01875rem;\n  }\n\n  h4 {\n    font-family: Wals, sans-serif;\n    font-weight: 500;\n    font-size: 1.75rem;\n    margin-bottom: 16px;\n  }\n`\n","import styled from \"styled-components\"\n\nimport { flexCenterMixin } from \"./mixins\"\n\nexport const Card = styled.div`\n  ${flexCenterMixin};\n`\n\nexport const Label = styled.label`\n  color: ${props => props.theme.primary};\n  font-weight: 500;\n  text-transform: capitalize;\n`\n\nexport const Input = styled.input`\n  background-color: ${props => props.theme.white};\n  color: ${props => props.theme.inputTextColor};\n  border: ${props => `1px ${props.theme.inputBorderColor} solid`};\n  padding: 0.5rem 1rem 0.43rem;\n  border-radius: 0.375rem;\n\n  &:focus {\n    outline: none;\n    border-color: ${props => props.theme.primary};\n    box-shadow: ${props => `0 0 0 1px ${props.theme.primary}`};\n  }\n`\n\nexport const GhostInput = styled.input`\n  padding: 0.5rem 1rem 0.43rem;\n  border-radius: 0.375rem;\n  border: ${props => `1px ${props.theme.inputBorderColor} solid`};\n  font-size: 1rem;\n`\n\nexport const Form = styled.form`\n  width: 100%;\n  padding: 30px 20px 20px 20px;\n  border-radius: 5px;\n  background: rgba(255, 255, 255, 0.75);\n  box-shadow: 0 0.3125rem 0.0625rem 0 rgba(0, 0, 0, 0.05),\n    0 0 0 0.0625rem rgba(0, 0, 0, 0.03), 0 0.0625rem 0 0 rgba(0, 0, 0, 0.05),\n    0 0.0625rem 0.1875rem 0 rgba(0, 0, 0, 0.01);\n\n  input {\n    width: 100%;\n    margin-bottom: 20px;\n    background: white;\n  }\n\n  button {\n    width: 100%;\n  }\n\n  .text-align-right {\n    text-align: right;\n    button {\n      width: unset;\n      padding-left: 3.5rem;\n      padding-right: 3.5rem;\n    }\n  }\n`\n\nexport const Button = styled.button`\n  color: white;\n  border-radius: 5px;\n  margin-top: 8px;\n  padding: 6px 12px;\n  font-weight: 500;\n  width: ${props => props.width};\n\n  /* Button & btn-primary */\n  will-change: background-color, border-color, color;\n  -webkit-transition: background-color 0.15s ease, border-color 0.15s ease,\n    color 0.15s ease;\n  transition: background-color 0.15s ease, border-color 0.15s ease,\n    color 0.15s ease;\n  background-color: ${props => props.theme.primary};\n  border-color: ${props => props.theme.primary};\n  &:hover,\n  &:focus {\n    background-color: ${props => props.theme.primaryHover};\n    border-color: ${props => props.theme.primaryHover};\n  }\n\n  /* Styles for Link/anchor elements that might be children of Button */\n  a {\n    color: ${props => props.theme.white};\n    &:hover {\n      color: ${props => props.theme.white};\n    }\n  }\n\n  &.btn-primary {\n    border: 0;\n  }\n\n  &.btn-tertiary {\n    background-color: ${props => props.theme.tertiary};\n    border-color: ${props => props.theme.tertiary};\n    color: ${props => props.theme.white};\n    box-shadow: 0 0 15px 0 rgba(0, 0, 0, 0.15);\n    border-radius: 6px;\n    &:hover,\n    &:focus {\n      background-color: ${props => props.theme.tertiaryHover};\n      border-color: ${props => props.theme.tertiaryHover};\n      color: ${props => props.theme.white};\n    }\n  }\n\n  &.btn-light {\n    background-color: ${props => props.theme.primaryLight};\n    border-color: ${props => props.theme.primaryLight};\n    &:hover,\n    &:focus {\n      background-color: ${props => props.theme.primaryDark};\n      border-color: ${props => props.theme.primaryDark};\n    }\n  }\n\n  &.btn-gray {\n    background-color: ${props => props.theme.lightGray};\n    border-color: ${props => props.theme.lightGray};\n  }\n\n  &.btn-neutral {\n    background-color: ${props => props.theme.offWhite};\n    border-color: ${props => props.theme.offWhite};\n    color: ${props => props.theme.midGray};\n\n    &:hover,\n    &:focus {\n      background-color: ${props => props.theme.lightGray};\n      border-color: ${props => props.theme.lightGray};\n      color: ${props => props.theme.darkGray};\n    }\n  }\n\n  &.btn-inverted {\n    color: ${props => props.theme.white};\n    /* target anchors for when we nest Links inside buttons */\n    & a {\n      color: ${props => props.theme.white};\n    }\n    background-color: ${props => props.theme.primary};\n    border-color: ${props => props.theme.primary};\n    &:hover,\n    &:focus {\n      background-color: ${props => props.theme.primaryLight};\n      border-color: ${props => props.theme.primaryLight};\n      color: ${props => props.theme.primary};\n      & a {\n        color: ${props => props.theme.primary};\n      }\n    }\n  }\n\n  &.btn-secondary {\n    background-color: ${props => props.theme.secondaryDark};\n    border-color: ${props => props.theme.secondaryDark};\n    &:hover,\n    &:focus {\n      background-color: ${props => props.theme.secondary};\n      border-color: ${props => props.theme.secondary};\n    }\n  }\n\n  &:not(:disabled) {\n    cursor: pointer;\n  }\n`\n\nexport const CardButton = styled.button`\n  position: absolute;\n  right: 1%;\n  top: -50%;\n  display: block;\n  width: 65px;\n  height: 65px;\n  font-weight: bold;\n  border-radius: 100%;\n  background: #fff;\n  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.15);\n  text-align: center;\n  text-decoration: bold;\n  color: ${props => props.theme.tertiary};\n  transition: all 0.3s ease;\n  /* &::after {\n    margin-left: 2%;\n    content: \"\\f054\";\n    font-family: FontAwesome;\n    line-height: 10%;\n  } */\n\n  &:hover,\n  &:focus {\n    background: ${props => props.theme.tertiary};\n    color: #fff;\n    box-shadow: 0 2px 8px 0 rgba(${props => props.theme.tertiary}, 0.4);\n    &::after {\n      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n    }\n  }\n`\n\nexport const CloseModalIcon = styled.button`\n  position: absolute;\n  right: 4rem;\n  border: 0;\n  cursor: pointer;\n  color: rgba(128, 128, 128, 0.5);\n  padding: 0;\n  font-size: 2rem;\n  padding: 0 !important;\n  font-weight: 300;\n  background: white;\n`\n","import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Button, GhostInput } from '../passwordReset/styles/styledComponents';\nimport styled from 'styled-components';\n\n// MOVE TO REDUX\nimport axios from 'axios';\n\nexport const RecoverPasswordStyles = styled.div`\n  height: 100%;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  form {\n    width: 300px;\n  }\n  p,\n  input {\n    margin-bottom: 0.625rem;\n    font-size: 1.125rem;\n  }\n\n  input,\n  button {\n    width: 100%;\n  }\n  p {\n    font-size: 1.125rem;\n  }\n  a {\n    margin-top: 1rem;\n  }\n  .reset-password-form-wrapper {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    max-width: 430px;\n    margin: 0 auto;\n  }\n  .reset-password-form-sent-wrapper {\n    max-width: 360px;\n    text-align: center;\n    p {\n      text-align: left;\n      margin-top: 1rem;\n      margin-bottom: 0.75rem;\n    }\n  }\n  .password-reset-btn {\n    padding: 0.625rem 1.25rem;\n    font-size: 1.125rem;\n  }\n`;\n\nclass RecoverPassword extends Component {\n  state = {\n    email: '',\n    submitted: false,\n  };\n\n  handleChange = (e) => {\n    this.setState({ email: e.target.value });\n  };\n\n  sendPasswordResetEmail = (e) => {\n    e.preventDefault();\n    const { email } = this.state;\n    axios.post(`http://localhost:5000/api/user/${email}`);\n    this.setState({ email: '', submitted: true });\n  };\n\n  render() {\n    const { email, submitted } = this.state;\n\n    return (\n      <RecoverPasswordStyles>\n        <h3>Reset your password</h3>\n        {submitted ? (\n          <div className='reset-password-form-sent-wrapper'>\n            <p>\n              If that account is in our system, we emailed you a link to reset\n              your password.\n            </p>\n            <Link to='/login' className='ghost-btn'>\n              Return to sign in\n            </Link>\n          </div>\n        ) : (\n          <div className='reset-password-form-wrapper'>\n            <p>\n              It happens to the best of us. Enter your email and we'll send you\n              reset instructions.\n            </p>\n            <form onSubmit={this.sendPasswordResetEmail}>\n              <GhostInput\n                onChange={this.handleChange}\n                value={email}\n                placeholder='Email address'\n              />\n              <Button className='btn-primary password-reset-btn'>\n                Send password reset email\n              </Button>\n            </form>\n            <Link to='/login'>I remember my password</Link>\n          </div>\n        )}\n      </RecoverPasswordStyles>\n    );\n  }\n}\n\nexport default RecoverPassword;\n","import React, { Component } from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport { Button, GhostInput } from '../passwordReset/styles/styledComponents';\nimport PropTypes from 'prop-types';\nimport { setAlert } from '../../actions/alert';\n\nimport { RecoverPasswordStyles as UpdatePasswordStyles } from './RecoverPassword';\n\nclass UpdatePassword extends Component {\n  state = {\n    password: '',\n    confirmPassword: '',\n    submitted: false,\n  };\n\n  handleChange = (key) => (e) => {\n    this.setState({ [key]: e.target.value });\n  };\n\n  updatePassword = (e) => {\n    e.preventDefault();\n    const { password, confirmPassword } = this.state;\n\n    if (password !== confirmPassword) {\n      alert('Passwords do not match');\n    } else {\n      axios\n        .put(\n          'http://localhost:5000/api/user/updatePassword/' +\n            this.props.match.params.id,\n          { password }\n        )\n        .then((res) => res)\n        .catch((err) =>\n          console.warn('ERROR FROM SERVER UPDATING PASSWORD:', err)\n        );\n      this.setState({ submitted: !this.state.submitted });\n    }\n  };\n\n  render() {\n    const { submitted } = this.state;\n\n    return (\n      <UpdatePasswordStyles>\n        <h3 style={{ paddingBottom: '1.25rem' }}>Update your password</h3>\n        {submitted ? (\n          <div className='reset-password-form-sent-wrapper'>\n            <p>Your password has been saved.</p>\n            <Link to='/login' className='ghost-btn'>\n              Sign back in\n            </Link>\n          </div>\n        ) : (\n          <div className='reset-password-form-wrapper'>\n            <form\n              onSubmit={this.updatePassword}\n              style={{ paddingBottom: '1.5rem' }}\n            >\n              <GhostInput\n                onChange={this.handleChange('password')}\n                value={this.state.password}\n                placeholder='New password'\n                minLength='6'\n                type='password'\n              />\n              <GhostInput\n                onChange={this.handleChange('confirmPassword')}\n                value={this.state.confirmPassword}\n                placeholder='Confirm password'\n                type='password'\n              />\n\n              <Button className='btn-primary password-reset-btn'>\n                Update password\n              </Button>\n            </form>\n\n            <p\n              style={{\n                fontSize: '1rem',\n                maxWidth: '420px',\n                paddingLeft: '0.5rem',\n              }}\n            >\n              Make sure it's at least 6 characters including a number and a\n              lowercase letter. Read some documentation on{' '}\n              <a\n                href='https://help.github.com/articles/creating-a-strong-password/'\n                target='_blank'\n                rel='noopener noreferrer'\n              >\n                safer password practices\n              </a>\n              .\n            </p>\n          </div>\n        )}\n      </UpdatePasswordStyles>\n    );\n  }\n}\n\nUpdatePassword.propTypes = {\n  token: PropTypes.string.isRequired,\n  userId: PropTypes.string.isRequired,\n};\n\nexport default UpdatePassword;\n","import React, { Fragment } from 'react';\nimport spinner from './spinner.gif';\n\nexport default () => (\n  <Fragment>\n    <img\n      src={spinner}\n      style={{ width: '200px', margin: 'auto', display: 'block' }}\n      alt='Loading...'\n    />\n  </Fragment>\n);\n","import React, { useEffect, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport Spinner from '../layout/Spinner';\n\nconst Welcome = ({ auth: { user }, auth: { auth, loading } }) => {\n  useEffect(() => {}, []);\n\n  return loading && auth === null ? (\n    <Spinner />\n  ) : (\n    <Fragment>\n      <h1 className='large text-primary'>Bibtex</h1>\n      <p className='lead'>\n        <i />\n        Hello! {user && user.name} Welcome to the Bibtex editor!\n      </p>\n      <p>\n        <small>Logged in as: {user && user.role}</small>\n      </p>\n    </Fragment>\n  );\n};\n\nWelcome.propTypes = {\n  auth: PropTypes.object.isRequired,\n  user: PropTypes.object.isRequired,\n};\n\nconst mapStateToProps = (state) => ({\n  auth: state.auth,\n  user: state.user,\n});\n\nexport default connect(mapStateToProps)(Welcome);\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport Button from 'react-bootstrap/Button';\nimport './UserTableRow.css';\n\nconst UserTableRow = (props) => {\n  return (\n    <tr>\n      <td>{props.user.name}</td>\n      <td>{props.user.email}</td>\n      <td>{props.user.role}</td>\n      <td>{props.user.username}</td>\n      <td className='actions'>\n        <Link to={'/edit-user/' + props.user._id} className='button-big'>\n          Edit\n        </Link>\n        <Button\n          onClick={() =>\n            props.dispatch({\n              type: 'delete',\n              user: props.user,\n            })\n          }\n          variant='danger'\n          className='delete-btn'\n        >\n          Delete\n        </Button>\n      </td>\n    </tr>\n  );\n};\n\nexport default UserTableRow;\n","import axios from 'axios';\nimport bibtexParse from 'bibtex-parser-js';\nimport entryFields from '../utils/entryFields';\n\nconst typeChange = {\n  ARTICLE: 'article',\n  BOOK: 'book',\n  BOOKLET: 'booklet',\n  CONFERENCE: 'conference',\n  INBOOK: 'inBook',\n  INCOLLECTION: 'inCollection',\n  INPROCEEDINGS: 'inProceedings',\n  MANUAL: 'manual',\n  MASTERSTHESIS: 'mastersThesis',\n  MISC: 'misc',\n  ONLINE: 'online',\n  PHDTHESIS: 'phdThesis',\n  PROCEEDINGS: 'proceedings',\n};\n\nconst getUserId = async () => {\n  const res = await axios.get('/api/auth');\n  return res.data.response._id;\n};\n\nexport const getGroups = async () => {\n  const res = await axios.get('/api/group/withme');\n  return res.data.response;\n};\n\nexport const getUser = async () => {\n  const res = await axios.get('/api/user/me');\n  return res.data;\n};\n\nexport const getDatabases = async () => {\n  const res = await axios.get('/api/database/all');\n  return res.data.response;\n};\n\nexport const changeName = async (newName, databaseId) => {\n  try {\n    const res = await axios.put(`/api/database`, {\n      id: databaseId,\n      bibtexdatabasename: newName,\n    });\n    return res;\n  } catch (err) {\n    return err.response;\n  }\n};\n\nexport const createDatabase = async (bibtexdatabasename, group) => {\n  try {\n    const res = await axios.post('/api/database', {\n      bibtexdatabasename,\n      group,\n    });\n    return res;\n  } catch (err) {\n    return err.response;\n  }\n};\n\nexport const deleteDatabase = async (databaseId) => {\n  try {\n    const res = await axios.delete(`/api/database/${databaseId}`);\n    return res;\n  } catch (err) {\n    return err.response;\n  }\n};\n\nexport const addEntry = async (entry, databaseId) => {\n  console.log(entry);\n  try {\n    const res = await axios.post(`/api/database/entry/`, {\n      id: databaseId,\n      entry,\n    });\n    return res;\n  } catch (err) {\n    return err.response;\n  }\n};\n\nexport const changeEntry = async (entry, databaseId) => {\n  try {\n    const res = await axios.put(`/api/database/entry`, {\n      ...entry,\n      entryId: entry._id,\n      databaseId,\n    });\n    return res;\n  } catch (err) {\n    return err.response;\n  }\n};\n\nexport const deleteEntry = async (entryId, databaseId) => {\n  try {\n    const res = await axios.delete(\n      `/api/database/entry/${databaseId}/${entryId}`\n    );\n    return res;\n  } catch (err) {\n    return err.response;\n  }\n};\n\nexport const uploadDatabase = async (bibtexFile, name, group) => {\n  console.log('GROUP');\n  console.log(group);\n  let bibtexJSON;\n  try {\n    bibtexJSON = bibtexParse.toJSON(bibtexFile);\n  } catch (err) {\n    return {\n      data: {\n        ok: false,\n        error: {\n          reason: 'Failed to parse Bibtex file',\n        },\n      },\n    };\n  }\n  console.log(bibtexJSON);\n  const entries = [];\n  for (let entry of bibtexJSON) {\n    entry.entryType = typeChange[entry.entryType];\n    if (!entryFields[entry.entryType]) {\n      continue;\n    }\n    for (let tag of Object.keys(entry.entryTags)) {\n      if (\n        entryFields[entry.entryType].required.includes(tag.toLowerCase()) ||\n        entryFields[entry.entryType].extra.includes(tag.toLowerCase())\n      ) {\n        entry.entryTags[tag.toLowerCase()] = entry.entryTags[tag];\n      }\n      delete entry.entryTags[tag];\n    }\n    let contains = true;\n    for (let tag of entryFields[entry.entryType].required) {\n      if (!entry.entryTags[tag]) {\n        contains = false;\n      }\n    }\n    if (contains) entries.push(entry);\n  }\n  const database = { bibtexdatabasename: name, entries };\n  try {\n    const res = await axios.post(`/api/database/upload`, {\n      ...database,\n      group: group === 'user' ? null : group,\n    });\n    console.log(res.data);\n    return res;\n  } catch (err) {\n    console.log(err.response);\n    return err.response;\n  }\n};\n\nconst compareEntries = (entryList1, entryList2) => {\n  if (entryList1.length !== entryList2.length) {\n    return false;\n  }\n  for (let i = 0; i < entryList1.length; i++) {\n    if (entryList1[i].citationKey !== entryList2[i].citationKey) {\n      return false;\n    }\n  }\n  return true;\n};\n\nexport const compareFileLists = (fileList1, fileList2) => {\n  if (fileList1.length !== fileList2.length) {\n    return false;\n  }\n  for (let i = 0; i < fileList1.length; i++) {\n    if (fileList1[i].bibtexdatabasename !== fileList2[i].bibtexdatabasename) {\n      return false;\n    }\n    if (!compareEntries(fileList1[i].entries, fileList2[i].entries)) {\n      return false;\n    }\n  }\n  return true;\n};\n","import React from 'react';\nimport { useReducer, useEffect } from 'react';\nimport axios from 'axios';\nimport Table from 'react-bootstrap/Table';\nimport UserTableRow from './UserTableRow';\nimport { Link } from 'react-router-dom';\nimport { Dropdown, Menu } from 'semantic-ui-react';\nimport { getUser } from '../../actions/editor';\nimport './Admin.css';\n\nfunction adminReducer(state, action) {\n  switch (action.type) {\n    case 'setCurrentUser': {\n      return {\n        ...state,\n        currentUser: action.user,\n        isFetchingUser: false,\n      };\n    }\n    case 'delete': {\n      return {\n        ...state,\n        isDeleting: true,\n        deletedUser: action.user,\n      };\n    }\n    case 'search': {\n      return {\n        ...state,\n        search: action.value,\n      };\n    }\n    case 'searchParam': {\n      return {\n        ...state,\n        searchParam: action.value,\n      };\n    }\n    case 'finishLoading': {\n      return {\n        ...state,\n        isLoading: false,\n        users: action.users,\n      };\n    }\n    case 'finishDeleting': {\n      if (!action.ok) {\n        return { ...state, isDeleting: false, deletedUser: null };\n      }\n      return {\n        ...state,\n        isDeleting: false,\n        isLoading: true,\n        deletedUser: null,\n      };\n    }\n    default:\n      return state;\n  }\n}\n\nconst searchParams = [\n  { key: 1, text: 'Name', value: 'name' },\n  { key: 2, text: 'Email', value: 'email' },\n  { key: 3, text: 'Username', value: 'username' },\n];\n\nconst Admin = (props) => {\n  const initialState = {\n    isLoading: true,\n    currentUser: null,\n    isDeleting: false,\n    isFetchingUser: true,\n    deletedUser: null,\n    users: null,\n    search: '',\n    searchParam: 'name',\n  };\n\n  const [state, dispatch] = useReducer(adminReducer, initialState);\n\n  useEffect(() => {\n    const fetchCurrentUser = async () => {\n      const user = await getUser();\n      dispatch({ type: 'setCurrentUser', user });\n    };\n    if (state.isFetchingUser) fetchCurrentUser();\n  }, [state.currentUser, state.isFetchingUser]);\n\n  useEffect(() => {\n    const fetchUsers = () =>\n      axios.get('/api/user').then((res) => {\n        console.log(res.data);\n        dispatch({\n          type: 'finishLoading',\n          users: res.data,\n          ok: true,\n        });\n      });\n    if (state.isLoading) fetchUsers();\n  }, [state.isLoading]);\n  useEffect(() => {\n    const deleteUser = async () => {\n      const res = await axios.delete(`/api/user/${state.deletedUser._id}`);\n      dispatch({\n        type: 'finishDeleting',\n        user: res.data,\n        ok: true,\n      });\n    };\n    if (state.isDeleting) deleteUser();\n  }, [state.isDeleting, state.deletedUser]);\n\n  if (state.isLoading || state.isFetchingUser) return <div>Loading...</div>;\n\n  if (state.currentUser.role !== 'admin') {\n    return (\n      <div>\n        <div className='warning'>You don't have access to this page</div>\n      </div>\n    );\n  }\n\n  const usersFilter = (user) => {\n    if (state.search === '') return true;\n    return user[state.searchParam].includes(state.search);\n  };\n\n  const dataTable = state.users.filter(usersFilter).map((user) => {\n    return <UserTableRow user={user} dispatch={dispatch} key={user._id} />;\n  });\n  console.log(state.searchParam);\n  console.log(state.search);\n  return (\n    <div>\n      <div className='buttons'>\n        <Link to='/create-users' className='create-btn button-big'>\n          Create User\n        </Link>\n        <div className='select-param'>\n          <Menu compact className='select-param'>\n            <Dropdown\n              value={state.searchParam}\n              options={searchParams}\n              simple\n              item\n              onChange={(e, data) =>\n                dispatch({\n                  type: 'searchParam',\n                  value: data.value,\n                })\n              }\n            ></Dropdown>\n          </Menu>\n        </div>\n        <input\n          className='search'\n          placeholder='Enter a value'\n          value={state.search}\n          onChange={(e) =>\n            dispatch({\n              type: 'search',\n              value: e.target.value,\n            })\n          }\n        ></input>\n      </div>\n      <div className='table-wrapper'>\n        <Table striped bordered hover>\n          <thead>\n            <tr>\n              <th>Name</th>\n              <th>Email</th>\n              <th>Role</th>\n              <th>Username</th>\n              <th>Actions</th>\n            </tr>\n          </thead>\n          <tbody>{dataTable}</tbody>\n        </Table>\n      </div>\n    </div>\n  );\n};\n\nexport default Admin;\n","import React, { Fragment, useState } from 'react';\nimport { connect } from 'react-redux';\nimport { Link, Redirect } from 'react-router-dom';\nimport { setAlert } from '../../actions/alert';\nimport { register } from '../../actions/auth';\nimport PropTypes from 'prop-types';\n\nconst Register = ({ setAlert, register, isAuthenticated }) => {\n  const [formData, setFormData] = useState({\n    name: '',\n    email: '',\n    role: '',\n    username: '',\n    password: '',\n    password2: '',\n  });\n\n  const { name, email, role, username, password, password2 } = formData;\n\n  const onChange = (e) =>\n    setFormData({ ...formData, [e.target.name]: e.target.value });\n\n  const onSubmit = async (e) => {\n    e.preventDefault();\n    if (password !== password2) {\n      setAlert('Passwords do not match', 'danger');\n    } else {\n      register({ name, email, role, username, password });\n    }\n  };\n\n  return (\n    <Fragment>\n      <h1 className='large text-primary'>Create User</h1>\n      <form className='form' onSubmit={onSubmit}>\n        <div className='form-group'>\n          <input\n            type='text'\n            placeholder='Name'\n            name='name'\n            value={name}\n            onChange={onChange}\n          />\n        </div>\n        <div className='form-group'>\n          <input\n            type='email'\n            placeholder='Email Address'\n            name='email'\n            unique\n            value={email}\n            onChange={onChange}\n          />\n        </div>\n        <div className='form-group'>\n          <input\n            type='text'\n            placeholder='Role'\n            name='role'\n            value={role}\n            onChange={onChange}\n          />\n        </div>\n        <div className='form-group'>\n          <input\n            type='text'\n            placeholder='Username'\n            name='username'\n            value={username}\n            onChange={onChange}\n          />\n        </div>\n        <div className='form-group'>\n          <input\n            type='password'\n            placeholder='Password'\n            name='password'\n            value={password}\n            onChange={onChange}\n          />\n        </div>\n        <div className='form-group'>\n          <input\n            type='password'\n            placeholder='Confirm Password'\n            name='password2'\n            value={password2}\n            onChange={onChange}\n          />\n        </div>\n        <input type='submit' className='btn btn-primary' value='Register' />\n        <div className='buttons'>\n          <Link to='/admin' className='btn btn-light'>\n            Back\n          </Link>\n        </div>\n      </form>\n    </Fragment>\n  );\n};\n\nRegister.propTypes = {\n  setAlert: PropTypes.func.isRequired,\n  register: PropTypes.func.isRequired,\n  isAuthenticated: PropTypes.bool,\n};\n\nconst mapStateToProps = (state) => ({\n  isAuthenticated: state.auth.isAuthenticated,\n});\n\nexport default connect(mapStateToProps, { setAlert, register })(Register);\n","import axios from 'axios';\n\nexport const updateUser = async (userObj, password, id) => {\n  const result = {};\n  const updateFields = async () => {\n    try {\n      const res = await axios.put('/api/user/' + id, userObj);\n      result.fields = { message: 'User updated successfully', ok: res.data.ok };\n      console.log('UPDATE USER')\n      console.log(res.data);\n    } catch (err) {\n      console.log(err);\n      result.fields = {\n        message: err.response.data.error.reason,\n        ok: err.response.data.ok,\n      };\n    }\n  };\n  const updatePassword = async () => {\n    if (password !== '') {\n      try {\n        const res = await axios.put('/api/user/updatePassword/' + id, {\n          password,\n        });\n        console.log(res.data);\n        result.password = { message: res.data.msg, ok: res.data.success };\n      } catch (err) {\n        result.password = {\n          message: err.response.data.msg,\n          ok: err.response.data.success,\n        };\n      }\n    }\n  };\n  await Promise.all([updateFields(), updatePassword()]);\n  return result;\n};\n","import React, { useReducer, useEffect } from 'react';\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\nimport axios from 'axios';\nimport { updateUser } from '../../actions/useredit';\nimport { Link } from 'react-router-dom';\nimport './EditUser.css';\n\nfunction editUserDispater(state, action) {\n  switch (action.type) {\n    case 'clearMessages': {\n      console.log('CLEARING');\n      return {\n        ...state,\n        messages: [],\n        clearing: false,\n      };\n    }\n    case 'save': {\n      return {\n        ...state,\n        isSaving: true,\n      };\n    }\n    case 'finishSaving': {\n      let isLoading = false;\n      if (\n        (action.fields && action.fields.ok) ||\n        (action.password && action.password.ok)\n      ) {\n        isLoading = true;\n      }\n      if (action.fields) state.messages.push(action.fields);\n      if (action.password) state.messages.push(action.password);\n      return {\n        ...state,\n        isSaving: false,\n        clearing: true,\n        isLoading,\n      };\n    }\n    case 'changePassword': {\n      console.log('here');\n      if (!action.ok) {\n        return state;\n      }\n      return {\n        ...state,\n        isLoading: true,\n        password: '',\n      };\n    }\n    case 'finishLoading': {\n      return {\n        ...state,\n        isLoading: false,\n        name: action.name,\n        email: action.email,\n        role: action.role,\n        username: action.username,\n      };\n    }\n    case 'name':\n      return { ...state, name: action.value };\n    case 'email':\n      return { ...state, email: action.value };\n    case 'role':\n      return { ...state, role: action.value };\n    case 'username':\n      return { ...state, username: action.value };\n    case 'password':\n      return { ...state, password: action.value };\n    default:\n      return state;\n  }\n}\n\nconst EditUser = (props) => {\n  const initialState = {\n    messages: [],\n    clearing: false,\n    isLoading: true,\n    isSaving: false,\n    name: '',\n    email: '',\n    role: '',\n    username: '',\n    password: '',\n  };\n  const [state, dispatch] = useReducer(editUserDispater, initialState);\n\n  useEffect(() => {\n    if (state.clearing)\n      setTimeout(() => dispatch({ type: 'clearMessages' }), 5000);\n  }, [state.clearing]);\n  useEffect(() => {\n    axios.get('/api/user/' + props.match.params.id).then((res) => {\n      dispatch({\n        type: 'finishLoading',\n        name: res.data.name,\n        email: res.data.email,\n        role: res.data.role,\n        username: res.data.username,\n      });\n    });\n  }, [props.match.params.id]);\n  useEffect(() => {\n    const saveUser = async () => {\n      console.log('submiting');\n      const userObject = {\n        name: state.name,\n        email: state.email,\n        role: state.role,\n        username: state.username,\n      };\n      const res = await updateUser(\n        userObject,\n        state.password,\n        props.match.params.id\n      );\n      dispatch({\n        type: 'finishSaving',\n        ...res,\n      });\n    };\n    if (state.isSaving) saveUser();\n  }, [\n    state.isSaving,\n    state.name,\n    state.email,\n    state.role,\n    state.username,\n    state.password,\n    props.match.params.id,\n  ]);\n\n  const onFormSubmit = (e) => {\n    e.preventDefault();\n    dispatch({ type: 'save' });\n  };\n\n  return (\n    <div className='form-wrapper'>\n      <Form onSubmit={onFormSubmit} autoComplete='off'>\n        <Form.Group controlId='Name'>\n          <Form.Label>Name</Form.Label>\n          <Form.Control\n            required\n            type='text'\n            value={state.name}\n            onChange={(e) => dispatch({ type: 'name', value: e.target.value })}\n          />\n        </Form.Group>\n        <Form.Group controlId='Email'>\n          <Form.Label>Email</Form.Label>\n          <Form.Control\n            required\n            type='email'\n            value={state.email}\n            onChange={(e) => dispatch({ type: 'email', value: e.target.value })}\n          />\n        </Form.Group>\n        <Form.Group controlId='Role'>\n          <Form.Label>Role</Form.Label>\n          <Form.Control\n            required\n            as='select'\n            value={state.role}\n            onChange={(e) => dispatch({ type: 'role', value: e.target.value })}\n          >\n            <option>user</option>\n            <option>admin</option>\n          </Form.Control>\n        </Form.Group>\n        <Form.Group controlId='Username'>\n          <Form.Label>Username</Form.Label>\n          <Form.Control\n            required\n            type='text'\n            value={state.username}\n            onChange={(e) =>\n              dispatch({ type: 'username', value: e.target.value })\n            }\n          />\n        </Form.Group>\n        <Form.Group controlId='Password'>\n          <Form.Label>New Password</Form.Label>\n          <Form.Control\n            type='password'\n            autoComplete='new-password'\n            aria-autocomplete='none'\n            value={state.password}\n            onChange={(e) =>\n              dispatch({ type: 'password', value: e.target.value })\n            }\n          />\n        </Form.Group>\n        <Button variant='danger' size='lg' block='block' type='submit'>\n          Update User\n        </Button>\n      </Form>\n      <Link to='/admin' className='link-back'>\n        Back to admin page\n      </Link>\n      {state.messages.map((message, i) => {\n        return (\n          <div\n            className={`edit-message ${\n              message.ok ? 'message-safe' : 'message-dang'\n            }`}\n          >\n            {message.message}\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default EditUser;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport './File.css';\n\nconst File = (props) => {\n  const info = props.file.user\n    ? { label: 'User', name: props.file.user.name }\n    : { label: 'Group', name: props.file.group.name };\n  const d = new Date(props.file.updatedAt);\n  return (\n    <div\n      className={props.isSelected ? 'file-box chosen-file' : 'file-box'}\n      onClick={(e) =>\n        props.dispatch({\n          type: 'select',\n          file: props.file,\n        })\n      }\n    >\n      <div className='file-head'>\n        <div className='file-bibtex-name'>{props.file.bibtexdatabasename}</div>\n      </div>\n      <div className='file-info'>\n        <div className='file-info-label'>{info.label}:</div>\n        <div className='file-info-name'>{info.name}</div>\n      </div>\n      <div className='file-date-label'>Last updated:</div>\n      <div className='file-date'>\n        {d.toLocaleDateString()} {d.toLocaleTimeString()}\n      </div>\n    </div>\n  );\n};\n\nFile.propTypes = {\n  file: PropTypes.any.isRequired,\n  isSelected: PropTypes.bool,\n  isAllowed: PropTypes.bool,\n  dispatch: PropTypes.any.isRequired,\n};\n\nexport default File;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport './FileList.css';\nimport File from './File';\n\nconst FileList = (props) => {\n  if (!props.active || !props.fileList) return <div className='file-div'></div>;\n\n  const listDivs = props.fileList.map((file) => {\n    const isAllowed =\n      (file.user && file.user._id === props.user._id) ||\n      (file.group &&\n        (file.group.owner === props.user._id ||\n          file.group.users.includes(props.user._id)));\n    return (\n      <File\n        key={file._id}\n        file={file}\n        isSelected={props.selectedFile && props.selectedFile._id === file._id}\n        isAllowed={isAllowed}\n        dispatch={props.dispatch}\n      ></File>\n    );\n  });\n\n  let btnText;\n  if (props.uploading) btnText = 'Upload a database';\n  else if (!props.selectedFile) btnText = 'Add a database';\n  else btnText = 'Save';\n\n  return (\n    <div className='file-div'>\n      <label className='upload-btn' htmlFor='file'>\n        Upload\n      </label>\n      <input\n        type='file'\n        name='file'\n        id='file'\n        onChange={(e) =>\n          props.dispatch({\n            type: 'upload',\n            file: e.target.files[0],\n          })\n        }\n        className='file-upload-input'\n      ></input>\n      <div className='file-body'>{listDivs}</div>\n      <select\n        className={`file-group ${\n          !props.selectedFile || props.uploading ? '' : 'disabled'\n        }`}\n        onChange={(e) =>\n          props.dispatch({\n            type: 'selectGroup',\n            group: e.target.value,\n          })\n        }\n      >\n        <option value='user'>Personal Database</option>\n        {props.groups.map((group) => (\n          <option value={group._id} key={group._id}>\n            {group.name}\n          </option>\n        ))}\n      </select>\n      <div\n        className={`file-name ${\n          props.isSelectedAllowed || !props.selectedFile ? '' : 'disabled'\n        }`}\n      >\n        <div className='file-name-label'>Enter a name:</div>\n        <input\n          className='file-name-input'\n          value={props.inputName}\n          onChange={(e) =>\n            props.dispatch({\n              type: 'inputName',\n              value: e.target.value,\n            })\n          }\n        ></input>\n      </div>\n      <div\n        className={`file-footer ${\n          props.isSelectedAllowed || !props.selectedFile ? '' : 'disabled'\n        }`}\n      >\n        <button\n          className='delete-db-btn'\n          onClick={(e) => props.dispatch({ type: 'delete' })}\n        >\n          Delete a database\n        </button>\n        <button\n          className='add-db-btn'\n          onClick={(e) =>\n            props.dispatch({\n              type: 'save',\n            })\n          }\n        >\n          {btnText}\n        </button>\n      </div>\n    </div>\n  );\n};\n\nFileList.propTypes = {\n  groups: PropTypes.any,\n  active: PropTypes.bool.isRequired,\n  selectedFile: PropTypes.any, // id of selected database\n  uploading: PropTypes.any.isRequired,\n  inputName: PropTypes.string.isRequired,\n  fileList: PropTypes.array,\n  isSelectedAllowed: PropTypes.bool,\n  dispatch: PropTypes.any.isRequired,\n};\n\nexport default FileList;\n","const convertMiddleLine = (key, value) => {\n  return `${key} = \"${value}\",\\n`;\n};\n\nconst convertLastLine = (key, value) => {\n  return `${key} = \"${value}\"}\\n\\n`;\n};\n\nconst convertRef = (ref) => {\n  let type = ref.entryType.toLowerCase();\n  const entries = Object.entries(ref.entryTags);\n  const strings = entries.map(([key, value], i) => {\n    if (i === entries.length - 1) {\n      return convertLastLine(key, value);\n    }\n    return convertMiddleLine(key, value);\n  });\n  let finalString = `@${type}{${ref.citationKey},\\n`;\n  strings.forEach((str) => (finalString += str));\n  return finalString;\n};\n\nexport const convertRefs = (refs) => {\n  let finalString = '';\n  refs.forEach((ref) => {\n    finalString += convertRef(ref);\n  });\n  return finalString;\n};\n\nexport const xmlToBib = (xmlText) => {\n  console.log(xmlText);\n  const parser = new DOMParser();\n  const xml = parser.parseFromString(xmlText, 'text/xml');\n  const biblStruct = xml.querySelector('biblStruct');\n  if (!biblStruct) {\n    return { ok: false };\n  }\n  //\n  // Parse Title\n  //\n  let title;\n  if (!xml.querySelector('titleStmt')) {\n    title = null;\n  } else {\n    title = Array.from(\n      xml.querySelector('titleStmt').querySelectorAll('title')\n    ).find((titleElem) => {\n      return titleElem.getAttribute('level') === 'a';\n    }).innerHTML;\n  }\n  console.log('TITLE');\n  console.log(title);\n  //\n  // Parse authors\n  //\n  const authors = Array.from(biblStruct.querySelectorAll('persName')).map(\n    (elem) => {\n      let authorString = '';\n      Array.from(elem.children)\n        .filter((elem) => elem.innerHTML !== '•')\n        .forEach((node) => {\n          authorString += ' ' + node.innerHTML;\n        });\n      return authorString.trim();\n    }\n  );\n  let author = null;\n  if (authors.length !== 0) {\n    author = authors.join(', ').trim();\n  }\n  console.log('AUTHOR');\n  console.log(author);\n  //\n  // Parse journal\n  //\n  const journal = xml\n    .querySelector('publicationStmt')\n    ?.querySelector('publisher')?.innerHTML;\n  console.log('JOURNAL');\n  console.log(journal);\n  //\n  // Parse year\n  //\n  const year = xml.querySelector('publicationStmt')?.querySelector('date')\n    ?.innerHTML;\n  console.log('YEAR');\n  console.log(year);\n  //\n  // Validate\n  //\n  if (!title || !author || !journal || !year) {\n    return { ok: false };\n  }\n  return {\n    ok: true,\n    entry: {\n      title,\n      author,\n      journal,\n      year,\n    },\n  };\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport './Entry.css';\n\nconst Entry = (props) => {\n  const entryClass = props.isChosen ? 'entry chosen-entry' : 'entry';\n  if (props.isNew && props.isDisabled)\n    return <button className='entry-new disabled'></button>;\n  else if (props.isNew)\n    return (\n      <button className='entry-new chosen-entry' onClick={props.onClick}>\n        <div className='entry-text'>\n          <p>\n            new <span className='entry-text-new'>{props.entry.entryType}</span>\n          </p>\n        </div>\n      </button>\n    );\n  return (\n    <button className={entryClass} onClick={props.onClick}>\n      <div className='entry-text'>\n        <p className='entry-header'>\n          <span className='entry-type'>@{props.entry.entryType}</span>\n          {'{'}\n          <span className='entry-key'>{props.entry.citationKey}</span>\n        </p>\n        <div className='entry-title-cont entry-cont'>\n          <div className='entry-title'>title</div>\n          <div className='entry-eq'>=</div>\n          <div className='entry-tag'>{props.entry.entryTags.title}</div>\n        </div>\n        <div className='entry-author-cont entry-cont'>\n          <div className='entry-author'>author</div>\n          <div className='entry-eq'>=</div>\n          <div className='entry-tag'>{props.entry.entryTags.author}</div>\n        </div>\n        <div className='entry-year-cont entry-cont'>\n          <div className='entry-year'>year</div>\n          <div className='entry-eq'>=</div>\n          <div className='entry-tag'>{props.entry.entryTags.year}</div>\n        </div>\n        <p className='entry-footer'>\n          <span className='entry-end'>...</span>\n          {'}'}\n        </p>\n      </div>\n    </button>\n  );\n};\n\nEntry.propTypes = {\n  isChosen: PropTypes.bool,\n  isNew: PropTypes.bool,\n  isDisabled: PropTypes.bool,\n  entry: PropTypes.any,\n  onClick: PropTypes.func.isRequired,\n};\n\nexport default Entry;\n","import React, { useEffect } from 'react';\nimport PropTypes, { element } from 'prop-types';\nimport { Dropdown, Menu } from 'semantic-ui-react';\nimport { convertRefs } from '../../actions/bibtex';\nimport Entry from './Entry';\nimport './EntryList.css';\n\nconst options = [\n  { key: 1, text: 'Article', value: 'article' },\n  { key: 2, text: 'Book', value: 'book' },\n  { key: 3, text: 'Booklet', value: 'booklet' },\n  { key: 4, text: 'Conference', value: 'conference' },\n  { key: 5, text: 'InBook', value: 'inBook' },\n  { key: 6, text: 'InCollection', value: 'inCollection' },\n  { key: 7, text: 'InProceedings', value: 'inProceedings' },\n  { key: 8, text: 'Manual', value: 'manual' },\n  { key: 9, text: 'Masters Thesis', value: 'mastersThesis' },\n  { key: 10, text: 'Misc', value: 'misc' },\n  { key: 11, text: 'Online', value: 'online' },\n  { key: 12, text: 'Phd Thesis', value: 'phdThesis' },\n  { key: 13, text: 'Proceedings', value: 'proceedings' },\n];\n\nfunction parseSearch(search) {\n  const result = { entryTags: {} };\n  const arr = search.trim().split(' ');\n  let typeString = arr.find((str) => str.startsWith('@'));\n  if (typeString) {\n    result.entryType = typeString.split('@')[1];\n  }\n  arr.forEach((str) => {\n    if (str.split('=').length === 2) {\n      const [key, value] = str.split('=');\n      result.entryTags[key] = value;\n    }\n  });\n  return result;\n}\n\nconst EntryList = (props) => {\n  useEffect(() => {\n    const chosen = document.querySelector('.chosen-entry');\n    if (chosen) chosen.scrollIntoView({ behavior: 'smooth' });\n  });\n\n  if (!props.active || !props.file) return <div className='entry-div'></div>;\n\n  const searchParams = parseSearch(props.search);\n  const entryList =\n    Object.keys(searchParams.entryTags).length !== 0 || searchParams.entryType\n      ? props.file.entries.filter((entry) => {\n          let val = true;\n          if (searchParams.entryType) {\n            val =\n              val &&\n              (entry.entryType\n                .toLowerCase()\n                .startsWith(searchParams.entryType) ||\n                entry.entryType.toLowerCase().includes(searchParams.entryType));\n          }\n          const values = Object.entries(searchParams.entryTags);\n          if (values.length !== 0) {\n            let matches = false;\n            for (let [key, value] of values) {\n              if (key === 'citationKey') {\n                if (\n                  entry[key].startsWith(value) ||\n                  entry[key].includes(value)\n                ) {\n                  matches = true;\n                }\n                continue;\n              }\n              if (\n                entry.entryTags[key] &&\n                (entry.entryTags[key].startsWith(value) ||\n                  entry.entryTags[key].includes(value))\n              ) {\n                matches = true;\n              }\n            }\n            return val && matches;\n          }\n          return val;\n        })\n      : props.file.entries;\n  const bibtexString = convertRefs(entryList);\n  const listDivs = entryList.map((entry) => {\n    const isChosen =\n      props.selectedEntry && props.selectedEntry._id === entry._id;\n    return (\n      <Entry\n        isChosen={isChosen}\n        isNew={false}\n        entry={entry}\n        key={entry._id}\n        onClick={() =>\n          props.dispatch({\n            type: 'selectEntry',\n            entry,\n          })\n        }\n      />\n    );\n  });\n\n  const newEntryDiv = (\n    <Entry\n      isChosen={!!props.newEntry}\n      isNew={true}\n      isDisabled={!props.newEntry}\n      entry={props.newEntry}\n      key='newEntry'\n      onClick={() => props.dispatch({ type: 'unselectNew' })}\n    />\n  );\n  return (\n    <div className='entry-div'>\n      <Menu compact className='add-entry-btn'>\n        <Dropdown\n          text='Add entry'\n          options={options}\n          simple\n          item\n          onChange={(e, data) => {\n            if (props.isSelectedAllowed)\n              props.dispatch({\n                type: 'selectNew',\n                value: data.value,\n              });\n          }}\n        ></Dropdown>\n      </Menu>\n      <div className='entry-search'>\n        <label htmlFor='entry-search'>Find entries</label>\n        <input\n          className='entry-search-input'\n          id='entry-search'\n          placeholder='example: @article title=mytitle'\n          value={props.search}\n          onChange={(e) =>\n            props.dispatch({\n              type: 'inputSearch',\n              value: e.target.value,\n            })\n          }\n        ></input>\n      </div>\n      <div className='entry-body'>\n        {listDivs}\n        {newEntryDiv}\n      </div>\n      <a\n        className='download-btn'\n        href={`data:text/x-bibtex,${bibtexString}`}\n        download={`${props.file.bibtexdatabasename}.bib`}\n      >\n        Download\n      </a>\n    </div>\n  );\n};\n\nEntryList.propTypes = {\n  active: PropTypes.bool.isRequired,\n  isSelectedAllowed: PropTypes.bool,\n  newEntry: PropTypes.any,\n  selectedEntry: PropTypes.any,\n  file: PropTypes.any,\n  search: PropTypes.string.isRequired,\n  dispatch: PropTypes.any.isRequired,\n};\n\nexport default EntryList;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport entryFields from '../../utils/entryFields';\nimport './InfoList.css';\n\nconst InfoList = (props) => {\n  if (!props.active || !props.entry) return <div className='info-div'></div>;\n\n  const infoList = [];\n  infoList.push(\n    <div className='info info-required info-citation' key='citationKey'>\n      <div className='info-key' data-tag='citationKey'>\n        *citationKey:\n      </div>\n      <input\n        className='info-value'\n        value={props.entryChanges.citationKey}\n        readOnly={!props.isSelectedAllowed}\n        onChange={(e) =>\n          props.dispatch({\n            type: 'inputCitationKey',\n            value: e.target.value,\n          })\n        }\n      ></input>\n    </div>\n  );\n  entryFields[props.entry.entryType].required.forEach((tag) =>\n    infoList.push(\n      <div className='info info-required' key={tag}>\n        <div className='info-key' data-tag={tag}>\n          *{tag}:\n        </div>\n        <input\n          className='info-value'\n          value={props.entryChanges.entryTags[tag] || ''}\n          readOnly={!props.isSelectedAllowed}\n          onChange={(e) =>\n            props.dispatch({\n              type: 'inputTag',\n              tag,\n              value: e.target.value,\n            })\n          }\n        ></input>\n      </div>\n    )\n  );\n  entryFields[props.entry.entryType].extra.forEach((tag) =>\n    infoList.push(\n      <div className='info info-extra' key={tag}>\n        <div className='info-key' data-tag={tag}>\n          {tag}:\n        </div>\n        <input\n          className='info-value'\n          value={props.entryChanges.entryTags[tag] || ''}\n          readOnly={!props.isSelectedAllowed}\n          onChange={(e) =>\n            props.dispatch({\n              type: 'inputTag',\n              tag,\n              value: e.target.value,\n            })\n          }\n        ></input>\n      </div>\n    )\n  );\n\n  return (\n    <div className='info-div'>\n      <div className='info-head'>@{props.entry.entryType.toLowerCase()}</div>\n      <button\n        className='info-edit-btn'\n        onClick={(e) =>\n          props.dispatch({\n            type: 'openWindow',\n          })\n        }\n      >\n        Open in new window\n      </button>\n      <div className='info-body'>{infoList}</div>\n      <div\n        className={`info-footer ${props.isSelectedAllowed ? '' : 'disabled'}`}\n      >\n        <button\n          className='save-btn'\n          onClick={(e) =>\n            props.dispatch({\n              type: 'saveEntry',\n            })\n          }\n        >\n          Save\n        </button>\n        <button\n          className='delete-btn'\n          onClick={(e) =>\n            props.dispatch({\n              type: 'deleteEntry',\n            })\n          }\n        >\n          Delete\n        </button>\n      </div>\n    </div>\n  );\n};\n\nInfoList.propTypes = {\n  active: PropTypes.bool.isRequired,\n  entry: PropTypes.any,\n  entryChanges: PropTypes.any,\n  isSelectedAllowed: PropTypes.bool,\n  dispatch: PropTypes.any.isRequired,\n};\n\nexport default InfoList;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport entryFields from '../../utils/entryFields';\nimport './EditWindow.css';\n\nconst EditWindow = (props) => {\n  if (!props.active || !props.entry) {\n    return <div className='EditWindow disabled'></div>;\n  }\n  const infoList = [];\n  entryFields[props.entry.entryType].required.forEach((tag) =>\n    infoList.push(\n      <div className='edit-info edit-info-required' key={tag}>\n        <div className='info-label' data-tag={tag}>\n          <div className='info-label-tag'>{tag}:</div>\n          <div className='required-div'>Required</div>\n        </div>\n        <textarea\n          className='info-input'\n          spellCheck='false'\n          required\n          value={props.entryChanges.entryTags[tag] || ''}\n          onChange={(e) =>\n            props.dispatch({\n              type: 'inputTag',\n              tag,\n              value: e.target.value,\n            })\n          }\n        ></textarea>\n      </div>\n    )\n  );\n  entryFields[props.entry.entryType].extra.forEach((tag) =>\n    infoList.push(\n      <div className='edit-info edit-info-extra' key={tag}>\n        <div className='info-label' data-tag={tag}>\n          {tag}:\n        </div>\n        <textarea\n          className='info-input'\n          spellCheck='false'\n          value={props.entryChanges.entryTags[tag] || ''}\n          onChange={(e) =>\n            props.dispatch({\n              type: 'inputTag',\n              tag,\n              value: e.target.value,\n            })\n          }\n        ></textarea>\n      </div>\n    )\n  );\n\n  return (\n    <div className='EditWindow'>\n      <div className='edit-window-layout'></div>\n      <div className='edit-window-main'>\n        <form className='edit-window-form'>\n          <div className='edit-window-head'>\n            Editing entry: @{props.entry.entryType.toLowerCase()}\n          </div>\n          <div className='edit-window-body'>\n            <div className='edit-info edit-window-citation' key='citationKey'>\n              <div className='info-label'>\n                <div className='info-label-tag'>citation key:</div>\n                <div className='required-div'>Required</div>\n              </div>\n              <textarea\n                className='info-input'\n                required\n                spellCheck='false'\n                value={props.entryChanges.citationKey}\n                onChange={(e) =>\n                  props.dispatch({\n                    type: 'inputCitationKey',\n                    value: e.target.value,\n                  })\n                }\n              ></textarea>\n            </div>\n            {infoList}\n          </div>\n          <div className='edit-window-footer'>\n            <button\n              className='edit-cancel-btn'\n              type='button'\n              onClick={(e) =>\n                props.dispatch({\n                  type: 'closeWindow',\n                })\n              }\n            >\n              Cancel\n            </button>\n            <button\n              className='edit-save-btn'\n              type='submit'\n              onClick={(e) => {\n                e.preventDefault();\n                props.dispatch({\n                  type: 'saveEntry',\n                });\n              }}\n            >\n              Save\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nEditWindow.propTypes = {\n  active: PropTypes.bool,\n  entry: PropTypes.object,\n  entryChanges: PropTypes.any,\n  dispatch: PropTypes.any.isRequired,\n};\n\nexport default EditWindow;\n","import React, { useEffect, useReducer, createRef, useRef } from 'react';\nimport * as utils from '../../actions/editor';\nimport './Editor.css';\nimport entryFields from '../../utils/entryFields';\nimport FileList from './FileList';\nimport EntryList from './EntryList';\nimport InfoList from './InfoList';\nimport EditWindow from './EditWindow';\n\nfunction editorReducer(state, action) {\n  // console.log(action.type.toUpperCase())\n  // console.log(action)\n  switch (action.type) {\n    //\n    // File List\n    //\n    case 'setUser': {\n      return { ...state, user: action.user };\n    }\n    case 'loadNewFiles': {\n      return {\n        ...state,\n        isLoading: true,\n      };\n    }\n    case 'load': {\n      const selectedFile = state.selectedFile\n        ? action.files.find((file) => file._id === state.selectedFile._id)\n        : null;\n      return {\n        ...state,\n        isLoading: false,\n        fileList: action.files,\n        groups: action.groups,\n        selectedFile,\n        selectedGroup: 'user',\n      };\n    }\n    case 'inputName': {\n      return {\n        ...state,\n        inputName: action.value,\n      };\n    }\n    case 'select': {\n      const selectedFile =\n        state.selectedFile && action.file._id === state.selectedFile._id\n          ? null\n          : action.file;\n      const name = selectedFile ? selectedFile.bibtexdatabasename : '';\n      return {\n        ...state,\n        uploadedFile: null,\n        selectedFile,\n        inputName: name,\n        inputSearch: '',\n        newEntry: null,\n      };\n    }\n    case 'upload': {\n      if (action.file.type !== 'text/x-bibtex') {\n        return {\n          ...state,\n          errorMessage: 'Uploaded file is not bibtex',\n        };\n      }\n      return {\n        ...state,\n        uploadedFile: action.file,\n        inputName: action.file.name.split('.').slice(0, -1).join('.'),\n      };\n    }\n    case 'delete': {\n      if (!state.selectedFile)\n        return {\n          ...state,\n          errorMessage: 'No Database selected',\n        };\n      return {\n        ...state,\n        isDeletingFile: true,\n      };\n    }\n    case 'save': {\n      if (!state.inputName)\n        return {\n          ...state,\n          errorMessage: 'Database name cannot be empty',\n        };\n      if (state.uploadedFile) {\n        return {\n          ...state,\n          isUploadingFile: true,\n        };\n      } else if (state.selectedFile) {\n        return {\n          ...state,\n          isSavingFile: true,\n        };\n      } else {\n        return {\n          ...state,\n          isCreatingFile: true,\n        };\n      }\n    }\n    case 'finishDeleting': {\n      if (!action.ok) {\n        return {\n          ...state,\n          isDeletingFile: false,\n          errorMessage: action.err,\n        };\n      }\n      return {\n        ...state,\n        isDeletingFile: false,\n        selectedFile: null,\n        isLoading: true,\n        inputName: '',\n      };\n    }\n    case 'finishSaving': {\n      if (!action.ok) {\n        return {\n          ...state,\n          isSavingFile: false,\n          errorMessage: action.err,\n        };\n      }\n      return {\n        ...state,\n        isSavingFile: false,\n        selectedFile: action.file,\n        isLoading: true,\n      };\n    }\n    case 'finishCreating': {\n      if (!action.ok) {\n        return {\n          ...state,\n          isCreatingFile: false,\n          errorMessage: action.err,\n        };\n      }\n      return {\n        ...state,\n        isCreatingFile: false,\n        selectedFile: action.file,\n        isLoading: true,\n        inputName: action.file.bibtexdatabasename,\n      };\n    }\n    case 'finishUploading': {\n      if (!action.ok) {\n        return {\n          ...state,\n          isUploadingFile: false,\n          uploadedFile: null,\n          errorMessage: action.err,\n        };\n      }\n      return {\n        ...state,\n        isUploadingFile: false,\n        uploadedFile: null,\n        isLoading: true,\n        selectedFile: action.file,\n        inputName: action.file.bibtexdatabasename,\n      };\n    }\n    //\n    // Entry List\n    //\n    case 'selectEntry': {\n      const selectedEntry =\n        state.selectedEntry && action.entry._id === state.selectedEntry._id\n          ? null\n          : action.entry;\n      return {\n        ...state,\n        selectedEntry,\n        newEntry: null,\n        entryChanges: selectedEntry,\n      };\n    }\n    case 'inputSearch': {\n      return {\n        ...state,\n        inputSearch: action.value,\n      };\n    }\n    case 'selectNew': {\n      const newEntry = { entryType: action.value };\n      return {\n        ...state,\n        newEntry,\n        selectedEntry: null,\n        entryChanges: {\n          ...newEntry,\n          entryTags: {},\n          citationKey: '',\n        },\n      };\n    }\n    case 'unselectNew': {\n      return {\n        ...state,\n        newEntry: null,\n      };\n    }\n    //\n    // Info List\n    //\n    case 'inputCitationKey': {\n      return {\n        ...state,\n        entryChanges: {\n          ...state.entryChanges,\n          citationKey: action.value,\n        },\n      };\n    }\n    case 'inputTag': {\n      return {\n        ...state,\n        entryChanges: {\n          ...state.entryChanges,\n          entryTags: {\n            ...state.entryChanges.entryTags,\n            [action.tag]: action.value,\n          },\n        },\n      };\n    }\n    case 'deleteEntry': {\n      if (state.newEntry) {\n        return {\n          ...state,\n          newEntry: null,\n        };\n      }\n      return {\n        ...state,\n        isDeletingEntry: true,\n      };\n    }\n    case 'saveEntry': {\n      for (let tag of entryFields[state.entryChanges.entryType].required) {\n        if (\n          !state.entryChanges.entryTags[tag] ||\n          state.entryChanges.entryTags[tag] === ''\n        )\n          return {\n            ...state,\n            errorMessage: `Entry field '${tag}' cannot be empty`,\n          };\n      }\n      if (state.entryChanges.citationKey === '')\n        return {\n          ...state,\n          errorMessage: `Citation key cannot be empty`,\n        };\n      if (state.newEntry) {\n        return {\n          ...state,\n          isCreatingEntry: true,\n        };\n      }\n      return {\n        ...state,\n        isSavingEntry: true,\n      };\n    }\n    case 'finishDeletingEntry': {\n      if (!action.ok) {\n        return {\n          ...state,\n          isDeletingEntry: false,\n          errorMessage: action.err,\n        };\n      }\n      return {\n        ...state,\n        isDeletingEntry: false,\n        selectedEntry: null,\n        entryChanges: null,\n        isLoading: true,\n      };\n    }\n    case 'finishCreatingEntry': {\n      if (!action.ok) {\n        return {\n          ...state,\n          isCreatingEntry: false,\n          errorMessage: action.err,\n        };\n      }\n      return {\n        ...state,\n        isCreatingEntry: false,\n        selectedEntry: action.entry,\n        inputSearch: '',\n        entryChanges: action.entry,\n        isLoading: true,\n        newEntry: null,\n      };\n    }\n    case 'finishSavingEntry': {\n      if (!action.ok) {\n        return {\n          ...state,\n          isSavingEntry: false,\n          windowOpened: false,\n          errorMessage: action.err,\n        };\n      }\n      return {\n        ...state,\n        isSavingEntry: false,\n        windowOpened: false,\n        selectedEntry: action.entry,\n        entryChanges: action.entry,\n        isLoading: true,\n      };\n    }\n    case 'selectGroup': {\n      console.log('GROUP');\n      console.log(action);\n      return {\n        ...state,\n        selectedGroup: action.group,\n      };\n    }\n    default:\n      return state;\n    //\n    // Edit window\n    //\n    case 'openWindow': {\n      return {\n        ...state,\n        windowOpened: true,\n      };\n    }\n    case 'closeWindow': {\n      return {\n        ...state,\n        windowOpened: false,\n      };\n    }\n    case 'showError': {\n      return {\n        ...state,\n        errorMessage: action.error,\n      };\n    }\n    case 'removeError': {\n      return {\n        ...state,\n        errorMessage: null,\n      };\n    }\n  }\n}\n\nconst Editor = () => {\n  const initialState = {\n    user: null,\n    groups: null,\n    windowOpened: false,\n    selectedGroup: 'user',\n    isLoading: true,\n    isDeletingFile: false,\n    isDeletingEntry: false,\n    isUploadingFile: false,\n    isSavingFile: false,\n    isSavingEntry: false,\n    isCreatingFile: false,\n    isCreatingEntry: false,\n    selectedFile: null,\n    selectedEntry: null,\n    entryChanges: null,\n    newEntry: null,\n    uploadedFile: null,\n    inputName: '',\n    inputSearch: '',\n    errorMessage: null,\n    isErrorAppearing: false,\n  };\n  const [state, dispatch] = useReducer(editorReducer, initialState);\n  const timeout = useRef({ error: null, check: null });\n  const intervalTime = 5 * 1000;\n\n  // USER\n  useEffect(() => {\n    const fetchUser = async () => {\n      const user = await utils.getUser();\n      dispatch({ type: 'setUser', user });\n    };\n    fetchUser();\n  }, []);\n  // AUTO REFRESH\n  useEffect(() => {\n    const checkFiles = async () => {\n      console.log('CHECKING');\n      const files = await utils.getDatabases();\n      if (!utils.compareFileLists(state.fileList, files)) {\n        dispatch({ type: 'loadNewFiles' });\n      }\n    };\n    clearInterval(timeout.current.check);\n    timeout.current.check = setInterval(checkFiles, intervalTime);\n  }, [intervalTime, state.fileList]);\n  // FETCH\n  useEffect(() => {\n    const fetchFiles = async () => {\n      const files = await utils.getDatabases();\n      const groups = await utils.getGroups();\n      dispatch({ type: 'load', files, groups });\n    };\n    if (state.isLoading) fetchFiles();\n  }, [state.isLoading]);\n  // DELETE FILE\n  useEffect(() => {\n    const deleteFile = async () => {\n      const res = await utils.deleteDatabase(state.selectedFile._id);\n      const err = res.data.error ? res.data.error.reason : null;\n      dispatch({ type: 'finishDeleting', ok: res.data.ok, err });\n    };\n    if (state.isDeletingFile) deleteFile();\n  }, [state.isDeletingFile, state.selectedFile]);\n  // CREATE FILE\n  useEffect(() => {\n    const createFile = async () => {\n      if (state.selectedGroup === 'user') {\n        const res = await utils.createDatabase(state.inputName);\n        const err = res.data.error ? res.data.error.reason : null;\n        dispatch({\n          type: 'finishCreating',\n          ok: res.data.ok,\n          file: res.data.response,\n          err,\n        });\n      } else {\n        const res = await utils.createDatabase(\n          state.inputName,\n          state.selectedGroup\n        );\n        const err = res.data.error ? res.data.error.reason : null;\n        dispatch({\n          type: 'finishCreating',\n          ok: res.data.ok,\n          file: res.data.response,\n          err,\n        });\n      }\n    };\n    if (state.isCreatingFile) createFile();\n  }, [state.isCreatingFile, state.inputName, state.selectedGroup]);\n  // UPLOAD FILE\n  useEffect(() => {\n    const uploadFile = async () => {\n      const fileReader = new FileReader();\n      fileReader.readAsText(state.uploadedFile);\n      fileReader.onload = async () => {\n        const res = await utils.uploadDatabase(\n          fileReader.result,\n          state.inputName,\n          state.selectedGroup\n        );\n        const err = res.data.error ? res.data.error.reason : null;\n        dispatch({\n          type: 'finishUploading',\n          ok: res.data.ok,\n          file: res.data.response,\n          err,\n        });\n      };\n      fileReader.onerror = () => {\n        console.log(fileReader.error);\n        dispatch({\n          type: 'finishUploading',\n          ok: false,\n          err: 'Failed to read Bibtex file',\n        });\n      };\n    };\n    if (state.isUploadingFile) uploadFile();\n  }, [\n    state.isUploadingFile,\n    state.uploadedFile,\n    state.inputName,\n    state.selectedGroup,\n  ]);\n  // CHANGE NAME\n  useEffect(() => {\n    const changeName = async () => {\n      const res = await utils.changeName(\n        state.inputName,\n        state.selectedFile._id\n      );\n      const err = res.data.error ? res.data.error.reason : null;\n      dispatch({\n        type: 'finishSaving',\n        ok: res.data.ok,\n        file: res.data.response,\n        err,\n      });\n    };\n    if (state.isSavingFile) changeName();\n  }, [state.isSavingFile, state.inputName, state.selectedFile]);\n  // DELETE ENTRY\n  useEffect(() => {\n    const deleteEntry = async () => {\n      const res = await utils.deleteEntry(\n        state.selectedEntry._id,\n        state.selectedFile._id\n      );\n      const err = res.data.error ? res.data.error.reason : null;\n      dispatch({ type: 'finishDeletingEntry', ok: res.data.ok, err });\n    };\n    if (state.isDeletingEntry) deleteEntry();\n  }, [state.isDeletingEntry, state.selectedFile, state.selectedEntry]);\n  // CREATE ENTRY\n  useEffect(() => {\n    const createEntry = async () => {\n      const res = await utils.addEntry(\n        state.entryChanges,\n        state.selectedFile._id\n      );\n      const err = res.data.error ? res.data.error.reason : null;\n      dispatch({\n        type: 'finishCreatingEntry',\n        ok: res.data.ok,\n        entry: res.data.response,\n        err,\n      });\n    };\n    if (state.isCreatingEntry) createEntry();\n  }, [state.isCreatingEntry, state.entryChanges, state.selectedFile]);\n  // SAVE ENTRY\n  useEffect(() => {\n    const saveEntry = async () => {\n      const res = await utils.changeEntry(\n        state.entryChanges,\n        state.selectedFile._id\n      );\n      const err = res.data.error ? res.data.error.reason : null;\n      dispatch({\n        type: 'finishSavingEntry',\n        ok: res.data.ok,\n        entry: res.data.response,\n        err,\n      });\n    };\n    if (state.isSavingEntry) saveEntry();\n  }, [state.isSavingEntry, state.entryChanges, state.selectedFile]);\n  // ERROR\n  useEffect(() => {\n    const onTimeout = () => {\n      dispatch({ type: 'removeError' });\n    };\n\n    if (state.errorMessage) {\n      if (timeout.current.error) {\n        clearTimeout(timeout.current.error);\n      }\n      timeout.current.error = setTimeout(onTimeout, 6000);\n    }\n  }, [state.errorMessage]);\n\n  const fileActive = !state.isLoading;\n  const entryActive = !!state.selectedFile && !state.isLoading;\n  const infoActive =\n    !!state.selectedFile &&\n    !state.isLoading &&\n    ((!!state.selectedEntry &&\n      !!state.selectedFile.entries.find(\n        (entry) => entry._id === state.selectedEntry._id\n      )) ||\n      !!state.newEntry);\n\n  const isSelectedAllowed =\n    state.selectedFile &&\n    ((state.selectedFile.user &&\n      state.selectedFile.user._id === state.user._id) ||\n      (state.selectedFile.group &&\n        (state.selectedFile.group.owner === state.user._id ||\n          state.selectedFile.group.users.includes(state.user._id))));\n\n  return (\n    <div className='Editor'>\n      <div className='main-part'>\n        <FileList\n          active={fileActive}\n          isSelectedAllowed={isSelectedAllowed}\n          selectedFile={state.selectedFile}\n          uploading={!!state.uploadedFile}\n          inputName={state.inputName}\n          fileList={state.fileList}\n          groups={state.groups}\n          user={state.user}\n          dispatch={dispatch}\n        />\n        <EntryList\n          active={entryActive}\n          isSelectedAllowed={isSelectedAllowed}\n          file={state.selectedFile}\n          selectedEntry={state.selectedEntry}\n          newEntry={state.newEntry}\n          search={state.inputSearch}\n          dispatch={dispatch}\n        />\n        <InfoList\n          active={infoActive}\n          isSelectedAllowed={isSelectedAllowed}\n          entry={state.selectedEntry || state.newEntry}\n          entryChanges={state.entryChanges}\n          dispatch={dispatch}\n        />\n        <EditWindow\n          active={state.windowOpened}\n          entry={state.selectedEntry || state.newEntry}\n          entryChanges={state.entryChanges}\n          dispatch={dispatch}\n        />\n      </div>\n      <div\n        className='editor-error-message'\n        style={{\n          bottom: state.errorMessage ? '60px' : '30px',\n          opacity: state.errorMessage ? '1' : '0',\n        }}\n      >\n        {state.errorMessage || ''}\n      </div>\n    </div>\n  );\n};\n\nEditor.propTypes = {};\n\nexport default Editor;\n","import axios from 'axios';\nimport { uploadDatabase } from './editor';\nimport bibtexParse from 'bibtex-parser-js';\nimport entryFields from '../utils/entryFields';\nimport reference from '@devisle/reference-js';\nimport { xmlToBib } from './bibtex';\n\nconst typeChange = {\n  ARTICLE: 'article',\n  BOOK: 'book',\n  BOOKLET: 'booklet',\n  CONFERENCE: 'conference',\n  INBOOK: 'inBook',\n  INCOLLECTION: 'inCollection',\n  INPROCEEDINGS: 'inProceedings',\n  MANUAL: 'manual',\n  MASTERSTHESIS: 'mastersThesis',\n  MISC: 'misc',\n  ONLINE: 'online',\n  PHDTHESIS: 'phdThesis',\n  PROCEEDINGS: 'proceedings',\n};\n\nconst extractDatabase = async (bibtexFile, name, group) => {\n  console.log('GROUP');\n  console.log(group);\n  const bibtexJSON = bibtexParse.toJSON(bibtexFile);\n  console.log(bibtexJSON);\n  const entries = [];\n  for (let entry of bibtexJSON) {\n    entry.entryType = typeChange[entry.entryType];\n    if (!entryFields[entry.entryType]) {\n      continue;\n    }\n    for (let tag of Object.keys(entry.entryTags)) {\n      if (\n        entryFields[entry.entryType].required.includes(tag.toLowerCase()) ||\n        entryFields[entry.entryType].extra.includes(tag.toLowerCase())\n      ) {\n        entry.entryTags[tag.toLowerCase()] = entry.entryTags[tag];\n      }\n      delete entry.entryTags[tag];\n    }\n    let contains = true;\n    for (let tag of entryFields[entry.entryType].required) {\n      if (!entry.entryTags[tag]) {\n        contains = false;\n      }\n    }\n    if (contains) entries.push(entry);\n  }\n  const database = { bibtexdatabasename: name, entries };\n  try {\n    const res = await axios.post(`/api/database/extract`, {\n      ...database,\n      group: group === 'user' ? null : group,\n    });\n    console.log(res.data);\n    return res;\n  } catch (err) {\n    console.log(err.response);\n    return err.response;\n  }\n};\n\nexport const getFiles = async () => {\n  try {\n    const res = await axios.get('/api/papers/files');\n    return res;\n  } catch (err) {\n    return err.response;\n  }\n};\n\nexport const deleteFile = async (id) => {\n  try {\n    const res = await axios.delete(`/api/papers/files/${id}`);\n    return res;\n  } catch (err) {\n    return err.response;\n  }\n};\n\nexport const saveFile = async (file, changeProgress) => {\n  const data = new FormData();\n  data.append('file', file);\n  try {\n    const res = await axios.post('/api/papers/files', data, {\n      onUploadProgress: (progressEvent) => {\n        const totalLength = progressEvent.lengthComputable\n          ? progressEvent.total\n          : progressEvent.target.getResponseHeader('content-length') ||\n            progressEvent.target.getResponseHeader(\n              'x-decompressed-content-length'\n            );\n        console.log('onUploadProgress', totalLength);\n        if (totalLength !== null) {\n          changeProgress(\n            Math.round((progressEvent.loaded * 100) / totalLength)\n          );\n        }\n      },\n    });\n    return res;\n  } catch (err) {\n    return err.response;\n  }\n};\n\nconst extractFile = async (fileId) => {\n  const blob = await fetch(`/api/papers/files/${fileId}`).then((res) =>\n    res.blob()\n  );\n\n  const formData = new FormData();\n  formData.append('input', blob);\n\n  console.log('SENT');\n  const res = await fetch(\n    `http://cloud.science-miner.com/grobid/api/processReferences`,\n    {\n      method: 'POST',\n      body: formData,\n      headers: {\n        Accept: 'application/x-bibtex',\n      },\n    }\n  );\n  if (res.status !== 200) return { ok: false, err: 'No references found' };\n  const bibBlob = await res.blob();\n  return { ok: true, blob: bibBlob };\n};\n\nconst extractHeader = async (fileId) => {\n  const blob = await fetch(`/api/papers/files/${fileId}`).then((res) =>\n    res.blob()\n  );\n\n  const formData = new FormData();\n  formData.append('input', blob);\n  formData.append('consolidateHeader', '1');\n\n  console.log('SENT');\n  const res = await fetch(\n    `http://cloud.science-miner.com/grobid/api/processHeaderDocument`,\n    {\n      method: 'POST',\n      body: formData,\n    }\n  ).then((res) => res.text());\n  const bibtex = xmlToBib(res);\n  return bibtex;\n};\n\nconst readUploadedFileAsText = (inputFile) => {\n  const temporaryFileReader = new FileReader();\n  return new Promise((resolve, reject) => {\n    temporaryFileReader.onerror = () => {\n      temporaryFileReader.abort();\n      reject(new DOMException('Problem parsing input file.'));\n    };\n\n    temporaryFileReader.onload = () => {\n      resolve(temporaryFileReader.result);\n    };\n    temporaryFileReader.readAsText(inputFile);\n  });\n};\n\nexport const extractAndUploadBibtex = async (fileId, databaseName, group) => {\n  try {\n    const blob = await extractFile(fileId);\n    if (!blob.ok) return { data: blob };\n    const bibtexFile = await readUploadedFileAsText(blob.blob);\n    const res = await extractDatabase(bibtexFile, databaseName, group);\n    return res;\n  } catch (err) {\n    return { data: { ok: false, err: err.message } };\n  }\n};\n\nexport const extractAndUploadHeader = async (\n  fileId,\n  databaseName,\n  group,\n  citationKey\n) => {\n  try {\n    const bibtex = await extractHeader(fileId);\n    if (!bibtex.ok) {\n      return {\n        data: { ok: false, err: 'Failed to extract citation information' },\n      };\n    }\n    const entry = {\n      entryType: 'article',\n      entryTags: bibtex.entry,\n      citationKey: citationKey,\n    };\n    const database = { bibtexdatabasename: databaseName, entry };\n    try {\n      const res = await axios.post(`/api/database/header`, {\n        ...database,\n        group: group === 'user' ? null : group,\n      });\n      console.log(res.data);\n      return res;\n    } catch (err) {\n      console.log(err.response);\n      return {\n        data: {\n          ok: false,\n          err: err.response.data.error.reason,\n        },\n      };\n    }\n  } catch (err) {\n    console.log(err);\n    return { data: { ok: false, err: err.message } };\n  }\n};\n\nexport const getDatabases = async () => {\n  const res = await axios.get('/api/database/all');\n  return res.data.response;\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport './PaperTableRow.css';\n\nconst PaperTableRow = (props) => {\n  const d = new Date(props.paper.file.uploadDate);\n  return (\n    <tr>\n      <td>{props.paper.filename}</td>\n      <td>{`${d.toLocaleDateString()} ${d.toLocaleTimeString()}`}</td>\n      <td>{Math.round(props.paper.file.length / 100) / 10 + 'KB'}</td>\n      <td>\n        <div className='paper-buttons'>\n          <button\n            onClick={(e) =>\n              props.dispatch({\n                type: 'deleteFile',\n                file: props.paper,\n              })\n            }\n            className='remove-btn'\n          >\n            Remove\n          </button>\n          <button\n            onClick={(e) => {\n              props.dispatch({\n                type: 'openWindow',\n                file: props.paper,\n              });\n            }}\n            className='extract-btn'\n          >\n            Extract\n          </button>\n          <a\n            className='download-paper-btn'\n            href={props.paper.url}\n            download={`${props.paper.filename}`}\n          >\n            Download\n          </a>\n        </div>\n      </td>\n    </tr>\n  );\n};\n\nPaperTableRow.propTypes = {\n  paper: PropTypes.object.isRequired,\n  dispatch: PropTypes.any.isRequired,\n  downloadString: PropTypes.any,\n};\n\nexport default PaperTableRow;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport './ExtractWindow.css';\n\nconst ExtractWindow = (props) => {\n  if (!props.active) {\n    return <div className='paper-window disabled'></div>;\n  }\n  const groupOptions = props.groups.map((group, i) => {\n    return {\n      key: i,\n      text: group.name,\n      value: group._id,\n    };\n  });\n  groupOptions.push({\n    key: props.groups.length,\n    text: 'Personal',\n    value: 'personal',\n  });\n  const options = props.databases\n    .filter((database) => {\n      if (props.selectedGroup === 'personal') {\n        return database.user;\n      }\n      return database.group && database.group._id === props.selectedGroup;\n    })\n    .map((database, i) => {\n      return {\n        key: i,\n        text: database.bibtexdatabasename,\n        value: database.bibtexdatabasename,\n      };\n    });\n  options.push({\n    key: props.databases.length,\n    text: 'New database',\n    value: 'new',\n  });\n\n  return (\n    <div className='paper-window'>\n      <div className='paper-window-file'>{props.file.filename}</div>\n      <div className='select-method-label'>Select Extraction Method</div>\n      <div className='select-method-btn'>\n        <select\n          className='select-method'\n          placeholder='Select extraction method'\n          value={props.method}\n          onChange={(e) =>\n            props.dispatch({\n              type: 'selectMethod',\n              value: e.target.value,\n            })\n          }\n        >\n          <option value='header'>Single reference (Header)</option>\n          <option value='references'>All references</option>\n        </select>\n      </div>\n      <div className='select-group-label'>Select a group</div>\n      <div className='select-group-btn'>\n        <select\n          className='select-group'\n          placeholder='Select a group'\n          value={props.selectedGroup}\n          onChange={(e) =>\n            props.dispatch({\n              type: 'selectGroup',\n              value: e.target.value,\n            })\n          }\n        >\n          {groupOptions.map((option) => (\n            <option value={option.value} key={option.key}>\n              {option.text}\n            </option>\n          ))}\n        </select>\n      </div>\n      <div className='select-database-label'>Select a database</div>\n      <div className='select-database-btn'>\n        <select\n          className='select-database'\n          placeholder='Select a database'\n          disabled={!props.selectedGroup}\n          value={props.selected || 'new'}\n          onChange={(e) =>\n            props.dispatch({\n              type: 'selectDatabase',\n              value: e.target.value,\n            })\n          }\n        >\n          {options.map((option) => (\n            <option value={option.value} key={option.key}>\n              {option.text}\n            </option>\n          ))}\n        </select>\n      </div>\n      <div className='name-label'>Enter a name</div>\n      <input\n        className='name-input'\n        id='database-name'\n        autoComplete='off'\n        readOnly={props.selected && props.selected !== 'new'}\n        value={props.inputValue}\n        onChange={(e) =>\n          props.dispatch({\n            type: 'inputName',\n            value: e.target.value,\n          })\n        }\n      ></input>\n      <div\n        className={`extra-input ${props.method === 'header' ? '' : 'disabled'}`}\n      >\n        <div className='name-label'>Enter Citation Key</div>\n        <input\n          className='name-input'\n          id='citation-key'\n          autoComplete='off'\n          placeholder='Enter new Citation Key'\n          readOnly={props.method !== 'header'}\n          value={props.citationKey}\n          onChange={(e) =>\n            props.dispatch({\n              type: 'changeCitationKey',\n              value: e.target.value,\n            })\n          }\n        ></input>\n      </div>\n\n      <div className={`message-div ${props.windowMessage.type || ''}`}>\n        {props.windowMessage.message || ''}\n      </div>\n      <button\n        className='paper-extract'\n        onClick={(e) =>\n          props.dispatch({\n            type: 'extractBibtex',\n          })\n        }\n      >\n        Extract\n      </button>\n    </div>\n  );\n};\n\nExtractWindow.propTypes = {\n  active: PropTypes.bool.isRequired,\n  file: PropTypes.object,\n  databases: PropTypes.array,\n  groups: PropTypes.array,\n  citationKey: PropTypes.string.isRequired,\n  selectedGroup: PropTypes.any,\n  inputValue: PropTypes.string.isRequired,\n  selected: PropTypes.string,\n  windowMessage: PropTypes.object.isRequired,\n  dispatch: PropTypes.any.isRequired,\n  method: PropTypes.string.isRequired,\n};\n\nexport default ExtractWindow;\n","import React, { useEffect, useReducer } from 'react';\nimport * as utils from '../../actions/paper';\nimport { getGroups } from '../../actions/editor';\nimport { Table } from 'react-bootstrap';\nimport PaperTableRow from './PaperTableRow';\nimport './Paper.css';\nimport ExtractWindow from './ExtractWindow';\n\nfunction paperReducer(state, action) {\n  switch (action.type) {\n    case 'extractBibtex': {\n      if (state.isExtracting) return state;\n      return {\n        ...state,\n        isExtracting: true,\n        windowMessage: {\n          type: 'loading',\n          message: 'Extracting...',\n        },\n      };\n    }\n    case 'changeProgress': {\n      return {\n        ...state,\n        progress: action.progress,\n      };\n    }\n    case 'setDatabases': {\n      return {\n        ...state,\n        databases: action.databases,\n      };\n    }\n    case 'setGroups': {\n      return {\n        ...state,\n        groups: action.groups,\n      };\n    }\n    case 'selectGroup': {\n      return {\n        ...state,\n        selectedGroup: action.value,\n        selected: 'new',\n        windowMessage: {},\n      };\n    }\n    case 'selectDatabase': {\n      return {\n        ...state,\n        selected: action.value,\n        inputName: action.value !== 'new' ? action.value : '',\n        windowMessage: {},\n      };\n    }\n    case 'inputName': {\n      return {\n        ...state,\n        inputName: action.value,\n        windowMessage: {},\n      };\n    }\n    case 'searchName': {\n      return {\n        ...state,\n        searchName: action.value,\n      };\n    }\n    case 'uploadFile': {\n      console.log(action.file);\n      if (!action.file || action.file.type !== 'application/pdf')\n        return {\n          ...state,\n          uploadedFile: null,\n        };\n      return {\n        ...state,\n        uploadedFile: action.file,\n      };\n    }\n    case 'closeUploaded': {\n      return {\n        ...state,\n        uploadedFile: null,\n      };\n    }\n    case 'saveFile': {\n      return {\n        ...state,\n        isSaving: true,\n        progress: 0,\n      };\n    }\n    case 'deleteFile': {\n      return {\n        ...state,\n        isDeleting: true,\n        deletedFile: action.file,\n      };\n    }\n    case 'openWindow': {\n      return {\n        ...state,\n        windowOpened: true,\n        extractedFile: action.file,\n      };\n    }\n    case 'closeWindow': {\n      if (state.isExtracting) return state;\n      return {\n        ...state,\n        windowOpened: false,\n        windowMessage: {},\n      };\n    }\n    case 'finishLoading': {\n      console.log(action.papers);\n      return {\n        ...state,\n        isLoading: false,\n        papers: action.papers,\n        windowMessage: {},\n      };\n    }\n    case 'finishDeleting': {\n      if (!action.ok) return { ...state, isDeleting: false };\n      return {\n        ...state,\n        isDeleting: false,\n        isLoading: true,\n      };\n    }\n    case 'finishSaving': {\n      if (!action.ok) return { ...state, isSaving: false };\n      return {\n        ...state,\n        isSaving: false,\n        isLoading: true,\n        progress: null,\n      };\n    }\n    case 'finishExtracting': {\n      if (!action.ok)\n        return {\n          ...state,\n          windowMessage: {\n            type: 'err',\n            message: action.err,\n          },\n          isExtracting: false,\n        };\n      return {\n        ...state,\n        isExtracting: false,\n        windowMessage: {\n          type: 'success',\n          message: 'Reference(s) extracted',\n        },\n      };\n    }\n    case 'selectMethod': {\n      return {\n        ...state,\n        selectedMethod: action.value,\n        selectedCitationKey: '',\n      };\n    }\n    case 'changeCitationKey': {\n      return {\n        ...state,\n        selectedCitationKey: action.value,\n      };\n    }\n\n    default:\n      return state;\n  }\n}\n\nconst Paper = () => {\n  const initialState = {\n    progress: null,\n    isLoading: true,\n    isDeleting: false,\n    isSaving: false,\n    isExtracting: false,\n    windowOpened: false,\n    papers: null,\n    uploadedFile: null,\n    deletedFile: null,\n    extractedFile: null,\n    groups: null,\n    databases: null,\n    selectedMethod: 'header',\n    selectedGroup: 'personal',\n    selected: null,\n    inputName: '',\n    searchName: '',\n    windowMessage: {},\n    selectedCitationKey: '',\n  };\n\n  const [state, dispatch] = useReducer(paperReducer, initialState);\n\n  useEffect(() => {\n    const setDatabases = async () => {\n      const databases = await utils.getDatabases();\n      dispatch({\n        type: 'setDatabases',\n        databases,\n      });\n    };\n    const setGroups = async () => {\n      const groups = await getGroups();\n      dispatch({\n        type: 'setGroups',\n        groups,\n      });\n    };\n    setGroups();\n    setDatabases();\n  }, []);\n  useEffect(() => {\n    const loadFiles = async () => {\n      const res = await utils.getFiles();\n      const papers = res.data.response;\n      const promises = [];\n      console.log(papers);\n      for (let paper of papers) {\n        promises.push(\n          fetch(`/api/papers/files/${paper.file._id}`)\n            .then((res) => res.blob())\n            .then((blob) => {\n              const url = window.URL.createObjectURL(blob);\n              paper.url = url;\n            })\n        );\n      }\n      console.log(papers);\n      await Promise.all(promises);\n      dispatch({\n        type: 'finishLoading',\n        papers,\n      });\n    };\n    if (state.isLoading) loadFiles();\n  }, [state.isLoading]);\n  useEffect(() => {\n    const deleteFile = async () => {\n      const res = await utils.deleteFile(state.deletedFile.file._id);\n      dispatch({\n        type: 'finishDeleting',\n        ok: res.data.ok,\n      });\n    };\n    if (state.isDeleting) deleteFile();\n  }, [state.isDeleting, state.deletedFile]);\n  useEffect(() => {\n    const saveFile = async () => {\n      const res = await utils.saveFile(state.uploadedFile, (n) => {\n        dispatch({\n          type: 'changeProgress',\n          progress: n,\n        });\n      });\n      dispatch({\n        type: 'finishSaving',\n        ok: res.data.ok,\n        file: res.data.response,\n      });\n    };\n    if (state.isSaving) saveFile();\n  }, [state.isSaving, state.uploadedFile]);\n  useEffect(() => {\n    const extractBibtex = async () => {\n      if (!state.inputName) {\n        return dispatch({\n          type: 'finishExtracting',\n          ok: false,\n          err: 'Database name cannot be empty',\n        });\n      }\n      console.log(state.inputName);\n      if (state.selectedMethod === 'references') {\n        const res = await utils.extractAndUploadBibtex(\n          state.extractedFile.file._id,\n          state.inputName,\n          state.selectedGroup === 'personal' ? null : state.selectedGroup\n        );\n        console.log(res);\n        console.log(res.data);\n        dispatch({\n          type: 'finishExtracting',\n          ok: res.data.ok,\n          err: res.data.err,\n          file: res.data.response,\n        });\n      } else {\n        if (state.selectedCitationKey === '') {\n          return dispatch({\n            type: 'finishExtracting',\n            ok: false,\n            err: 'Citation key cannot be empty',\n          });\n        }\n        const res = await utils.extractAndUploadHeader(\n          state.extractedFile.file._id,\n          state.inputName,\n          state.selectedGroup === 'personal' ? null : state.selectedGroup,\n          state.selectedCitationKey\n        );\n        console.log(res);\n        console.log(res.data);\n        dispatch({\n          type: 'finishExtracting',\n          ok: res.data.ok,\n          err: res.data.err,\n          file: res.data.response,\n        });\n      }\n    };\n    if (state.isExtracting) extractBibtex();\n  }, [\n    state.isExtracting,\n    state.extractedFile,\n    state.selectedCitationKey,\n    state.inputName,\n    state.selectedGroup,\n    state.selectedMethod,\n  ]);\n\n  if (state.isLoading || !state.papers) {\n    return <div className='Paper'>Loading</div>;\n  }\n\n  const paperFilter = (paper) => {\n    if (state.searchName === '') {\n      return true;\n    }\n    return paper.filename.includes(state.searchName);\n  };\n\n  const dataTable = state.papers\n    .filter(paperFilter)\n    .map((paper) => {\n      return (\n        <PaperTableRow paper={paper} dispatch={dispatch} key={paper._id} />\n      );\n    })\n    .reverse();\n  const uploadText = state.uploadedFile\n    ? state.uploadedFile.name\n    : 'No file selected';\n\n  return (\n    <div className='Paper'>\n      <div\n        className={\n          state.windowOpened ? 'paper-layout' : 'paper-layout disabled'\n        }\n        onClick={(e) => dispatch({ type: 'closeWindow' })}\n      ></div>\n      <ExtractWindow\n        active={state.windowOpened}\n        file={state.extractedFile}\n        groups={state.groups}\n        citationKey={state.selectedCitationKey}\n        method={state.selectedMethod}\n        selectedGroup={state.selectedGroup}\n        databases={state.databases}\n        inputValue={state.inputName}\n        windowMessage={state.windowMessage}\n        selected={state.selected}\n        dispatch={dispatch}\n      />\n      <div className='w3-light-grey'>\n        <div\n          className={`w3-container w3-blue w3-center ${\n            state.progress ? '' : 'disabled'\n          }`}\n          style={{\n            width: state.progress || 0 + '%',\n          }}\n        >\n          {state.progress || 0}%\n        </div>\n      </div>\n      <div className='paper-header'>\n        <div className='search-label'>Search by file name: </div>\n        <input\n          className='search-paper'\n          value={state.searchName}\n          onChange={(e) =>\n            dispatch({\n              type: 'searchName',\n              value: e.target.value,\n            })\n          }\n        ></input>\n        <input\n          type='file'\n          id='paper-file'\n          className='upload-input'\n          onChange={(e) =>\n            dispatch({\n              type: 'uploadFile',\n              file: e.target.files[0],\n            })\n          }\n        ></input>\n        <label htmlFor='paper-file' className='upload-label'>\n          Choose a file\n        </label>\n        <button\n          className={`upload-file-btn ${state.uploadedFile ? '' : 'disabled'}`}\n          onClick={(e) =>\n            dispatch({\n              type: 'saveFile',\n            })\n          }\n        >\n          Upload\n        </button>\n        <div\n          className={`upload-file-name ${\n            state.uploadedFile ? 'activated' : ''\n          }`}\n        >\n          {uploadText}\n        </div>\n        <button\n          className={`remove-uploaded ${state.uploadedFile ? '' : 'disabled'}`}\n          onClick={(e) =>\n            dispatch({\n              type: 'closeUploaded',\n            })\n          }\n        >\n          x\n        </button>\n      </div>\n      <div className='paper-wrapper'>\n        <Table className='paper-table' striped bordered hover>\n          <thead>\n            <tr>\n              <th>Paper</th>\n              <th>Uploaded</th>\n              <th>Size</th>\n              <th></th>\n            </tr>\n          </thead>\n          <tbody>{dataTable}</tbody>\n        </Table>\n      </div>\n    </div>\n  );\n};\n\nexport default Paper;\n","import React from 'react';\nimport { Link, Redirect } from 'react-router-dom';\n\nconst PublicDatabases = () => (\n  <ul>\n    <li>\n      <a href='https://www.scopus.com/'>Scopus</a>\n    </li>\n    <li>\n      <a href='http://login.webofknowledge.com/error/Error?Error=IPError&PathInfo=%2F&RouterURL=http%3A%2F%2Fwww.webofknowledge.com%2F&Domain=.webofknowledge.com&Src=IP&Alias=WOK5'>\n        Web of Science\n      </a>\n    </li>\n    <li>\n      <a href='https://pubmed.ncbi.nlm.nih.gov/'>PubMed</a>\n    </li>\n    <li>\n      <a href='https://eric.ed.gov/'>ERIC</a>\n    </li>\n    <li>\n      <a href='https://ieeexplore.ieee.org/Xplore/home.jsp'>IEEE Xplore</a>\n    </li>\n    <li>\n      <a href='https://www.sciencedirect.com/'>ScienceDirect</a>\n    </li>\n    <li>\n      <a href='https://doaj.org/'>Directory of Open Access Journals (DOAJ)</a>\n    </li>\n    <li>\n      <a href='https://www.jstor.org/'>JSTOR</a>\n    </li>\n    <li>\n      <a href='https://scholar.google.com/'>Google Scholar</a>\n    </li>\n  </ul>\n);\n\nexport default PublicDatabases;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\n\nconst Alert = ({ alerts }) =>\n  alerts !== null &&\n  alerts.length > 0 &&\n  alerts.map((alert) => (\n    <div key={alert.id} className={`alert alert-${alert.alertType}`}>\n      {alert.msg}\n    </div>\n  ));\n\nAlert.propTypes = {\n  alerts: PropTypes.array.isRequired,\n};\n\nconst mapStateToProps = (state) => ({\n  alerts: state.alert,\n});\n\nexport default connect(mapStateToProps)(Alert);\n","import React from 'react';\nimport { Route, Redirect } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\n\nconst PrivateRoute = ({\n  component: Component,\n  roles,\n  auth: { isAuthenticated, loading },\n  ...rest\n}) => (\n  <Route\n    {...rest}\n    render={(props) =>\n      !isAuthenticated && !loading ? (\n        <Redirect to='/login' />\n      ) : (\n        <Component {...props} />\n      )\n    }\n  />\n);\n\nPrivateRoute.propTypes = {\n  auth: PropTypes.object.isRequired,\n};\n\nconst mapStateToProps = (state) => ({\n  auth: state.auth,\n});\n\nexport default connect(mapStateToProps)(PrivateRoute);\n","import { SET_ALERT, REMOVE_ALERT } from '../actions/types';\n\nconst initialState = [];\n\nexport default function (state = initialState, action) {\n  const { type, payload } = action;\n\n  switch (type) {\n    case SET_ALERT:\n      return [...state, payload];\n    case REMOVE_ALERT:\n      return state.filter((alert) => alert.id !== payload);\n    default:\n      return state;\n  }\n}\n","import {\n  REGISTER_SUCCESS,\n  REGISTER_FAIL,\n  USER_LOADED,\n  AUTH_ERROR,\n  LOGIN_SUCCESS,\n  LOGIN_FAIL,\n  LOGOUT,\n} from '../actions/types';\n\nconst initialState = {\n  token: localStorage.getItem('token'),\n  role: localStorage.getItem('role'),\n  isAuthenticated: null,\n  loading: true,\n  user: null,\n};\n\nexport default function (state = initialState, action) {\n  const { type, payload } = action;\n  console.log(action);\n\n  switch (type) {\n    case USER_LOADED:\n      return {\n        ...state,\n        isAuthenticated: true,\n        loading: false,\n        user: payload,\n      };\n    case REGISTER_SUCCESS:\n    case LOGIN_SUCCESS:\n      localStorage.setItem('token', payload.token);\n      localStorage.setItem('role', payload.role);\n      return {\n        ...state,\n        ...payload,\n        isAuthenticated: true,\n        loading: false,\n        role: payload.role,\n      };\n    case AUTH_ERROR:\n    case LOGIN_FAIL:\n    case LOGOUT:\n      localStorage.removeItem('token');\n      localStorage.removeItem('role');\n      return {\n        ...state,\n        token: null,\n        isAuthenticated: false,\n        loading: false,\n        role: null,\n      };\n    default:\n      return state;\n  }\n}\n","import { combineReducers } from 'redux';\nimport alert from './alert';\nimport auth from './auth';\n\nexport default combineReducers({\n  alert,\n  auth,\n});\n","import { createStore, applyMiddleware } from 'redux';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport thunk from 'redux-thunk';\nimport rootReducer from './reducers';\n\nconst initialState = {};\n\nconst middleware = [thunk];\n\nconst store = createStore(\n  rootReducer,\n  initialState,\n  composeWithDevTools(applyMiddleware(...middleware))\n);\n\nexport default store;\n","import axios from 'axios';\n\nexport const getUser = async () => {\n  const res = await axios.get('/api/user/me');\n  return res;\n};\n\nexport const getGroups = async (type) => {\n  const res = await axios.get(`/api/group/${type}`);\n  return res;\n};\n\nexport const deleteGroup = async (groupId) => {\n  try {\n    const res = await axios.delete(`/api/group/${groupId}`);\n    return res;\n  } catch (err) {\n    return err.response;\n  }\n};\n\nexport const leaveGroup = async (groupId) => {\n  try {\n    const res = await axios.post(`/api/group/leave`, {\n      id: groupId,\n    });\n    return res;\n  } catch (err) {\n    return err.response;\n  }\n};\n\nexport const joinGroup = async (groupId) => {\n  try {\n    const res = await axios.post('/api/group/join-request', {\n      id: groupId,\n    });\n    return res;\n  } catch (err) {\n    return err.response;\n  }\n};\n\nexport const createGroup = async (name) => {\n  try {\n    const res = await axios.post('/api/group/', { name });\n    return res;\n  } catch (err) {\n    return err.response;\n  }\n};\n\nexport const saveGroup = async (name, id) => {\n  try {\n    const res = await axios.put('/api/group', { name, id });\n    return res;\n  } catch (err) {\n    return err.response;\n  }\n};\n\nexport const acceptMember = async (groupId, userId) => {\n  try {\n    const res = await axios.post('/api/group/accept', { groupId, userId });\n    return res;\n  } catch (err) {\n    return err.response;\n  }\n};\n\nexport const rejectMember = async (groupId, userId) => {\n  try {\n    const res = await axios.post('/api/group/decline', { groupId, userId });\n    return res;\n  } catch (err) {\n    return err.response;\n  }\n};\n\nexport const banMember = async (groupId, userId) => {\n  try {\n    const res = await axios.post('/api/group/ban', { groupId, userId });\n    return res;\n  } catch (err) {\n    return err.response;\n  }\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport './GroupBox.css';\n\nconst GroupBox = (props) => {\n  let btnName;\n  let btnClass;\n  let isRequested = false;\n  switch (props.groupType) {\n    case '': {\n      for (const user of props.group.joinRequests) {\n        if (user._id === props.user._id) {\n          isRequested = true;\n        }\n      }\n      btnName = isRequested ? 'Requested to join' : 'Join';\n      btnClass = 'box-click-btn box-safe';\n      break;\n    }\n    case 'own': {\n      btnName = 'Delete';\n      btnClass = 'box-click-btn box-dang';\n      break;\n    }\n    case 'me': {\n      btnName = 'Leave';\n      btnClass = 'box-click-btn box-dang';\n      break;\n    }\n    default:\n      break;\n  }\n  return (\n    <div\n      className={`group-box ${props.isSelected ? 'selected-group' : ''}`}\n      onClick={(e) => {\n        if (!e.target.classList.contains('box-click-btn'))\n          props.dispatch({\n            type: 'selectGroup',\n            group: props.group,\n          });\n      }}\n    >\n      <div className='box-header'>\n        <div className='box-name'>{props.group.name}</div>\n      </div>\n      <div className='box-body'>\n        <div className='box-owner'>\n          <div className='box-owner-label'>Owner:</div>\n          <div className='box-owner-name'>{props.group.owner.name}</div>\n        </div>\n        <div className='box-members'>\n          <div className='box-members-label'>Members:</div>\n          <div className='box-members-name'>{props.group.users.length + 1}</div>\n        </div>\n      </div>\n      <button\n        className={btnClass}\n        onClick={(e) => {\n          if (!isRequested)\n            props.dispatch({\n              type: 'clickGroup',\n              group: props.group,\n            });\n        }}\n      >\n        {btnName}\n      </button>\n    </div>\n  );\n};\n\nGroupBox.propTypes = {\n  group: PropTypes.any.isRequired,\n  isSelected: PropTypes.bool,\n  groupType: PropTypes.string.isRequired,\n  user: PropTypes.any,\n  dispatch: PropTypes.any.isRequired,\n};\n\nexport default GroupBox;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport './GroupList.css';\nimport GroupBox from './GroupBox';\n\nconst GroupList = (props) => {\n  if (!props.active) return <div className='group-list'></div>;\n  return (\n    <div className='group-list'>\n      <div className='group-head'>\n        <button\n          className={`group-all ${props.selectedType === '' ? 'clicked' : ''}`}\n          onClick={(e) => props.dispatch({ type: 'selectType', value: '' })}\n        >\n          All\n        </button>\n        <button\n          className={`group-own ${\n            props.selectedType === 'own' ? 'clicked' : ''\n          }`}\n          onClick={(e) => props.dispatch({ type: 'selectType', value: 'own' })}\n        >\n          Own\n        </button>\n        <button\n          className={`group-withme ${\n            props.selectedType === 'me' ? 'clicked' : ''\n          }`}\n          onClick={(e) => props.dispatch({ type: 'selectType', value: 'me' })}\n        >\n          With me\n        </button>\n      </div>\n      <div className='group-body'>\n        {props.groups.map((group) => (\n          <GroupBox\n            key={group._id}\n            isSelected={\n              props.selectedGroup && group._id === props.selectedGroup._id\n            }\n            group={group}\n            groupType={props.selectedType}\n            user={props.user}\n            dispatch={props.dispatch}\n          />\n        ))}\n      </div>\n      <div\n        className={`group-footer ${\n          props.selectedType === 'own' ? '' : 'disabled'\n        }`}\n      >\n        <div className='input-group-label'>Enter group name</div>\n        <input\n          className='input-group-name'\n          value={props.inputName}\n          onChange={(e) =>\n            props.dispatch({\n              type: 'inputName',\n              value: e.target.value,\n            })\n          }\n        ></input>\n        <button\n          className='group-create-btn'\n          onClick={(e) =>\n            props.dispatch({\n              type: 'clickCreate',\n            })\n          }\n        >\n          {props.selectedGroup ? 'Save' : 'Create'}\n        </button>\n      </div>\n    </div>\n  );\n};\n\nGroupList.propTypes = {\n  active: PropTypes.bool,\n  groups: PropTypes.array,\n  selectedType: PropTypes.string,\n  selectedGroup: PropTypes.any,\n  inputName: PropTypes.string.isRequired,\n  user: PropTypes.any,\n  dispatch: PropTypes.any.isRequired,\n};\n\nexport default GroupList;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport './GroupUser.css';\n\nconst GroupUser = (props) => {\n  return (\n    <div className='group-info-user'>\n      <div className='group-info-username'>{props.user.name}</div>\n      <button\n        className={`group-info-ban ${props.isOwner ? '' : 'disabled'}`}\n        onClick={(e) =>\n          props.dispatch({\n            type: 'ban',\n            user: props.user,\n          })\n        }\n      >\n        Ban\n      </button>\n    </div>\n  );\n};\n\nGroupUser.propTypes = {\n  user: PropTypes.any.isRequired,\n  isOwner: PropTypes.bool,\n  dispatch: PropTypes.any.isRequired,\n};\n\nexport default GroupUser;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport './GroupRequest.css';\n\nconst GroupRequest = (props) => {\n    return (\n        <div className=\"group-info-req\">\n            <div className=\"group-info-req-name\">{props.user.username}</div>\n            <div className=\"group-info-req-buttons\">\n                <button className=\"group-info-accept box-safe\"\n                onClick={e => props.dispatch({\n                    type: 'reply',\n                    reply: true,\n                    user: props.user,\n                })}>Accept</button>\n                <button className=\"group-info-reject box-dang\"\n                onClick={e => props.dispatch({\n                    type: 'reply',\n                    reply: false,\n                    user: props.user,\n                })}>Reject</button>\n            </div>\n        </div>\n    )\n}\n\nGroupRequest.propTypes = {\n    user: PropTypes.any.isRequired,\n    dispatch: PropTypes.any.isRequired,\n}\n\nexport default GroupRequest;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport GroupUser from './GroupUser';\nimport GroupRequest from './GroupRequest';\nimport './GroupInfo.css';\n\nconst GroupInfo = (props) => {\n  if (!props.active) return <div className='group-info'></div>;\n  const users = props.group.users.map((user) => (\n    <GroupUser\n      key={user._id + 'user'}\n      user={user}\n      isOwner={props.isOwner}\n      dispatch={props.dispatch}\n    />\n  ));\n  const requests = props.isOwner\n    ? props.group.joinRequests.map((user) => (\n        <GroupRequest\n          key={user._id + 'req'}\n          user={user}\n          dispatch={props.dispatch}\n        />\n      ))\n    : null;\n  console.log(props.group);\n  return (\n    <div className='group-info'>\n      <div className={`group-info-users ${props.isOwner ? '' : 'full-height'}`}>\n        {users}\n      </div>\n      <div className={`group-info-requests ${props.isOwner ? '' : 'disabled'}`}>\n        {requests}\n      </div>\n    </div>\n  );\n};\n\nGroupInfo.propTypes = {\n  active: PropTypes.bool,\n  group: PropTypes.any,\n  isOwner: PropTypes.bool,\n  dispatch: PropTypes.any.isRequired,\n};\n\nexport default GroupInfo;\n","import React, { useReducer, useEffect } from 'react';\nimport * as utils from '../../actions/group';\nimport './Group.css';\nimport GroupList from './GroupList';\nimport GroupInfo from './GroupInfo';\n\nfunction groupReducer(state, action) {\n  switch (action.type) {\n    case 'setUser': {\n      return {\n        ...state,\n        user: action.user,\n      };\n    }\n    case 'selectType': {\n      if (state.reqType === action.value) return state;\n      return {\n        ...state,\n        reqType: action.value,\n        isLoading: true,\n        selectedGroup: null,\n        inputName: '',\n      };\n    }\n    case 'selectGroup': {\n      const group =\n        state.selectedGroup && state.selectedGroup._id === action.group._id\n          ? null\n          : action.group;\n      const inputName = group ? group.name : '';\n      return {\n        ...state,\n        selectedGroup: group,\n        inputName,\n      };\n    }\n    case 'clickGroup': {\n      return {\n        ...state,\n        isGroupClicked: true,\n        clickedGroup: action.group,\n      };\n    }\n    case 'inputName': {\n      return { ...state, inputName: action.value };\n    }\n    case 'clickCreate': {\n      if (state.selectedGroup && state.selectedGroup.name !== state.inputName) {\n        return { ...state, isSaving: true };\n      }\n      return { ...state, isCreating: true };\n    }\n    case 'reply': {\n      return {\n        ...state,\n        isReplying: true,\n        reply: action.reply,\n        repliedUser: action.user,\n      };\n    }\n    case 'ban': {\n      return {\n        ...state,\n        isBanning: true,\n        bannedUser: action.user,\n      };\n    }\n    case 'finishLoading': {\n      return {\n        ...state,\n        isLoading: false,\n        groups: action.groups,\n      };\n    }\n    case 'finishClicking': {\n      if (!action.ok)\n        return {\n          ...state,\n          isGroupClicked: false,\n          clickedGroup: null,\n        };\n      return {\n        ...state,\n        isLoading: true,\n        isGroupClicked: false,\n        clickedGroup: null,\n        selectedGroup: action.group,\n      };\n    }\n    case 'finishSaving': {\n      if (!action.ok)\n        return {\n          ...state,\n          isSaving: false,\n        };\n      return {\n        ...state,\n        isSaving: false,\n        isLoading: true,\n      };\n    }\n    case 'finishCreating': {\n      if (!action.ok)\n        return {\n          ...state,\n          isCreating: false,\n        };\n      return {\n        ...state,\n        isCreating: false,\n        isLoading: true,\n        selectedGroup: action.group,\n      };\n    }\n    case 'finishReplying': {\n      if (!action.ok)\n        return {\n          ...state,\n          isReplying: false,\n          reply: null,\n          repliedUser: null,\n        };\n      return {\n        ...state,\n        isReplying: false,\n        isLoading: true,\n        reply: null,\n        repliedUser: null,\n        selectedGroup: action.group,\n      };\n    }\n    case 'finishBanning': {\n      if (!action.ok)\n        return {\n          ...state,\n          isBanning: false,\n          bannedUser: null,\n        };\n      return {\n        ...state,\n        isLoading: true,\n        isBanning: false,\n        bannedUser: null,\n        selectedGroup: action.group,\n      };\n    }\n    default:\n      return state;\n  }\n}\n\nconst Group = () => {\n  const initialState = {\n    isLoading: true,\n    groups: null,\n    user: null,\n    isGroupClicked: false,\n    clickedGroup: null,\n    selectedGroup: null,\n    isBanning: false,\n    bannedUser: null,\n    isReplying: false,\n    repliedUser: null,\n    isCreating: false,\n    isSaving: false,\n    reply: null,\n    reqType: '',\n    inputName: '',\n  };\n\n  const [state, dispatch] = useReducer(groupReducer, initialState);\n\n  useEffect(() => {\n    const setUser = async () => {\n      const res = await utils.getUser();\n      dispatch({\n        type: 'setUser',\n        user: res.data,\n      });\n    };\n    setUser();\n  }, []);\n  useEffect(() => {\n    const loadGroups = async () => {\n      const res = await utils.getGroups(state.reqType);\n      dispatch({\n        type: 'finishLoading',\n        isGroupClicked: false,\n        clickedGroup: null,\n        groups: res.data.response,\n      });\n    };\n    if (state.isLoading) loadGroups();\n  }, [state.isLoading, state.reqType]);\n  useEffect(() => {\n    const saveGroup = async () => {\n      const res = await utils.saveGroup(\n        state.inputName,\n        state.selectedGroup._id\n      );\n      dispatch({\n        type: 'finishSaving',\n        ok: res.data.ok,\n        group: res.data.response,\n      });\n    };\n    if (state.isSaving) saveGroup();\n  }, [state.isSaving, state.inputName, state.selectedGroup]);\n  useEffect(() => {\n    const createGroup = async () => {\n      const res = await utils.createGroup(state.inputName);\n      dispatch({\n        type: 'finishCreating',\n        ok: res.data.ok,\n        group: res.data.response,\n      });\n    };\n    if (state.isCreating) createGroup();\n  }, [state.isCreating, state.inputName]);\n  useEffect(() => {\n    const reply = async () => {\n      if (state.reply) {\n        const res = await utils.acceptMember(\n          state.selectedGroup._id,\n          state.repliedUser._id\n        );\n        return dispatch({\n          type: 'finishReplying',\n          ok: res.data.ok,\n          group: res.data.response,\n        });\n      } else {\n        const res = await utils.rejectMember(\n          state.selectedGroup._id,\n          state.repliedUser._id\n        );\n        return dispatch({\n          type: 'finishReplying',\n          ok: res.data.ok,\n          group: res.data.response,\n        });\n      }\n    };\n    if (state.isReplying) reply();\n  }, [state.isReplying, state.repliedUser, state.reply, state.selectedGroup]);\n  useEffect(() => {\n    const ban = async () => {\n      const res = await utils.banMember(\n        state.selectedGroup._id,\n        state.bannedUser._id\n      );\n      return dispatch({\n        type: 'finishBanning',\n        ok: res.data.ok,\n        group: res.data.response,\n      });\n    };\n    if (state.isBanning) ban();\n  }, [state.isBanning, state.selectedGroup, state.bannedUser]);\n  useEffect(() => {\n    const interactGroup = async () => {\n      if (state.reqType === '') {\n        const res = await utils.joinGroup(state.clickedGroup._id);\n        return dispatch({\n          type: 'finishClicking',\n          ok: res.data.ok,\n          group: res.data.response,\n        });\n      }\n      if (state.reqType === 'own') {\n        const res = await utils.deleteGroup(state.clickedGroup._id);\n        return dispatch({\n          type: 'finishClicking',\n          ok: res.data.ok,\n          group: res.data.response,\n        });\n      }\n      if (state.reqType === 'me') {\n        const res = await utils.leaveGroup(state.clickedGroup._id);\n        return dispatch({\n          type: 'finishClicking',\n          ok: res.data.ok,\n          group: res.data.response,\n        });\n      }\n    };\n    if (state.isGroupClicked) interactGroup();\n  }, [state.isGroupClicked, state.clickedGroup, state.reqType]);\n\n  return (\n    <div className='Group'>\n      <GroupList\n        active={!state.isLoading}\n        groups={state.groups}\n        selectedType={state.reqType}\n        inputName={state.inputName}\n        selectedGroup={state.selectedGroup}\n        user={state.user}\n        dispatch={dispatch}\n      />\n      <GroupInfo\n        active={!!state.selectedGroup && !state.isLoading}\n        group={state.selectedGroup}\n        isOwner={state.reqType === 'own'}\n        dispatch={dispatch}\n      />\n    </div>\n  );\n};\n\nexport default Group;\n","import React, { Fragment, useEffect } from 'react';\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\nimport Navbar from './components/layout/Navbar';\nimport Home from './components/layout/Homepage';\nimport Login from './components/auth/Login';\nimport RecoverPassword from './components/passwordReset/RecoverPassword';\nimport UpdatePassword from './components/passwordReset/UpdatePassword';\nimport Welcome from './components/welcome/Welcome';\nimport Admin from './components/admin/Admin';\nimport CreateUser from './components/admin/CreateUser';\nimport EditUser from './components/admin/EditUser';\nimport Editor from './components/editor/Editor';\nimport Paper from './components/paper/Paper';\nimport PublicDatabases from './components/publicDatabases/publicDatabases';\nimport Alert from './components/layout/Alert';\nimport PrivateRoute from './components/routing/PrivateRoute';\n// Redux\nimport { Provider } from 'react-redux';\nimport store from './store';\nimport { loadUser } from './actions/auth';\nimport setAuthToken from './utils/setAuthToken';\n\nimport './App.css';\nimport Group from './components/group/Group';\n\nif (localStorage.token) {\n  setAuthToken(localStorage.token);\n}\n\nconst App = () => {\n  useEffect(() => {\n    store.dispatch(loadUser());\n  }, []);\n\n  return (\n    <Provider store={store}>\n      <Router>\n        <Fragment>\n          <Navbar />\n          <Route exact path='/' component={Home} />\n          <section className='container'>\n            <Alert />\n            <Switch>\n              <Route exact path='/login' component={Login} />\n              <Route\n                exact\n                path='/recoverPassword'\n                component={RecoverPassword}\n              />\n              <Route exact path='/reset/:id' component={UpdatePassword} />\n              <PrivateRoute exact path='/welcome' component={Welcome} />\n              <PrivateRoute exact path='/admin' component={Admin} />\n              <PrivateRoute exact path='/create-users' component={CreateUser} />\n              <PrivateRoute exact path='/edit-user/:id' component={EditUser} />\n              <PrivateRoute exact path='/editor' component={Editor} />\n              <PrivateRoute exact path='/papers' component={Paper} />\n              <PrivateRoute\n                exact\n                path='/publicDatabases'\n                component={PublicDatabases}\n              />\n              <PrivateRoute exact path='/groups' component={Group} />\n            </Switch>\n          </section>\n        </Fragment>\n      </Router>\n    </Provider>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}