{"version":3,"sources":["components/layout/spinner.gif","actions/alert.js","actions/types.js","utils/setAuthToken.js","actions/auth.js","components/layout/Navbar.js","components/layout/Homepage.js","components/auth/Login.js","components/passwordReset/styles/mixins.js","components/passwordReset/styles/styledComponents.js","utils/entryFields.js","components/passwordReset/RecoverPassword.js","components/passwordReset/UpdatePassword.js","components/layout/Spinner.js","components/welcome/Welcome.js","components/admin/UserTableRow.js","actions/editor.js","components/admin/Admin.js","components/admin/CreateUser.js","actions/useredit.js","components/admin/EditUser.js","components/editor/File.js","components/editor/FileList.js","actions/bibtex.js","components/editor/Entry.js","components/editor/EntryList.js","components/editor/InfoList.js","components/editor/EditWindow.js","components/editor/Editor.js","actions/paper.js","components/paper/PaperTableRow.js","components/paper/ExtractWindow.js","components/paper/Paper.js","components/publicDatabases/publicDatabases.js","components/layout/Alert.js","components/routing/PrivateRoute.js","reducers/alert.js","reducers/auth.js","reducers/index.js","store.js","actions/group.js","components/group/GroupBox.js","components/group/GroupList.js","components/group/GroupUser.js","components/group/GroupRequest.js","components/group/GroupInfo.js","components/group/Group.js","App.js","index.js"],"names":["module","exports","setAlert","msg","alertType","timeout","dispatch","id","uuidv4","type","payload","setTimeout","setAuthToken","token","axios","defaults","headers","common","loadUser","a","localStorage","get","res","data","response","connect","state","auth","logout","isAuthenticated","loading","role","console","log","authLinks","to","onClick","href","className","login","username","password","config","post","error","reason","useState","formData","setFormData","onChange","e","target","name","value","onSubmit","preventDefault","placeholder","breakpoints","desktop","tablet","phone","validationErrorMixin","Object","keys","reduce","acc","label","css","flexCenterMixin","props","theme","primary","boxShadow","styled","div","input","white","inputTextColor","inputBorderColor","GhostInput","Button","form","button","width","primaryHover","tertiary","tertiaryHover","primaryLight","primaryDark","lightGray","offWhite","midGray","darkGray","secondaryDark","secondary","RecoverPasswordStyles","RecoverPassword","email","submitted","handleChange","setState","sendPasswordResetEmail","this","Component","UpdatePassword","confirmPassword","key","updatePassword","put","match","params","then","catch","err","warn","style","paddingBottom","fontSize","maxWidth","paddingLeft","rel","src","spinner","margin","display","alt","user","useEffect","Spinner","UserTableRow","_id","variant","requiredEntryFields","article","book","booklet","conference","inBook","inCollection","inProceedings","manual","mastersThesis","misc","online","phdThesis","proceedings","extraEntryFields","entries","push","entryFields","forEach","required","extra","typeChange","ARTICLE","BOOK","BOOKLET","CONFERENCE","INBOOK","INCOLLECTION","INPROCEEDINGS","MANUAL","MASTERSTHESIS","MISC","ONLINE","PHDTHESIS","PROCEEDINGS","getGroups","getUser","getDatabases","changeName","newName","databaseId","bibtexdatabasename","createDatabase","group","deleteDatabase","delete","addEntry","entry","changeEntry","entryId","deleteEntry","uploadDatabase","bibtexFile","bibtexJSON","bibtexParse","toJSON","entryType","entryTags","tag","includes","toLowerCase","contains","database","adminReducer","action","currentUser","isDeleting","deletedUser","search","searchParam","isLoading","users","ok","searchParams","text","Admin","useReducer","fetchCurrentUser","deleteUser","dataTable","filter","map","Menu","compact","Dropdown","options","simple","item","Table","striped","bordered","hover","register","body","JSON","stringify","errors","password2","unique","updateUser","userObj","result","updateFields","fields","message","success","Promise","all","editUserDispater","messages","clearing","isSaving","EditUser","saveUser","userObject","autoComplete","Group","controlId","Label","Control","as","aria-autocomplete","size","block","i","File","info","file","d","Date","updatedAt","isSelected","isAllowed","toLocaleDateString","toLocaleTimeString","FileList","active","fileList","btnText","listDivs","owner","selectedFile","uploading","htmlFor","files","groups","isSelectedAllowed","inputName","convertRefs","refs","finalString","ref","strings","length","convertLastLine","convertMiddleLine","citationKey","str","convertRef","xmlToBib","xmlText","title","xml","DOMParser","parseFromString","biblStruct","querySelector","Array","from","querySelectorAll","find","titleElem","getAttribute","innerHTML","authors","elem","authorString","children","node","trim","author","join","journal","year","Entry","entryClass","isChosen","isNew","isDisabled","EntryList","chosen","document","scrollIntoView","behavior","arr","split","typeString","startsWith","parseSearch","entryList","val","values","matches","bibtexString","selectedEntry","newEntryDiv","newEntry","download","InfoList","infoList","data-tag","entryChanges","readOnly","EditWindow","spellCheck","editorReducer","selectedGroup","uploadedFile","inputSearch","errorMessage","slice","isDeletingFile","isUploadingFile","isSavingFile","isCreatingFile","isDeletingEntry","isCreatingEntry","isSavingEntry","windowOpened","Editor","isErrorAppearing","useRef","utils","fetchUser","fetchFiles","deleteFile","createFile","uploadFile","fileReader","FileReader","readAsText","onload","onerror","createEntry","saveEntry","current","clearTimeout","fileActive","entryActive","infoActive","bottom","opacity","extractDatabase","getFiles","saveFile","changeProgress","FormData","append","onUploadProgress","progressEvent","totalLength","lengthComputable","total","getResponseHeader","Math","round","loaded","extractFile","fileId","fetch","blob","method","Accept","status","bibBlob","extractHeader","bibtex","readUploadedFileAsText","inputFile","temporaryFileReader","resolve","reject","abort","DOMException","extractAndUploadBibtex","databaseName","extractAndUploadHeader","PaperTableRow","paper","uploadDate","filename","url","ExtractWindow","groupOptions","databases","option","disabled","selected","inputValue","windowMessage","paperReducer","isExtracting","progress","searchName","deletedFile","extractedFile","papers","selectedMethod","selectedCitationKey","Paper","setDatabases","setGroups","loadFiles","promises","window","URL","createObjectURL","n","extractBibtex","reverse","uploadText","PublicDatabases","alerts","alert","component","roles","rest","render","initialState","getItem","combineReducers","setItem","removeItem","middleware","thunk","store","createStore","rootReducer","composeWithDevTools","applyMiddleware","deleteGroup","groupId","leaveGroup","joinGroup","createGroup","saveGroup","acceptMember","userId","rejectMember","banMember","GroupBox","btnName","btnClass","isRequested","groupType","joinRequests","classList","GroupList","selectedType","GroupUser","isOwner","GroupRequest","reply","GroupInfo","requests","groupReducer","reqType","isGroupClicked","clickedGroup","isCreating","isReplying","repliedUser","isBanning","bannedUser","setUser","loadGroups","ban","interactGroup","App","exact","path","Home","Login","Welcome","CreateUser","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.b1621851.chunk.js","sourcesContent":["module.exports = \"data:image/gif;base64,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\"","import { v4 as uuidv4 } from 'uuid';\r\nimport { SET_ALERT, REMOVE_ALERT } from './types';\r\n\r\nexport const setAlert = (msg, alertType, timeout = 5000) => (dispatch) => {\r\n  const id = uuidv4();\r\n  dispatch({\r\n    type: SET_ALERT,\r\n    payload: { msg, alertType, id },\r\n  });\r\n\r\n  setTimeout(() => dispatch({ type: REMOVE_ALERT, payload: id }), timeout);\r\n};\r\n","export const SET_ALERT = 'SET_ALERT';\r\nexport const REMOVE_ALERT = 'REMOVE_ALERT';\r\nexport const REGISTER_SUCCESS = 'REGISTER_SUCCESS';\r\nexport const REGISTER_FAIL = 'REGISTER_FAIL';\r\nexport const USER_LOADED = 'USER_LOADED';\r\nexport const AUTH_ERROR = 'AUTH_ERROR';\r\nexport const LOGIN_SUCCESS = 'LOGIN_SUCCESS';\r\nexport const LOGIN_FAIL = 'LOGIN_FAIL';\r\nexport const LOGOUT = 'LOGOUT';\r\nexport const GET_USER = 'GET_USER';\r\nexport const USER_ERROR = 'USER_ERROR';\r\n","import axios from 'axios';\r\n\r\nconst setAuthToken = (token) => {\r\n  if (token) {\r\n    axios.defaults.headers.common['x-auth-token'] = token;\r\n  } else {\r\n    delete axios.defaults.headers.common['x-auth-token'];\r\n  }\r\n};\r\n\r\nexport default setAuthToken;\r\n","import { push } from 'connected-react-router';\r\nimport axios from 'axios';\r\nimport { setAlert } from './alert';\r\nimport {\r\n  REGISTER_SUCCESS,\r\n  REGISTER_FAIL,\r\n  USER_LOADED,\r\n  AUTH_ERROR,\r\n  LOGIN_SUCCESS,\r\n  LOGIN_FAIL,\r\n  LOGOUT,\r\n} from './types';\r\nimport setAuthToken from '../utils/setAuthToken';\r\n\r\n// Load User\r\nexport const loadUser = () => async (dispatch) => {\r\n  if (localStorage.token) {\r\n    setAuthToken(localStorage.token);\r\n  }\r\n\r\n  try {\r\n    const res = await axios.get('/api/auth');\r\n\r\n    dispatch({\r\n      type: USER_LOADED,\r\n      payload: res.data.response,\r\n    });\r\n  } catch (err) {\r\n    dispatch({\r\n      type: AUTH_ERROR,\r\n    });\r\n  }\r\n};\r\n\r\n// Register User\r\nexport const register = ({ name, email, role, username, password }) => async (\r\n  dispatch\r\n) => {\r\n  const config = {\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n  };\r\n\r\n  const body = JSON.stringify({ name, email, role, username, password });\r\n\r\n  try {\r\n    const res = await axios.post('/api/user/register-user', body, config);\r\n    console.log('HERE');\r\n    dispatch({\r\n      type: REGISTER_SUCCESS,\r\n      payload: res.data,\r\n    });\r\n    dispatch(setAlert('User created', 'success'));\r\n  } catch (err) {\r\n    const errors = err.response.data.errors;\r\n\r\n    if (errors) {\r\n      errors.forEach((error) => dispatch(setAlert(error.msg, 'danger')));\r\n    }\r\n  }\r\n};\r\n\r\n// Login User\r\nexport const login = (username, password) => async (dispatch) => {\r\n  const config = {\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n  };\r\n\r\n  try {\r\n    const res = await axios.post('/api/auth', { username, password }, config);\r\n    dispatch({\r\n      type: LOGIN_SUCCESS,\r\n      payload: res.data.response,\r\n    });\r\n\r\n    dispatch(loadUser());\r\n  } catch (err) {\r\n    const error = err.response.data.error;\r\n\r\n    if (error) {\r\n      dispatch(setAlert(error.reason, 'danger'));\r\n    }\r\n\r\n    dispatch({\r\n      type: LOGIN_FAIL,\r\n    });\r\n  }\r\n};\r\n\r\n// Logout / Clear editor\r\nexport const logout = () => (dispatch) => {\r\n  dispatch({ type: LOGOUT });\r\n};\r\n\r\n// Send reset password link\r\nexport const sendResetPasswordLink = (email) =>\r\n  axios.post('http://localhost:5000/api/user/login/forgot', { email });\r\n\r\nexport const attemptSendResetPasswordLink = (email) => async (dispatch) => {\r\n  return await sendResetPasswordLink(email).catch(\r\n    dispatch(push('/login/forgot'))\r\n  );\r\n};\r\n\r\n// Reset password\r\nexport const resetPassword = (password, token) =>\r\n  axios.post(`http://localhost:5000/api/user/login/reset/${token}`, {\r\n    password,\r\n  });\r\n\r\nexport const attemptResetPassword = (password, token) => async (dispatch) => {\r\n  return await resetPassword(password, token)\r\n    .then(() => {\r\n      dispatch(push('/login'));\r\n    })\r\n    .catch(dispatch(push(`/login/reset/${token}`)));\r\n};\r\n","import React, { Fragment } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { PropTypes } from 'prop-types';\r\nimport { logout } from '../../actions/auth';\r\n\r\nconst Navbar = ({ auth: { isAuthenticated, loading, role }, logout }) => {\r\n  console.log(role);\r\n  const authLinks = (\r\n    <ul>\r\n      {(() => {\r\n        if (role !== 'user') {\r\n          return (\r\n            <li>\r\n              <Link to='/admin'>Admin</Link>\r\n            </li>\r\n          );\r\n        }\r\n      })()}\r\n      <li>\r\n        <Link to='/editor'>Editor</Link>\r\n      </li>\r\n      <li>\r\n        <Link to='/papers'>Papers</Link>\r\n      </li>\r\n      <li>\r\n        <Link to='/publicDatabases'>Databases</Link>\r\n      </li>\r\n      <li>\r\n        <Link to='/groups'>Groups</Link>\r\n      </li>\r\n      <li>\r\n        <a onClick={logout} href='#!'>\r\n          <i className='fas fa-sign-out-alt'></i>{' '}\r\n          <span className='hide-sm'></span>Logout\r\n        </a>\r\n      </li>\r\n    </ul>\r\n  );\r\n\r\n  return (\r\n    <nav className='navbar bg-dark'>\r\n      <h1>\r\n        <Link to='/'>\r\n          <i className='fas fa-code' /> Bibtex\r\n        </Link>\r\n      </h1>\r\n      {!loading && <Fragment>{isAuthenticated ? authLinks : null}</Fragment>}\r\n    </nav>\r\n  );\r\n};\r\n\r\nNavbar.propTypes = {\r\n  logout: PropTypes.func.isRequired,\r\n  auth: PropTypes.object.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  auth: state.auth,\r\n});\r\n\r\nexport default connect(mapStateToProps, { logout })(Navbar);\r\n","import React from 'react';\r\nimport { Link, Redirect } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst Homepage = ({ isAuthenticated }) => {\r\n  if (isAuthenticated) {\r\n    return <Redirect to='/welcome' />;\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <section className='landing'>\r\n        <div className='dark-overlay'>\r\n          <div className='landing-inner'>\r\n            <h1 className='x-large'>Bibtex</h1>\r\n            <p className='lead'>Online editor for bibtex references</p>\r\n            <div className='buttons centered'>\r\n              <Link to='/login' className='btn btn-light'>\r\n                Login\r\n              </Link>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n    </div>\r\n  );\r\n};\r\n\r\nHomepage.propTypes = {\r\n  isAuthenticated: PropTypes.bool,\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  isAuthenticated: state.auth.isAuthenticated,\r\n});\r\n\r\nexport default connect(mapStateToProps)(Homepage);\r\n","import React, { Fragment, useState } from 'react';\r\nimport { Link, Redirect } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { login } from '../../actions/auth';\r\n\r\nconst Login = ({ login, isAuthenticated }) => {\r\n  const [formData, setFormData] = useState({\r\n    username: '',\r\n    password: '',\r\n  });\r\n\r\n  const { username, password } = formData;\r\n\r\n  const onChange = (e) =>\r\n    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n\r\n  const onSubmit = async (e) => {\r\n    e.preventDefault();\r\n    login(username, password);\r\n  };\r\n\r\n  if (isAuthenticated) {\r\n    return <Redirect to='/welcome' />;\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <h1 className='large text-primary'>Sign In</h1>\r\n      <p className='lead'>\r\n        <i className='fas fa-user' /> Sign Into Your Account\r\n      </p>\r\n      <form className='form' onSubmit={onSubmit}>\r\n        <div className='form-group'>\r\n          <input\r\n            type='username'\r\n            placeholder='Username'\r\n            name='username'\r\n            value={username}\r\n            onChange={onChange}\r\n          />\r\n        </div>\r\n        <div className='form-group'>\r\n          <input\r\n            type='password'\r\n            placeholder='Password'\r\n            name='password'\r\n            value={password}\r\n            onChange={onChange}\r\n          />\r\n        </div>\r\n        <input type='submit' className='btn btn-primary' value='Login' />\r\n      </form>\r\n      <Link to='/recoverPassword'>Forgot your password?</Link>\r\n      <p className='my-1'>Don't have an account? Please contact admin.</p>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nLogin.propTypes = {\r\n  login: PropTypes.func.isRequired,\r\n  isAuthenticated: PropTypes.bool,\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  isAuthenticated: state.auth.isAuthenticated,\r\n});\r\n\r\nexport default connect(mapStateToProps, { login })(Login);\r\n","import { css } from \"styled-components\"\r\n\r\n// MEDIA TEMPLATES\r\nconst breakpoints = {\r\n  desktop: 1024,\r\n  tablet: 768,\r\n  phone: 576\r\n}\r\n\r\nconst minBreakpoints = {\r\n  tablet: 577,\r\n  desktop: 769\r\n}\r\n\r\n/* You can use the media export in a styled-component like so:\r\n *   ${media.desktop`display: flex;`}\r\n *   ${media.tablet`display: inline-block;`}\r\n *   ${media.phone`display: none;`} */\r\nexport const media = Object.keys(breakpoints).reduce((acc, label) => {\r\n  acc[label] = (...args) => css`\r\n    @media (max-width: ${breakpoints[label] / 16}em) {\r\n      ${css(...args)};\r\n    }\r\n  `\r\n  return acc\r\n}, {})\r\n\r\nexport const minMedia = Object.keys(minBreakpoints).reduce((acc, label) => {\r\n  acc[label] = (...args) => css`\r\n    @media (min-width: ${breakpoints[label] / 16}em) {\r\n      ${css(...args)};\r\n    }\r\n  `\r\n  return acc\r\n}, {})\r\n\r\n// This mixin only works if you put the .error div *before* the input,\r\n// as the .error div selects its next sibling to apply border colors\r\nexport const validationErrorMixin = css`\r\n  .error + input {\r\n    /* Color input red when adjacent to an error: */\r\n    border: 1px solid #cea0a5;\r\n  }\r\n`\r\n\r\nexport const authFormErrorsMixin = css`\r\n  .form-field {\r\n    ${validationErrorMixin};\r\n    /* Mixin overrides: */\r\n    .error {\r\n      display: block;\r\n      padding: 5px 8px;\r\n      height: 30px;\r\n      background: #ffdce0;\r\n      border-radius: 3px;\r\n      border: 1px solid #cea0a5;\r\n      color: #86181d;\r\n      font-size: 0.75rem;\r\n      z-index: 10;\r\n    }\r\n    .client-error {\r\n      margin: 35px 0 0 5px;\r\n      position: absolute;\r\n    }\r\n    .client-error:after,\r\n    .client-error:before {\r\n      bottom: 100%;\r\n      left: 15%;\r\n      border: solid transparent;\r\n      content: \"\";\r\n      height: 0;\r\n      width: 0;\r\n      position: absolute;\r\n      pointer-events: none;\r\n    }\r\n\r\n    .client-error:after {\r\n      border-color: rgba(255, 220, 224, 0);\r\n      border-bottom-color: #ffdce0;\r\n      border-width: 6px;\r\n      margin-left: -6px;\r\n    }\r\n    .client-error:before {\r\n      border-color: rgba(206, 160, 165, 0);\r\n      border-bottom-color: #cea0a5;\r\n      border-width: 7px;\r\n      margin-left: -7px;\r\n    }\r\n    .server-error {\r\n      margin-top: 16px;\r\n    }\r\n  }\r\n  .spinner {\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: center;\r\n    padding: 10px;\r\n  }\r\n`\r\n\r\n// General styles that you can spread around:\r\nexport const flexCenterMixin = css`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n`\r\n\r\nexport const boxShadowMixin = css`\r\n  box-shadow: 0 0 0.625rem 0 rgba(0, 0, 0, 0.1);\r\n`\r\n\r\nexport const modalBlur = css`\r\n  filter: blur(1px);\r\n`\r\n\r\n// Wrote these in anticipation of a card component\r\nexport const card = css`\r\n  background: ${props => props.theme.primary};\r\n  box-shadow: ${props => props.theme.boxShadow};\r\n`\r\n\r\nexport const fontDeclarations = css`\r\n  @font-face {\r\n    font-family: \"Wals\";\r\n    src: local(\"Wals Regular\"), local(\"Wals-Regular\"),\r\n      url(\"/fonts/Wals-Regular.otf\") format(\"opentype\");\r\n    font-weight: 400;\r\n    font-style: normal;\r\n    font-display: fallback;\r\n  }\r\n  @font-face {\r\n    font-family: \"Wals\";\r\n    src: local(\"Wals Regular Oblique\"), local(\"Wals-Regular-Oblique\"),\r\n      url(\"/fonts/Wals-Regular-Oblique.otf\") format(\"opentype\");\r\n    font-weight: 400;\r\n    font-style: italic;\r\n    font-display: fallback;\r\n  }\r\n  @font-face {\r\n    font-family: \"Wals\";\r\n    src: local(\"Wals Light\"), local(\"Wals-Light\"),\r\n      url(\"/fonts/Wals-Light.otf\") format(\"opentype\");\r\n    font-weight: 300;\r\n    font-style: normal;\r\n    font-display: fallback;\r\n  }\r\n  @font-face {\r\n    font-family: \"Wals\";\r\n    src: local(\"Wals Light Oblique\"), local(\"Wals-Light-Oblique\"),\r\n      url(\"/fonts/Wals-Light-Oblique.otf\") format(\"opentype\");\r\n    font-weight: 300;\r\n    font-style: italic;\r\n    font-display: fallback;\r\n  }\r\n  @font-face {\r\n    font-family: \"Wals\";\r\n    src: local(\"Wals Medium\"), local(\"Wals-Medium\"),\r\n      url(\"/fonts/Wals-Medium.otf\") format(\"opentype\");\r\n    font-weight: 500;\r\n    font-style: normal;\r\n    font-display: fallback;\r\n  }\r\n  @font-face {\r\n    font-family: \"Wals\";\r\n    src: local(\"Wals Medium Oblique\"), local(\"Wals-Medium-Oblique\"),\r\n      url(\"/fonts/Wals-Medium-Oblique.otf\") format(\"opentype\");\r\n    font-weight: 500;\r\n    font-style: italic;\r\n    font-display: fallback;\r\n  }\r\n`\r\n\r\nexport const fontMixin = css`\r\n  html * {\r\n    font-family: Wals, sans-serif;\r\n    /* @SET: 1rem === 16px */\r\n    font-size: 16px;\r\n    text-rendering: optimizeLegibility;\r\n    -webkit-font-smoothing: antialiased;\r\n  }\r\n\r\n  h1 {\r\n    font-size: 3rem;\r\n    font-weight: 400;\r\n    color: ${props => props.theme.primary};\r\n  }\r\n\r\n  h2 {\r\n    font-size: 2.75rem;\r\n    font-weight: 500;\r\n  }\r\n\r\n  h3 {\r\n    font-size: 2.5rem;\r\n    letter-spacing: 0.01875rem;\r\n  }\r\n\r\n  h4 {\r\n    font-family: Wals, sans-serif;\r\n    font-weight: 500;\r\n    font-size: 1.75rem;\r\n    margin-bottom: 16px;\r\n  }\r\n`\r\n","import styled from \"styled-components\"\r\n\r\nimport { flexCenterMixin } from \"./mixins\"\r\n\r\nexport const Card = styled.div`\r\n  ${flexCenterMixin};\r\n`\r\n\r\nexport const Label = styled.label`\r\n  color: ${props => props.theme.primary};\r\n  font-weight: 500;\r\n  text-transform: capitalize;\r\n`\r\n\r\nexport const Input = styled.input`\r\n  background-color: ${props => props.theme.white};\r\n  color: ${props => props.theme.inputTextColor};\r\n  border: ${props => `1px ${props.theme.inputBorderColor} solid`};\r\n  padding: 0.5rem 1rem 0.43rem;\r\n  border-radius: 0.375rem;\r\n\r\n  &:focus {\r\n    outline: none;\r\n    border-color: ${props => props.theme.primary};\r\n    box-shadow: ${props => `0 0 0 1px ${props.theme.primary}`};\r\n  }\r\n`\r\n\r\nexport const GhostInput = styled.input`\r\n  padding: 0.5rem 1rem 0.43rem;\r\n  border-radius: 0.375rem;\r\n  border: ${props => `1px ${props.theme.inputBorderColor} solid`};\r\n  font-size: 1rem;\r\n`\r\n\r\nexport const Form = styled.form`\r\n  width: 100%;\r\n  padding: 30px 20px 20px 20px;\r\n  border-radius: 5px;\r\n  background: rgba(255, 255, 255, 0.75);\r\n  box-shadow: 0 0.3125rem 0.0625rem 0 rgba(0, 0, 0, 0.05),\r\n    0 0 0 0.0625rem rgba(0, 0, 0, 0.03), 0 0.0625rem 0 0 rgba(0, 0, 0, 0.05),\r\n    0 0.0625rem 0.1875rem 0 rgba(0, 0, 0, 0.01);\r\n\r\n  input {\r\n    width: 100%;\r\n    margin-bottom: 20px;\r\n    background: white;\r\n  }\r\n\r\n  button {\r\n    width: 100%;\r\n  }\r\n\r\n  .text-align-right {\r\n    text-align: right;\r\n    button {\r\n      width: unset;\r\n      padding-left: 3.5rem;\r\n      padding-right: 3.5rem;\r\n    }\r\n  }\r\n`\r\n\r\nexport const Button = styled.button`\r\n  color: white;\r\n  border-radius: 5px;\r\n  margin-top: 8px;\r\n  padding: 6px 12px;\r\n  font-weight: 500;\r\n  width: ${props => props.width};\r\n\r\n  /* Button & btn-primary */\r\n  will-change: background-color, border-color, color;\r\n  -webkit-transition: background-color 0.15s ease, border-color 0.15s ease,\r\n    color 0.15s ease;\r\n  transition: background-color 0.15s ease, border-color 0.15s ease,\r\n    color 0.15s ease;\r\n  background-color: ${props => props.theme.primary};\r\n  border-color: ${props => props.theme.primary};\r\n  &:hover,\r\n  &:focus {\r\n    background-color: ${props => props.theme.primaryHover};\r\n    border-color: ${props => props.theme.primaryHover};\r\n  }\r\n\r\n  /* Styles for Link/anchor elements that might be children of Button */\r\n  a {\r\n    color: ${props => props.theme.white};\r\n    &:hover {\r\n      color: ${props => props.theme.white};\r\n    }\r\n  }\r\n\r\n  &.btn-primary {\r\n    border: 0;\r\n  }\r\n\r\n  &.btn-tertiary {\r\n    background-color: ${props => props.theme.tertiary};\r\n    border-color: ${props => props.theme.tertiary};\r\n    color: ${props => props.theme.white};\r\n    box-shadow: 0 0 15px 0 rgba(0, 0, 0, 0.15);\r\n    border-radius: 6px;\r\n    &:hover,\r\n    &:focus {\r\n      background-color: ${props => props.theme.tertiaryHover};\r\n      border-color: ${props => props.theme.tertiaryHover};\r\n      color: ${props => props.theme.white};\r\n    }\r\n  }\r\n\r\n  &.btn-light {\r\n    background-color: ${props => props.theme.primaryLight};\r\n    border-color: ${props => props.theme.primaryLight};\r\n    &:hover,\r\n    &:focus {\r\n      background-color: ${props => props.theme.primaryDark};\r\n      border-color: ${props => props.theme.primaryDark};\r\n    }\r\n  }\r\n\r\n  &.btn-gray {\r\n    background-color: ${props => props.theme.lightGray};\r\n    border-color: ${props => props.theme.lightGray};\r\n  }\r\n\r\n  &.btn-neutral {\r\n    background-color: ${props => props.theme.offWhite};\r\n    border-color: ${props => props.theme.offWhite};\r\n    color: ${props => props.theme.midGray};\r\n\r\n    &:hover,\r\n    &:focus {\r\n      background-color: ${props => props.theme.lightGray};\r\n      border-color: ${props => props.theme.lightGray};\r\n      color: ${props => props.theme.darkGray};\r\n    }\r\n  }\r\n\r\n  &.btn-inverted {\r\n    color: ${props => props.theme.white};\r\n    /* target anchors for when we nest Links inside buttons */\r\n    & a {\r\n      color: ${props => props.theme.white};\r\n    }\r\n    background-color: ${props => props.theme.primary};\r\n    border-color: ${props => props.theme.primary};\r\n    &:hover,\r\n    &:focus {\r\n      background-color: ${props => props.theme.primaryLight};\r\n      border-color: ${props => props.theme.primaryLight};\r\n      color: ${props => props.theme.primary};\r\n      & a {\r\n        color: ${props => props.theme.primary};\r\n      }\r\n    }\r\n  }\r\n\r\n  &.btn-secondary {\r\n    background-color: ${props => props.theme.secondaryDark};\r\n    border-color: ${props => props.theme.secondaryDark};\r\n    &:hover,\r\n    &:focus {\r\n      background-color: ${props => props.theme.secondary};\r\n      border-color: ${props => props.theme.secondary};\r\n    }\r\n  }\r\n\r\n  &:not(:disabled) {\r\n    cursor: pointer;\r\n  }\r\n`\r\n\r\nexport const CardButton = styled.button`\r\n  position: absolute;\r\n  right: 1%;\r\n  top: -50%;\r\n  display: block;\r\n  width: 65px;\r\n  height: 65px;\r\n  font-weight: bold;\r\n  border-radius: 100%;\r\n  background: #fff;\r\n  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.15);\r\n  text-align: center;\r\n  text-decoration: bold;\r\n  color: ${props => props.theme.tertiary};\r\n  transition: all 0.3s ease;\r\n  /* &::after {\r\n    margin-left: 2%;\r\n    content: \"\\f054\";\r\n    font-family: FontAwesome;\r\n    line-height: 10%;\r\n  } */\r\n\r\n  &:hover,\r\n  &:focus {\r\n    background: ${props => props.theme.tertiary};\r\n    color: #fff;\r\n    box-shadow: 0 2px 8px 0 rgba(${props => props.theme.tertiary}, 0.4);\r\n    &::after {\r\n      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\r\n    }\r\n  }\r\n`\r\n\r\nexport const CloseModalIcon = styled.button`\r\n  position: absolute;\r\n  right: 4rem;\r\n  border: 0;\r\n  cursor: pointer;\r\n  color: rgba(128, 128, 128, 0.5);\r\n  padding: 0;\r\n  font-size: 2rem;\r\n  padding: 0 !important;\r\n  font-weight: 300;\r\n  background: white;\r\n`\r\n","const requiredEntryFields = {\r\n  article: ['journal'],\r\n  book: ['publisher'],\r\n  booklet: [],\r\n  conference: ['booktitle'],\r\n  inBook: ['chapter', 'publisher'],\r\n  inCollection: ['booktitle', 'publisher'],\r\n  inProceedings: ['booktitle'],\r\n  manual: [],\r\n  mastersThesis: [],\r\n  misc: [],\r\n  online: [],\r\n  phdThesis: ['school'],\r\n  proceedings: [],\r\n};\r\n\r\nconst extraEntryFields = {\r\n  article: ['number', 'pages', 'volume', 'month', 'doi', 'annotation'],\r\n  book: [\r\n    'series',\r\n    'address',\r\n    'edition',\r\n    'volume',\r\n    'month',\r\n    'doi',\r\n    'annotation',\r\n  ],\r\n  booklet: ['howpublished', 'address', 'month', 'doi', 'annotation'],\r\n  conference: [\r\n    'editor',\r\n    'volume',\r\n    'series',\r\n    'pages',\r\n    'address',\r\n    'organisation',\r\n    'publisher',\r\n    'month',\r\n    'doi',\r\n    'annotation',\r\n  ],\r\n  inBook: [\r\n    'volime',\r\n    'series',\r\n    'type',\r\n    'address',\r\n    'edition',\r\n    'month',\r\n    'doi',\r\n    'annotation',\r\n  ],\r\n  inCollection: [\r\n    'editor',\r\n    'volume',\r\n    'series',\r\n    'type',\r\n    'address',\r\n    'chapter',\r\n    'pages',\r\n    'edition',\r\n    'organization',\r\n    'month',\r\n    'doi',\r\n    'annotation',\r\n  ],\r\n  inProceedings: [\r\n    'editor',\r\n    'volume',\r\n    'series',\r\n    'pages',\r\n    'address',\r\n    'organization',\r\n    'publisher',\r\n    'month',\r\n    'doi',\r\n    'annotation',\r\n  ],\r\n  manual: ['organization', 'address', 'edititon', 'month', 'doi', 'annotation'],\r\n  mastersThesis: ['school', 'type', 'address', 'month', 'doi', 'annotation'],\r\n  misc: ['howpublished', 'month', 'doi', 'annotation'],\r\n  online: ['month', 'doi', 'annotation'],\r\n  phdThesis: ['type', 'address', 'month', 'doi', 'annotation'],\r\n  proceedings: [\r\n    'editor',\r\n    'volume',\r\n    'series',\r\n    'address',\r\n    'publisher',\r\n    'organization',\r\n    'month',\r\n    'doi',\r\n    'annotation',\r\n  ],\r\n};\r\n\r\nfor (let [key, value] of Object.entries(requiredEntryFields)) {\r\n  requiredEntryFields[key].push('author');\r\n  requiredEntryFields[key].push('title');\r\n  requiredEntryFields[key].push('year');\r\n}\r\n\r\nconst entryFields = {};\r\nObject.keys(requiredEntryFields).forEach((key) => {\r\n  entryFields[key] = {\r\n    required: requiredEntryFields[key],\r\n    extra: extraEntryFields[key],\r\n  };\r\n});\r\n\r\nexport default entryFields;\r\n","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Button, GhostInput } from '../passwordReset/styles/styledComponents';\r\nimport styled from 'styled-components';\r\n\r\n// MOVE TO REDUX\r\nimport axios from 'axios';\r\n\r\nexport const RecoverPasswordStyles = styled.div`\r\n  height: 100%;\r\n  width: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  form {\r\n    width: 300px;\r\n  }\r\n  p,\r\n  input {\r\n    margin-bottom: 0.625rem;\r\n    font-size: 1.125rem;\r\n  }\r\n\r\n  input,\r\n  button {\r\n    width: 100%;\r\n  }\r\n  p {\r\n    font-size: 1.125rem;\r\n  }\r\n  a {\r\n    margin-top: 1rem;\r\n  }\r\n  .reset-password-form-wrapper {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    justify-content: center;\r\n    max-width: 430px;\r\n    margin: 0 auto;\r\n  }\r\n  .reset-password-form-sent-wrapper {\r\n    max-width: 360px;\r\n    text-align: center;\r\n    p {\r\n      text-align: left;\r\n      margin-top: 1rem;\r\n      margin-bottom: 0.75rem;\r\n    }\r\n  }\r\n  .password-reset-btn {\r\n    padding: 0.625rem 1.25rem;\r\n    font-size: 1.125rem;\r\n  }\r\n`;\r\n\r\nclass RecoverPassword extends Component {\r\n  state = {\r\n    email: '',\r\n    submitted: false,\r\n  };\r\n\r\n  handleChange = (e) => {\r\n    this.setState({ email: e.target.value });\r\n  };\r\n\r\n  sendPasswordResetEmail = (e) => {\r\n    e.preventDefault();\r\n    const { email } = this.state;\r\n    axios.post(`http://localhost:5000/api/user/${email}`);\r\n    this.setState({ email: '', submitted: true });\r\n  };\r\n\r\n  render() {\r\n    const { email, submitted } = this.state;\r\n\r\n    return (\r\n      <RecoverPasswordStyles>\r\n        <h3>Reset your password</h3>\r\n        {submitted ? (\r\n          <div className='reset-password-form-sent-wrapper'>\r\n            <p>\r\n              If that account is in our system, we emailed you a link to reset\r\n              your password.\r\n            </p>\r\n            <Link to='/login' className='ghost-btn'>\r\n              Return to sign in\r\n            </Link>\r\n          </div>\r\n        ) : (\r\n          <div className='reset-password-form-wrapper'>\r\n            <p>\r\n              It happens to the best of us. Enter your email and we'll send you\r\n              reset instructions.\r\n            </p>\r\n            <form onSubmit={this.sendPasswordResetEmail}>\r\n              <GhostInput\r\n                onChange={this.handleChange}\r\n                value={email}\r\n                placeholder='Email address'\r\n              />\r\n              <Button className='btn-primary password-reset-btn'>\r\n                Send password reset email\r\n              </Button>\r\n            </form>\r\n            <Link to='/login'>I remember my password</Link>\r\n          </div>\r\n        )}\r\n      </RecoverPasswordStyles>\r\n    );\r\n  }\r\n}\r\n\r\nexport default RecoverPassword;\r\n","import React, { Component } from 'react';\r\nimport axios from 'axios';\r\nimport { Link } from 'react-router-dom';\r\nimport { Button, GhostInput } from '../passwordReset/styles/styledComponents';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { RecoverPasswordStyles as UpdatePasswordStyles } from './RecoverPassword';\r\n\r\nclass UpdatePassword extends Component {\r\n  state = {\r\n    password: '',\r\n    confirmPassword: '',\r\n    submitted: false,\r\n  };\r\n\r\n  handleChange = (key) => (e) => {\r\n    this.setState({ [key]: e.target.value });\r\n  };\r\n\r\n  updatePassword = (e) => {\r\n    e.preventDefault();\r\n    const { password } = this.state;\r\n\r\n    axios\r\n      .put(\r\n        'http://localhost:5000/api/user/updatePassword/' +\r\n          this.props.match.params.id,\r\n        { password }\r\n      )\r\n      .then((res) => res)\r\n      .catch((err) =>\r\n        console.warn('ERROR FROM SERVER UPDATING PASSWORD:', err)\r\n      );\r\n    this.setState({ submitted: !this.state.submitted });\r\n  };\r\n\r\n  render() {\r\n    const { submitted } = this.state;\r\n\r\n    return (\r\n      <UpdatePasswordStyles>\r\n        <h3 style={{ paddingBottom: '1.25rem' }}>Update your password</h3>\r\n        {submitted ? (\r\n          <div className='reset-password-form-sent-wrapper'>\r\n            <p>Your password has been saved.</p>\r\n            <Link to='/login' className='ghost-btn'>\r\n              Sign back in\r\n            </Link>\r\n          </div>\r\n        ) : (\r\n          <div className='reset-password-form-wrapper'>\r\n            <form\r\n              onSubmit={this.updatePassword}\r\n              style={{ paddingBottom: '1.5rem' }}\r\n            >\r\n              <GhostInput\r\n                onChange={this.handleChange('password')}\r\n                value={this.state.password}\r\n                placeholder='New password'\r\n                type='password'\r\n              />\r\n              <GhostInput\r\n                onChange={this.handleChange('confirmPassword')}\r\n                value={this.state.confirmPassword}\r\n                placeholder='Confirm password'\r\n                type='password'\r\n              />\r\n\r\n              <Button className='btn-primary password-reset-btn'>\r\n                Update password\r\n              </Button>\r\n            </form>\r\n\r\n            <p\r\n              style={{\r\n                fontSize: '1rem',\r\n                maxWidth: '420px',\r\n                paddingLeft: '0.5rem',\r\n              }}\r\n            >\r\n              Make sure it's at least 8 characters including a number and a\r\n              lowercase letter. Read some documentation on{' '}\r\n              <a\r\n                href='https://help.github.com/articles/creating-a-strong-password/'\r\n                target='_blank'\r\n                rel='noopener noreferrer'\r\n              >\r\n                safer password practices\r\n              </a>\r\n              .\r\n            </p>\r\n          </div>\r\n        )}\r\n      </UpdatePasswordStyles>\r\n    );\r\n  }\r\n}\r\n\r\nUpdatePassword.propTypes = {\r\n  token: PropTypes.string.isRequired,\r\n  userId: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default UpdatePassword;\r\n","import React, { Fragment } from 'react';\r\nimport spinner from './spinner.gif';\r\n\r\nexport default () => (\r\n  <Fragment>\r\n    <img\r\n      src={spinner}\r\n      style={{ width: '200px', margin: 'auto', display: 'block' }}\r\n      alt='Loading...'\r\n    />\r\n  </Fragment>\r\n);\r\n","import React, { useEffect, Fragment } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport Spinner from '../layout/Spinner';\r\n\r\nconst Welcome = ({ auth: { user }, auth: { auth, loading } }) => {\r\n  useEffect(() => {}, []);\r\n\r\n  return loading && auth === null ? (\r\n    <Spinner />\r\n  ) : (\r\n    <Fragment>\r\n      <h1 className='large text-primary'>Bibtex</h1>\r\n      <p className='lead'>\r\n        <i />\r\n        Hello! {user && user.name} Welcome to the Bibtex editor!\r\n      </p>\r\n      <p>\r\n        <small>Logged in as: {user && user.role}</small>\r\n      </p>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nWelcome.propTypes = {\r\n  auth: PropTypes.object.isRequired,\r\n  user: PropTypes.object.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  auth: state.auth,\r\n  user: state.user,\r\n});\r\n\r\nexport default connect(mapStateToProps)(Welcome);\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Button from 'react-bootstrap/Button';\r\nimport './UserTableRow.css';\r\n\r\nconst UserTableRow = (props) => {\r\n    return (\r\n        <tr>\r\n            <td>{props.user.name}</td>\r\n            <td>{props.user.email}</td>\r\n            <td>{props.user.role}</td>\r\n            <td>{props.user.username}</td>\r\n            <td className=\"actions\">\r\n                <Link to={'/edit-user/' + props.user._id} className=\"button-big\">Edit</Link>\r\n                <Button onClick={() => props.dispatch({\r\n                    type: 'delete',\r\n                    user: props.user,\r\n                })} variant='danger' className=\"delete-btn\">\r\n                Delete\r\n                </Button>\r\n            </td>\r\n        </tr>\r\n    );\r\n}\r\n\r\nexport default UserTableRow;\r\n","import axios from 'axios';\r\nimport bibtexParse from 'bibtex-parser-js';\r\nimport entryFields from '../utils/entryFields';\r\n\r\nconst typeChange = {\r\n  ARTICLE: 'article',\r\n  BOOK: 'book',\r\n  BOOKLET: 'booklet',\r\n  CONFERENCE: 'conference',\r\n  INBOOK: 'inBook',\r\n  INCOLLECTION: 'inCollection',\r\n  INPROCEEDINGS: 'inProceedings',\r\n  MANUAL: 'manual',\r\n  MASTERSTHESIS: 'mastersThesis',\r\n  MISC: 'misc',\r\n  ONLINE: 'online',\r\n  PHDTHESIS: 'phdThesis',\r\n  PROCEEDINGS: 'proceedings',\r\n};\r\n\r\nconst getUserId = async () => {\r\n  const res = await axios.get('/api/auth');\r\n  return res.data.response._id;\r\n};\r\n\r\nexport const getGroups = async () => {\r\n  const res = await axios.get('/api/group/withme');\r\n  return res.data.response;\r\n};\r\n\r\nexport const getUser = async () => {\r\n  const res = await axios.get('/api/user/me');\r\n  return res.data;\r\n};\r\n\r\nexport const getDatabases = async () => {\r\n  const res = await axios.get('/api/database/all');\r\n  return res.data.response;\r\n};\r\n\r\nexport const changeName = async (newName, databaseId) => {\r\n  try {\r\n    const res = await axios.put(`/api/database`, {\r\n      id: databaseId,\r\n      bibtexdatabasename: newName,\r\n    });\r\n    return res;\r\n  } catch (err) {\r\n    return err.response;\r\n  }\r\n};\r\n\r\nexport const createDatabase = async (bibtexdatabasename, group) => {\r\n  try {\r\n    const res = await axios.post('/api/database', {\r\n      bibtexdatabasename,\r\n      group,\r\n    });\r\n    return res;\r\n  } catch (err) {\r\n    return err.response;\r\n  }\r\n};\r\n\r\nexport const deleteDatabase = async (databaseId) => {\r\n  try {\r\n    const res = await axios.delete(`/api/database/${databaseId}`);\r\n    return res;\r\n  } catch (err) {\r\n    return err.response;\r\n  }\r\n};\r\n\r\nexport const addEntry = async (entry, databaseId) => {\r\n  console.log(entry);\r\n  try {\r\n    const res = await axios.post(`/api/database/entry/`, {\r\n      id: databaseId,\r\n      entry,\r\n    });\r\n    return res;\r\n  } catch (err) {\r\n    return err.response;\r\n  }\r\n};\r\n\r\nexport const changeEntry = async (entry, databaseId) => {\r\n  try {\r\n    const res = await axios.put(`/api/database/entry`, {\r\n      ...entry,\r\n      entryId: entry._id,\r\n      databaseId,\r\n    });\r\n    return res;\r\n  } catch (err) {\r\n    return err.response;\r\n  }\r\n};\r\n\r\nexport const deleteEntry = async (entryId, databaseId) => {\r\n  try {\r\n    const res = await axios.delete(\r\n      `/api/database/entry/${databaseId}/${entryId}`\r\n    );\r\n    return res;\r\n  } catch (err) {\r\n    return err.response;\r\n  }\r\n};\r\n\r\nexport const uploadDatabase = async (bibtexFile, name, group) => {\r\n  console.log('GROUP');\r\n  console.log(group);\r\n  const bibtexJSON = bibtexParse.toJSON(bibtexFile);\r\n  console.log(bibtexJSON);\r\n  const entries = [];\r\n  for (let entry of bibtexJSON) {\r\n    entry.entryType = typeChange[entry.entryType];\r\n    if (!entryFields[entry.entryType]) {\r\n      continue;\r\n    }\r\n    for (let tag of Object.keys(entry.entryTags)) {\r\n      if (\r\n        entryFields[entry.entryType].required.includes(tag.toLowerCase()) ||\r\n        entryFields[entry.entryType].extra.includes(tag.toLowerCase())\r\n      ) {\r\n        entry.entryTags[tag.toLowerCase()] = entry.entryTags[tag];\r\n      }\r\n      delete entry.entryTags[tag];\r\n    }\r\n    let contains = true;\r\n    for (let tag of entryFields[entry.entryType].required) {\r\n      if (!entry.entryTags[tag]) {\r\n        contains = false;\r\n      }\r\n    }\r\n    if (contains) entries.push(entry);\r\n  }\r\n  const database = { bibtexdatabasename: name, entries };\r\n  try {\r\n    const res = await axios.post(`/api/database/upload`, {\r\n      ...database,\r\n      group: group === 'user' ? null : group,\r\n    });\r\n    console.log(res.data);\r\n    return res;\r\n  } catch (err) {\r\n    console.log(err.response);\r\n    return err.response;\r\n  }\r\n};\r\n","import React from 'react';\r\nimport { useReducer, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport Table from 'react-bootstrap/Table';\r\nimport UserTableRow from './UserTableRow';\r\nimport { Link } from 'react-router-dom';\r\nimport { Dropdown, Menu } from 'semantic-ui-react';\r\nimport { getUser } from '../../actions/editor';\r\nimport './Admin.css';\r\n\r\nfunction adminReducer(state, action) {\r\n  switch (action.type) {\r\n    case 'setCurrentUser': {\r\n      return {\r\n        ...state,\r\n        currentUser: action.user,\r\n      };\r\n    }\r\n    case 'delete': {\r\n      return {\r\n        ...state,\r\n        isDeleting: true,\r\n        deletedUser: action.user,\r\n      };\r\n    }\r\n    case 'search': {\r\n      return {\r\n        ...state,\r\n        search: action.value,\r\n      };\r\n    }\r\n    case 'searchParam': {\r\n      return {\r\n        ...state,\r\n        searchParam: action.value,\r\n      };\r\n    }\r\n    case 'finishLoading': {\r\n      return {\r\n        ...state,\r\n        isLoading: false,\r\n        users: action.users,\r\n      };\r\n    }\r\n    case 'finishDeleting': {\r\n      if (!action.ok) {\r\n        return { ...state, isDeleting: false, deletedUser: null };\r\n      }\r\n      return {\r\n        ...state,\r\n        isDeleting: false,\r\n        isLoading: true,\r\n        deletedUser: null,\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nconst searchParams = [\r\n  { key: 1, text: 'Name', value: 'name' },\r\n  { key: 2, text: 'Email', value: 'email' },\r\n  { key: 3, text: 'Username', value: 'username' },\r\n];\r\n\r\nconst Admin = (props) => {\r\n  const initialState = {\r\n    isLoading: true,\r\n    currentUser: null,\r\n    isDeleting: false,\r\n    deletedUser: null,\r\n    users: null,\r\n    search: '',\r\n    searchParam: 'name',\r\n  };\r\n\r\n  const [state, dispatch] = useReducer(adminReducer, initialState);\r\n\r\n  useEffect(() => {\r\n    const fetchCurrentUser = async () => {\r\n      const user = await getUser();\r\n      dispatch({ type: 'setCurrentUser', user });\r\n    };\r\n    if (!state.currentUser) fetchCurrentUser();\r\n  }, [state.currentUser]);\r\n\r\n  useEffect(() => {\r\n    const fetchUsers = () =>\r\n      axios.get('/api/user').then((res) => {\r\n        console.log(res.data);\r\n        dispatch({\r\n          type: 'finishLoading',\r\n          users: res.data,\r\n          ok: true,\r\n        });\r\n      });\r\n    if (state.isLoading) fetchUsers();\r\n  }, [state.isLoading]);\r\n  useEffect(() => {\r\n    const deleteUser = async () => {\r\n      const res = await axios.delete(`/api/user/${state.deletedUser._id}`);\r\n      dispatch({\r\n        type: 'finishDeleting',\r\n        user: res.data,\r\n        ok: true,\r\n      });\r\n    };\r\n    if (state.isDeleting) deleteUser();\r\n  }, [state.isDeleting, state.deletedUser]);\r\n\r\n  if (state.isLoading) return <div>Loading...</div>;\r\n\r\n  const usersFilter = (user) => {\r\n    if (state.search === '') return true;\r\n    return user[state.searchParam].includes(state.search);\r\n  };\r\n\r\n  const dataTable = state.users.filter(usersFilter).map((user) => {\r\n    return <UserTableRow user={user} dispatch={dispatch} key={user._id} />;\r\n  });\r\n  console.log(state.searchParam);\r\n  console.log(state.search);\r\n  return (\r\n    <div>\r\n      <div className='buttons'>\r\n        <Link to='/create-users' className='create-btn button-big'>\r\n          Create User\r\n        </Link>\r\n        <div className='select-param'>\r\n          <Menu compact className='select-param'>\r\n            <Dropdown\r\n              value={state.searchParam}\r\n              options={searchParams}\r\n              simple\r\n              item\r\n              onChange={(e, data) =>\r\n                dispatch({\r\n                  type: 'searchParam',\r\n                  value: data.value,\r\n                })\r\n              }\r\n            ></Dropdown>\r\n          </Menu>\r\n        </div>\r\n        <input\r\n          className='search'\r\n          placeholder='Enter a value'\r\n          value={state.search}\r\n          onChange={(e) =>\r\n            dispatch({\r\n              type: 'search',\r\n              value: e.target.value,\r\n            })\r\n          }\r\n        ></input>\r\n      </div>\r\n      <div className='table-wrapper'>\r\n        <Table striped bordered hover>\r\n          <thead>\r\n            <tr>\r\n              <th>Name</th>\r\n              <th>Email</th>\r\n              <th>Role</th>\r\n              <th>Username</th>\r\n              <th>Actions</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>{dataTable}</tbody>\r\n        </Table>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Admin;\r\n","import React, { Fragment, useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Link, Redirect } from 'react-router-dom';\r\nimport { setAlert } from '../../actions/alert';\r\nimport { register } from '../../actions/auth';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst Register = ({ setAlert, register, isAuthenticated }) => {\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    email: '',\r\n    role: '',\r\n    username: '',\r\n    password: '',\r\n    password2: '',\r\n  });\r\n\r\n  const { name, email, role, username, password, password2 } = formData;\r\n\r\n  const onChange = (e) =>\r\n    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n\r\n  const onSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (password !== password2) {\r\n      setAlert('Passwords do not match', 'danger');\r\n    } else {\r\n      register({ name, email, role, username, password });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <h1 className='large text-primary'>Create User</h1>\r\n      <form className='form' onSubmit={onSubmit}>\r\n        <div className='form-group'>\r\n          <input\r\n            type='text'\r\n            placeholder='Name'\r\n            name='name'\r\n            value={name}\r\n            onChange={onChange}\r\n          />\r\n        </div>\r\n        <div className='form-group'>\r\n          <input\r\n            type='email'\r\n            placeholder='Email Address'\r\n            name='email'\r\n            unique\r\n            value={email}\r\n            onChange={onChange}\r\n          />\r\n        </div>\r\n        <div className='form-group'>\r\n          <input\r\n            type='text'\r\n            placeholder='Role'\r\n            name='role'\r\n            value={role}\r\n            onChange={onChange}\r\n          />\r\n        </div>\r\n        <div className='form-group'>\r\n          <input\r\n            type='text'\r\n            placeholder='Username'\r\n            name='username'\r\n            value={username}\r\n            onChange={onChange}\r\n          />\r\n        </div>\r\n        <div className='form-group'>\r\n          <input\r\n            type='password'\r\n            placeholder='Password'\r\n            name='password'\r\n            value={password}\r\n            onChange={onChange}\r\n          />\r\n        </div>\r\n        <div className='form-group'>\r\n          <input\r\n            type='password'\r\n            placeholder='Confirm Password'\r\n            name='password2'\r\n            value={password2}\r\n            onChange={onChange}\r\n          />\r\n        </div>\r\n        <input type='submit' className='btn btn-primary' value='Register' />\r\n        <div className='buttons'>\r\n          <Link to='/admin' className='btn btn-light'>\r\n            Back\r\n          </Link>\r\n        </div>\r\n      </form>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nRegister.propTypes = {\r\n  setAlert: PropTypes.func.isRequired,\r\n  register: PropTypes.func.isRequired,\r\n  isAuthenticated: PropTypes.bool,\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  isAuthenticated: state.auth.isAuthenticated,\r\n});\r\n\r\nexport default connect(mapStateToProps, { setAlert, register })(Register);\r\n","import axios from 'axios';\r\n\r\nexport const updateUser = async (userObj, password, id) => {\r\n  const result = {};\r\n  const updateFields = async () => {\r\n    try {\r\n      const res = await axios.put('/api/user/' + id, userObj);\r\n      result.fields = { message: res.data.msg, ok: res.data.success };\r\n      console.log(res.data);\r\n    } catch (err) {\r\n      result.fields = {\r\n        message: err.response.data.msg,\r\n        ok: err.response.data.success,\r\n      };\r\n    }\r\n  };\r\n  const updatePassword = async () => {\r\n    if (password !== '') {\r\n      try {\r\n        const res = await axios.put('/api/user/updatePassword/' + id, {\r\n          password,\r\n        });\r\n        console.log(res.data);\r\n        result.password = { message: res.data.msg, ok: res.data.success };\r\n      } catch (err) {\r\n        result.password = {\r\n          message: err.response.data.msg,\r\n          ok: err.response.data.success,\r\n        };\r\n      }\r\n    }\r\n  };\r\n  await Promise.all([updateFields(), updatePassword()]);\r\n  return result;\r\n};\r\n","import React, { useReducer, useEffect } from 'react';\r\nimport Form from 'react-bootstrap/Form';\r\nimport Button from 'react-bootstrap/Button';\r\nimport axios from 'axios';\r\nimport { updateUser } from '../../actions/useredit';\r\nimport { Link } from 'react-router-dom';\r\nimport './EditUser.css';\r\n\r\nfunction editUserDispater (state, action) {\r\n    switch (action.type) {\r\n        case 'clearMessages': {\r\n            console.log('CLEARING')\r\n            return {\r\n                ...state,\r\n                messages: [],\r\n                clearing: false,\r\n            }\r\n        }\r\n        case 'save': {\r\n            return {\r\n                ...state,\r\n                isSaving: true,\r\n            }\r\n        }\r\n        case 'finishSaving': {\r\n            let isLoading = false;\r\n            if ((action.fields && action.fields.ok)\r\n            || (action.password && action.password.ok)) {\r\n                isLoading = true;\r\n            }\r\n            if (action.fields) state.messages.push(action.fields);\r\n            if (action.password) state.messages.push(action.password);\r\n            return {\r\n                ...state,\r\n                isSaving: false,\r\n                clearing: true,\r\n                isLoading,\r\n            }\r\n        }\r\n        case 'changePassword': {\r\n            console.log('here')\r\n            if (!action.ok) {\r\n                return state;\r\n            }\r\n            return {\r\n                ...state,\r\n                isLoading: true,\r\n                password: '',\r\n            }\r\n        }\r\n        case 'finishLoading': {\r\n            return {\r\n                ...state,\r\n                isLoading: false,\r\n                name: action.name,\r\n                email: action.email,\r\n                role: action.role,\r\n                username: action.username,\r\n            }\r\n        }\r\n        case 'name': return { ...state, name: action.value }\r\n        case 'email': return { ...state, email: action.value }\r\n        case 'role': return { ...state, role: action.value }\r\n        case 'username': return { ...state, username: action.value }\r\n        case 'password': return { ...state, password: action.value }\r\n        default: return state;\r\n    }\r\n}\r\n\r\nconst EditUser = (props) => {\r\n    const initialState = {\r\n        messages: [],\r\n        clearing: false,\r\n        isLoading: true,\r\n        isSaving: false,\r\n        name: '',\r\n        email: '',\r\n        role: '',\r\n        username: '',\r\n        password: '',\r\n    }\r\n    const [state, dispatch] = useReducer(editUserDispater, initialState);\r\n    \r\n    useEffect(() => {\r\n        if (state.clearing)\r\n            setTimeout(() => dispatch({ type: 'clearMessages' }), 5000)\r\n    }, [state.clearing])\r\n    useEffect(() => {\r\n        axios.get('/api/user/' + props.match.params.id)\r\n        .then(res => {\r\n            dispatch({\r\n                type: 'finishLoading',\r\n                name: res.data.name,\r\n                email: res.data.email,\r\n                role: res.data.role,\r\n                username: res.data.username,\r\n            })\r\n        })\r\n    }, [props.match.params.id])\r\n    useEffect(() => {\r\n        const saveUser = async () => {\r\n            console.log('submiting');\r\n            const userObject = {\r\n                name: state.name,\r\n                email: state.email,\r\n                role: state.role,\r\n                username: state.username,\r\n            };\r\n            const res = await updateUser(userObject, state.password, props.match.params.id);\r\n            dispatch({\r\n                type: 'finishSaving',\r\n                ...res\r\n            })\r\n        }\r\n        if (state.isSaving) saveUser();\r\n    }, [state.isSaving, state.name, state.email, state.role, \r\n        state.username, state.password, props.match.params.id])\r\n\r\n    const onFormSubmit = (e) => {\r\n        e.preventDefault();\r\n        dispatch({ type: 'save' });\r\n    }\r\n\r\n    return (\r\n        <div className='form-wrapper'>\r\n            <Form onSubmit={onFormSubmit} autoComplete=\"off\">\r\n                <Form.Group controlId='Name'>\r\n                    <Form.Label>Name</Form.Label>\r\n                    <Form.Control\r\n                    required\r\n                    type='text'\r\n                    value={state.name}\r\n                    onChange={e => dispatch({ type: 'name', value: e.target.value })}\r\n                    />\r\n                </Form.Group>\r\n                <Form.Group controlId='Email'>\r\n                    <Form.Label>Email</Form.Label>\r\n                    <Form.Control\r\n                    required\r\n                    type='email'\r\n                    value={state.email}\r\n                    onChange={e => dispatch({ type: 'email', value: e.target.value })}\r\n                    />\r\n                </Form.Group>\r\n                <Form.Group controlId='Role'>\r\n                    <Form.Label>Role</Form.Label>\r\n                    <Form.Control\r\n                    required as=\"select\"\r\n                    value={state.role}\r\n                    onChange={e => dispatch({ type: 'role', value: e.target.value })}\r\n                    >\r\n                        <option>user</option>\r\n                        <option>admin</option>\r\n                    </Form.Control>\r\n                </Form.Group>\r\n                <Form.Group controlId='Username'>\r\n                    <Form.Label>Username</Form.Label>\r\n                    <Form.Control\r\n                    required\r\n                    type='text'\r\n                    value={state.username}\r\n                    onChange={e => dispatch({ type: 'username', value: e.target.value })}\r\n                    />\r\n                </Form.Group>\r\n                <Form.Group controlId='Password'>\r\n                    <Form.Label>New Password</Form.Label>\r\n                    <Form.Control\r\n                    type='password'\r\n                    autoComplete=\"new-password\"\r\n                    aria-autocomplete=\"none\"\r\n                    value={state.password}\r\n                    onChange={e => dispatch({ type: 'password', value: e.target.value })}\r\n                    />\r\n                </Form.Group>\r\n                <Button variant='danger' size='lg' block='block' type='submit'>\r\n                    Update User\r\n                </Button>\r\n            </Form>\r\n            <Link to='/admin' className=\"link-back\">Back to admin page</Link>\r\n            {state.messages.map((message, i) => {\r\n                return <div className={`edit-message ${message.ok ? \r\n                'message-safe' : 'message-dang'}`}>\r\n                    {message.message}\r\n                </div>\r\n            })}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default EditUser;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './File.css';\r\n\r\nconst File = (props) => {\r\n  const info = props.file.user\r\n    ? { label: 'User', name: props.file.user.name }\r\n    : { label: 'Group', name: props.file.group.name };\r\n  const d = new Date(props.file.updatedAt);\r\n  return (\r\n    <div\r\n      className={props.isSelected ? 'file-box chosen-file' : 'file-box'}\r\n      onClick={(e) =>\r\n        props.dispatch({\r\n          type: 'select',\r\n          file: props.file,\r\n        })\r\n      }\r\n    >\r\n      <div className='file-head'>\r\n        <div className='file-bibtex-name'>{props.file.bibtexdatabasename}</div>\r\n        <img\r\n          className={`file-icon ${!props.isAllowed ? '' : 'disabled'}`}\r\n          src='https://www.pngmart.com/files/12/Corona-Lockdown-PNG-Clipart.png'\r\n          alt=''\r\n        ></img>\r\n      </div>\r\n      <div className='file-info'>\r\n        <div className='file-info-label'>{info.label}:</div>\r\n        <div className='file-info-name'>{info.name}</div>\r\n      </div>\r\n      <div className='file-date-label'>Last updated:</div>\r\n      <div className='file-date'>\r\n        {d.toLocaleDateString()} {d.toLocaleTimeString()}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nFile.propTypes = {\r\n  file: PropTypes.any.isRequired,\r\n  isSelected: PropTypes.bool,\r\n  isAllowed: PropTypes.bool,\r\n  dispatch: PropTypes.any.isRequired,\r\n};\r\n\r\nexport default File;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './FileList.css';\r\nimport File from './File';\r\n\r\nconst FileList = (props) => {\r\n  if (!props.active || !props.fileList) return <div className='file-div'></div>;\r\n\r\n  const listDivs = props.fileList.map((file) => {\r\n    const isAllowed =\r\n      (file.user && file.user._id === props.user._id) ||\r\n      (file.group &&\r\n        (file.group.owner === props.user._id ||\r\n          file.group.users.includes(props.user._id)));\r\n    return (\r\n      <File\r\n        key={file._id}\r\n        file={file}\r\n        isSelected={props.selectedFile && props.selectedFile._id === file._id}\r\n        isAllowed={isAllowed}\r\n        dispatch={props.dispatch}\r\n      ></File>\r\n    );\r\n  });\r\n\r\n  let btnText;\r\n  if (props.uploading) btnText = 'Upload a database';\r\n  else if (!props.selectedFile) btnText = 'Add a database';\r\n  else btnText = 'Save';\r\n\r\n  return (\r\n    <div className='file-div'>\r\n      <label className='upload-btn' htmlFor='file'>\r\n        Upload\r\n      </label>\r\n      <input\r\n        type='file'\r\n        name='file'\r\n        id='file'\r\n        onChange={(e) =>\r\n          props.dispatch({\r\n            type: 'upload',\r\n            file: e.target.files[0],\r\n          })\r\n        }\r\n        className='file-upload-input'\r\n      ></input>\r\n      <div className='file-body'>{listDivs}</div>\r\n      <select\r\n        className={`file-group ${\r\n          !props.selectedFile || props.uploading ? '' : 'disabled'\r\n        }`}\r\n        onChange={(e) =>\r\n          props.dispatch({\r\n            type: 'selectGroup',\r\n            group: e.target.value,\r\n          })\r\n        }\r\n      >\r\n        <option value='user'>Personal Database</option>\r\n        {props.groups.map((group) => (\r\n          <option value={group._id} key={group._id}>\r\n            {group.name}\r\n          </option>\r\n        ))}\r\n      </select>\r\n      <div\r\n        className={`file-name ${\r\n          props.isSelectedAllowed || !props.selectedFile ? '' : 'disabled'\r\n        }`}\r\n      >\r\n        <div className='file-name-label'>Enter a name:</div>\r\n        <input\r\n          className='file-name-input'\r\n          value={props.inputName}\r\n          onChange={(e) =>\r\n            props.dispatch({\r\n              type: 'inputName',\r\n              value: e.target.value,\r\n            })\r\n          }\r\n        ></input>\r\n      </div>\r\n      <div\r\n        className={`file-footer ${\r\n          props.isSelectedAllowed || !props.selectedFile ? '' : 'disabled'\r\n        }`}\r\n      >\r\n        <button\r\n          className='delete-db-btn'\r\n          onClick={(e) => props.dispatch({ type: 'delete' })}\r\n        >\r\n          Delete a database\r\n        </button>\r\n        <button\r\n          className='add-db-btn'\r\n          onClick={(e) =>\r\n            props.dispatch({\r\n              type: 'save',\r\n            })\r\n          }\r\n        >\r\n          {btnText}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nFileList.propTypes = {\r\n  groups: PropTypes.any,\r\n  active: PropTypes.bool.isRequired,\r\n  selectedFile: PropTypes.any, // id of selected database\r\n  uploading: PropTypes.any.isRequired,\r\n  inputName: PropTypes.string.isRequired,\r\n  fileList: PropTypes.array,\r\n  isSelectedAllowed: PropTypes.bool,\r\n  dispatch: PropTypes.any.isRequired,\r\n};\r\n\r\nexport default FileList;\r\n","const convertMiddleLine = (key, value) => {\r\n  return `${key} = \"${value}\",\\n`;\r\n};\r\n\r\nconst convertLastLine = (key, value) => {\r\n  return `${key} = \"${value}\"}\\n\\n`;\r\n};\r\n\r\nconst convertRef = (ref) => {\r\n  let type = ref.entryType.toLowerCase();\r\n  const entries = Object.entries(ref.entryTags);\r\n  const strings = entries.map(([key, value], i) => {\r\n    if (i === entries.length - 1) {\r\n      return convertLastLine(key, value);\r\n    }\r\n    return convertMiddleLine(key, value);\r\n  });\r\n  let finalString = `@${type}{${ref.citationKey},\\n`;\r\n  strings.forEach((str) => (finalString += str));\r\n  return finalString;\r\n};\r\n\r\nexport const convertRefs = (refs) => {\r\n  let finalString = '';\r\n  refs.forEach((ref) => {\r\n    finalString += convertRef(ref);\r\n  });\r\n  return finalString;\r\n};\r\n\r\nexport const xmlToBib = (xmlText) => {\r\n  console.log(xmlText);\r\n  const parser = new DOMParser();\r\n  const xml = parser.parseFromString(xmlText, 'text/xml');\r\n  const biblStruct = xml.querySelector('biblStruct');\r\n  if (!biblStruct) {\r\n    return { ok: false };\r\n  }\r\n  //\r\n  // Parse Title\r\n  //\r\n  let title;\r\n  if (!xml.querySelector('titleStmt')) {\r\n    title = null;\r\n  } else {\r\n    title = Array.from(\r\n      xml.querySelector('titleStmt').querySelectorAll('title')\r\n    ).find((titleElem) => {\r\n      return titleElem.getAttribute('level') === 'a';\r\n    }).innerHTML;\r\n  }\r\n  console.log('TITLE');\r\n  console.log(title);\r\n  //\r\n  // Parse authors\r\n  //\r\n  const authors = Array.from(biblStruct.querySelectorAll('persName')).map(\r\n    (elem) => {\r\n      let authorString = '';\r\n      Array.from(elem.children)\r\n        .filter((elem) => elem.innerHTML !== '•')\r\n        .forEach((node) => {\r\n          authorString += ' ' + node.innerHTML;\r\n        });\r\n      return authorString.trim();\r\n    }\r\n  );\r\n  let author = null;\r\n  if (authors.length !== 0) {\r\n    author = authors.join(', ').trim();\r\n  }\r\n  console.log('AUTHOR');\r\n  console.log(author);\r\n  //\r\n  // Parse journal\r\n  //\r\n  const journal = xml\r\n    .querySelector('publicationStmt')\r\n    ?.querySelector('publisher')?.innerHTML;\r\n  console.log('JOURNAL');\r\n  console.log(journal);\r\n  //\r\n  // Parse year\r\n  //\r\n  const year = xml.querySelector('publicationStmt')?.querySelector('date')\r\n    ?.innerHTML;\r\n  console.log('YEAR');\r\n  console.log(year);\r\n  //\r\n  // Validate\r\n  //\r\n  if (!title || !author || !journal || !year) {\r\n    return { ok: false };\r\n  }\r\n  return {\r\n    ok: true,\r\n    entry: {\r\n      title,\r\n      author,\r\n      journal,\r\n      year,\r\n    },\r\n  };\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './Entry.css';\r\n\r\nconst Entry = (props) => {\r\n  const entryClass = props.isChosen ? 'entry chosen-entry' : 'entry';\r\n  if (props.isNew && props.isDisabled)\r\n    return <button className='entry-new disabled'></button>;\r\n  else if (props.isNew)\r\n    return (\r\n      <button className='entry-new chosen-entry' onClick={props.onClick}>\r\n        <div className='entry-text'>\r\n          <p>\r\n            new <span className='entry-text-new'>{props.entry.entryType}</span>\r\n          </p>\r\n        </div>\r\n      </button>\r\n    );\r\n  return (\r\n    <button className={entryClass} onClick={props.onClick}>\r\n      <div className='entry-text'>\r\n        <p className='entry-header'>\r\n          <span className='entry-type'>@{props.entry.entryType}</span>\r\n          {'{'}\r\n          <span className='entry-key'>{props.entry.citationKey}</span>\r\n        </p>\r\n        <div className='entry-title-cont entry-cont'>\r\n          <div className='entry-title'>title</div>\r\n          <div className='entry-eq'>=</div>\r\n          <div className='entry-tag'>{props.entry.entryTags.title}</div>\r\n        </div>\r\n        <div className='entry-author-cont entry-cont'>\r\n          <div className='entry-author'>author</div>\r\n          <div className='entry-eq'>=</div>\r\n          <div className='entry-tag'>{props.entry.entryTags.author}</div>\r\n        </div>\r\n        <div className='entry-year-cont entry-cont'>\r\n          <div className='entry-year'>year</div>\r\n          <div className='entry-eq'>=</div>\r\n          <div className='entry-tag'>{props.entry.entryTags.year}</div>\r\n        </div>\r\n        <p className='entry-footer'>\r\n          <span className='entry-end'>...</span>\r\n          {'}'}\r\n        </p>\r\n      </div>\r\n    </button>\r\n  );\r\n};\r\n\r\nEntry.propTypes = {\r\n  isChosen: PropTypes.bool,\r\n  isNew: PropTypes.bool,\r\n  isDisabled: PropTypes.bool,\r\n  entry: PropTypes.any,\r\n  onClick: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Entry;\r\n","import React, { useEffect } from 'react';\r\nimport PropTypes, { element } from 'prop-types';\r\nimport { Dropdown, Menu } from 'semantic-ui-react';\r\nimport { convertRefs } from '../../actions/bibtex';\r\nimport Entry from './Entry';\r\nimport './EntryList.css';\r\n\r\nconst options = [\r\n  { key: 1, text: 'Article', value: 'article' },\r\n  { key: 2, text: 'Book', value: 'book' },\r\n  { key: 3, text: 'Booklet', value: 'booklet' },\r\n  { key: 4, text: 'Conference', value: 'conference' },\r\n  { key: 5, text: 'InBook', value: 'inBook' },\r\n  { key: 6, text: 'InCollection', value: 'inCollection' },\r\n  { key: 7, text: 'InProceedings', value: 'inProceedings' },\r\n  { key: 8, text: 'Manual', value: 'manual' },\r\n  { key: 9, text: 'Masters Thesis', value: 'mastersThesis' },\r\n  { key: 10, text: 'Misc', value: 'misc' },\r\n  { key: 11, text: 'Online', value: 'online' },\r\n  { key: 12, text: 'Phd Thesis', value: 'phdThesis' },\r\n  { key: 13, text: 'Proceedings', value: 'proceedings' },\r\n];\r\n\r\nfunction parseSearch(search) {\r\n  const result = { entryTags: {} };\r\n  const arr = search.trim().split(' ');\r\n  let typeString = arr.find((str) => str.startsWith('@'));\r\n  if (typeString) {\r\n    result.entryType = typeString.split('@')[1];\r\n  }\r\n  arr.forEach((str) => {\r\n    if (str.split('=').length === 2) {\r\n      const [key, value] = str.split('=');\r\n      result.entryTags[key] = value;\r\n    }\r\n  });\r\n  return result;\r\n}\r\n\r\nconst EntryList = (props) => {\r\n  useEffect(() => {\r\n    const chosen = document.querySelector('.chosen-entry');\r\n    if (chosen) chosen.scrollIntoView({ behavior: 'smooth' });\r\n  });\r\n\r\n  if (!props.active || !props.file) return <div className='entry-div'></div>;\r\n\r\n  const searchParams = parseSearch(props.search);\r\n  const entryList =\r\n    Object.keys(searchParams.entryTags).length !== 0 || searchParams.entryType\r\n      ? props.file.entries.filter((entry) => {\r\n          let val = true;\r\n          if (searchParams.entryType) {\r\n            val =\r\n              val &&\r\n              (entry.entryType\r\n                .toLowerCase()\r\n                .startsWith(searchParams.entryType) ||\r\n                entry.entryType.toLowerCase().includes(searchParams.entryType));\r\n          }\r\n          const values = Object.entries(searchParams.entryTags);\r\n          if (values.length !== 0) {\r\n            let matches = false;\r\n            for (let [key, value] of values) {\r\n              if (key === 'citationKey') {\r\n                if (\r\n                  entry[key].startsWith(value) ||\r\n                  entry[key].includes(value)\r\n                ) {\r\n                  matches = true;\r\n                }\r\n                continue;\r\n              }\r\n              if (\r\n                entry.entryTags[key] &&\r\n                (entry.entryTags[key].startsWith(value) ||\r\n                  entry.entryTags[key].includes(value))\r\n              ) {\r\n                matches = true;\r\n              }\r\n            }\r\n            return val && matches;\r\n          }\r\n          return val;\r\n        })\r\n      : props.file.entries;\r\n  const bibtexString = convertRefs(entryList);\r\n  const listDivs = entryList.map((entry) => {\r\n    const isChosen =\r\n      props.selectedEntry && props.selectedEntry._id === entry._id;\r\n    return (\r\n      <Entry\r\n        isChosen={isChosen}\r\n        isNew={false}\r\n        entry={entry}\r\n        key={entry._id}\r\n        onClick={() =>\r\n          props.dispatch({\r\n            type: 'selectEntry',\r\n            entry,\r\n          })\r\n        }\r\n      />\r\n    );\r\n  });\r\n\r\n  const newEntryDiv = (\r\n    <Entry\r\n      isChosen={!!props.newEntry}\r\n      isNew={true}\r\n      isDisabled={!props.newEntry}\r\n      entry={props.newEntry}\r\n      key='newEntry'\r\n      onClick={() => props.dispatch({ type: 'unselectNew' })}\r\n    />\r\n  );\r\n  return (\r\n    <div className='entry-div'>\r\n      <Menu compact className='add-entry-btn'>\r\n        <Dropdown\r\n          text='Add entry'\r\n          options={options}\r\n          simple\r\n          item\r\n          onChange={(e, data) => {\r\n            if (props.isSelectedAllowed)\r\n              props.dispatch({\r\n                type: 'selectNew',\r\n                value: data.value,\r\n              });\r\n          }}\r\n        ></Dropdown>\r\n      </Menu>\r\n      <div className='entry-search'>\r\n        <label htmlFor='entry-search'>Find entries</label>\r\n        <input\r\n          className='entry-search-input'\r\n          id='entry-search'\r\n          placeholder='example: @article title=mytitle'\r\n          value={props.search}\r\n          onChange={(e) =>\r\n            props.dispatch({\r\n              type: 'inputSearch',\r\n              value: e.target.value,\r\n            })\r\n          }\r\n        ></input>\r\n      </div>\r\n      <div className='entry-body'>\r\n        {listDivs}\r\n        {newEntryDiv}\r\n      </div>\r\n      <a\r\n        className='download-btn'\r\n        href={`data:text/x-bibtex,${bibtexString}`}\r\n        download={`${props.file.bibtexdatabasename}.bib`}\r\n      >\r\n        Download\r\n      </a>\r\n    </div>\r\n  );\r\n};\r\n\r\nEntryList.propTypes = {\r\n  active: PropTypes.bool.isRequired,\r\n  isSelectedAllowed: PropTypes.bool,\r\n  newEntry: PropTypes.any,\r\n  selectedEntry: PropTypes.any,\r\n  file: PropTypes.any,\r\n  search: PropTypes.string.isRequired,\r\n  dispatch: PropTypes.any.isRequired,\r\n};\r\n\r\nexport default EntryList;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport entryFields from '../../utils/entryFields';\r\nimport './InfoList.css';\r\n\r\nconst InfoList = (props) => {\r\n  if (!props.active || !props.entry) return <div className='info-div'></div>;\r\n\r\n  const infoList = [];\r\n  infoList.push(\r\n    <div className='info info-required info-citation' key='citationKey'>\r\n      <div className='info-key' data-tag='citationKey'>\r\n        *citation key:\r\n      </div>\r\n      <input\r\n        className='info-value'\r\n        value={props.entryChanges.citationKey}\r\n        readOnly={!props.isSelectedAllowed}\r\n        onChange={(e) =>\r\n          props.dispatch({\r\n            type: 'inputCitationKey',\r\n            value: e.target.value,\r\n          })\r\n        }\r\n      ></input>\r\n    </div>\r\n  );\r\n  entryFields[props.entry.entryType].required.forEach((tag) =>\r\n    infoList.push(\r\n      <div className='info info-required' key={tag}>\r\n        <div className='info-key' data-tag={tag}>\r\n          *{tag}:\r\n        </div>\r\n        <input\r\n          className='info-value'\r\n          value={props.entryChanges.entryTags[tag] || ''}\r\n          readOnly={!props.isSelectedAllowed}\r\n          onChange={(e) =>\r\n            props.dispatch({\r\n              type: 'inputTag',\r\n              tag,\r\n              value: e.target.value,\r\n            })\r\n          }\r\n        ></input>\r\n      </div>\r\n    )\r\n  );\r\n  entryFields[props.entry.entryType].extra.forEach((tag) =>\r\n    infoList.push(\r\n      <div className='info info-extra' key={tag}>\r\n        <div className='info-key' data-tag={tag}>\r\n          {tag}:\r\n        </div>\r\n        <input\r\n          className='info-value'\r\n          value={props.entryChanges.entryTags[tag] || ''}\r\n          readOnly={!props.isSelectedAllowed}\r\n          onChange={(e) =>\r\n            props.dispatch({\r\n              type: 'inputTag',\r\n              tag,\r\n              value: e.target.value,\r\n            })\r\n          }\r\n        ></input>\r\n      </div>\r\n    )\r\n  );\r\n\r\n  return (\r\n    <div className='info-div'>\r\n      <div className='info-head'>@{props.entry.entryType.toLowerCase()}</div>\r\n      <button\r\n        className='info-edit-btn'\r\n        onClick={(e) =>\r\n          props.dispatch({\r\n            type: 'openWindow',\r\n          })\r\n        }\r\n      >\r\n        Open in new window\r\n      </button>\r\n      <div className='info-body'>{infoList}</div>\r\n      <div\r\n        className={`info-footer ${props.isSelectedAllowed ? '' : 'disabled'}`}\r\n      >\r\n        <button\r\n          className='save-btn'\r\n          onClick={(e) =>\r\n            props.dispatch({\r\n              type: 'saveEntry',\r\n            })\r\n          }\r\n        >\r\n          Save\r\n        </button>\r\n        <button\r\n          className='delete-btn'\r\n          onClick={(e) =>\r\n            props.dispatch({\r\n              type: 'deleteEntry',\r\n            })\r\n          }\r\n        >\r\n          Delete\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nInfoList.propTypes = {\r\n  active: PropTypes.bool.isRequired,\r\n  entry: PropTypes.any,\r\n  entryChanges: PropTypes.any,\r\n  isSelectedAllowed: PropTypes.bool,\r\n  dispatch: PropTypes.any.isRequired,\r\n};\r\n\r\nexport default InfoList;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport entryFields from '../../utils/entryFields';\r\nimport './EditWindow.css';\r\n\r\nconst EditWindow = (props) => {\r\n  if (!props.active || !props.entry) {\r\n    return <div className='EditWindow disabled'></div>;\r\n  }\r\n  const infoList = [];\r\n  entryFields[props.entry.entryType].required.forEach((tag) =>\r\n    infoList.push(\r\n      <div className='edit-info edit-info-required' key={tag}>\r\n        <div className='info-label' data-tag={tag}>\r\n          <div className='info-label-tag'>{tag}:</div>\r\n          <div className='required-div'>Required</div>\r\n        </div>\r\n        <textarea\r\n          className='info-input'\r\n          spellCheck='false'\r\n          required\r\n          value={props.entryChanges.entryTags[tag] || ''}\r\n          onChange={(e) =>\r\n            props.dispatch({\r\n              type: 'inputTag',\r\n              tag,\r\n              value: e.target.value,\r\n            })\r\n          }\r\n        ></textarea>\r\n      </div>\r\n    )\r\n  );\r\n  entryFields[props.entry.entryType].extra.forEach((tag) =>\r\n    infoList.push(\r\n      <div className='edit-info edit-info-extra' key={tag}>\r\n        <div className='info-label' data-tag={tag}>\r\n          {tag}:\r\n        </div>\r\n        <textarea\r\n          className='info-input'\r\n          spellCheck='false'\r\n          value={props.entryChanges.entryTags[tag] || ''}\r\n          onChange={(e) =>\r\n            props.dispatch({\r\n              type: 'inputTag',\r\n              tag,\r\n              value: e.target.value,\r\n            })\r\n          }\r\n        ></textarea>\r\n      </div>\r\n    )\r\n  );\r\n\r\n  return (\r\n    <div className='EditWindow'>\r\n      <div className='edit-window-layout'></div>\r\n      <div className='edit-window-main'>\r\n        <form className='edit-window-form'>\r\n          <div className='edit-window-head'>\r\n            Editing entry: @{props.entry.entryType.toLowerCase()}\r\n          </div>\r\n          <div className='edit-window-body'>\r\n            <div className='edit-info edit-window-citation' key='citationKey'>\r\n              <div className='info-label'>\r\n                <div className='info-label-tag'>citationKey:</div>\r\n                <div className='required-div'>Required</div>\r\n              </div>\r\n              <textarea\r\n                className='info-input'\r\n                required\r\n                spellCheck='false'\r\n                value={props.entryChanges.citationKey}\r\n                onChange={(e) =>\r\n                  props.dispatch({\r\n                    type: 'inputCitationKey',\r\n                    value: e.target.value,\r\n                  })\r\n                }\r\n              ></textarea>\r\n            </div>\r\n            {infoList}\r\n          </div>\r\n          <div className='edit-window-footer'>\r\n            <button\r\n              className='edit-cancel-btn'\r\n              type='button'\r\n              onClick={(e) =>\r\n                props.dispatch({\r\n                  type: 'closeWindow',\r\n                })\r\n              }\r\n            >\r\n              Cancel\r\n            </button>\r\n            <button\r\n              className='edit-save-btn'\r\n              type='submit'\r\n              onClick={(e) => {\r\n                e.preventDefault();\r\n                props.dispatch({\r\n                  type: 'saveEntry',\r\n                });\r\n              }}\r\n            >\r\n              Save\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nEditWindow.propTypes = {\r\n  active: PropTypes.bool,\r\n  entry: PropTypes.object,\r\n  entryChanges: PropTypes.any,\r\n  dispatch: PropTypes.any.isRequired,\r\n};\r\n\r\nexport default EditWindow;\r\n","import React, { useEffect, useReducer, createRef, useRef } from 'react';\r\nimport * as utils from '../../actions/editor';\r\nimport './Editor.css';\r\nimport entryFields from '../../utils/entryFields';\r\nimport FileList from './FileList';\r\nimport EntryList from './EntryList';\r\nimport InfoList from './InfoList';\r\nimport EditWindow from './EditWindow';\r\n\r\nfunction editorReducer(state, action) {\r\n  // console.log(action.type.toUpperCase())\r\n  // console.log(action)\r\n  switch (action.type) {\r\n    //\r\n    // File List\r\n    //\r\n    case 'setUser': {\r\n      return { ...state, user: action.user };\r\n    }\r\n    case 'load': {\r\n      const selectedFile = state.selectedFile\r\n        ? action.files.find((file) => file._id === state.selectedFile._id)\r\n        : null;\r\n      return {\r\n        ...state,\r\n        isLoading: false,\r\n        fileList: action.files,\r\n        groups: action.groups,\r\n        selectedFile,\r\n        selectedGroup: 'user',\r\n      };\r\n    }\r\n    case 'inputName': {\r\n      return {\r\n        ...state,\r\n        inputName: action.value,\r\n      };\r\n    }\r\n    case 'select': {\r\n      const selectedFile =\r\n        state.selectedFile && action.file._id === state.selectedFile._id\r\n          ? null\r\n          : action.file;\r\n      const name = selectedFile ? selectedFile.bibtexdatabasename : '';\r\n      return {\r\n        ...state,\r\n        uploadedFile: null,\r\n        selectedFile,\r\n        inputName: name,\r\n        inputSearch: '',\r\n        newEntry: null,\r\n      };\r\n    }\r\n    case 'upload': {\r\n      if (action.file.type !== 'text/x-bibtex') {\r\n        return {\r\n          ...state,\r\n          errorMessage: 'Uploaded file is not bibtex',\r\n        };\r\n      }\r\n      return {\r\n        ...state,\r\n        uploadedFile: action.file,\r\n        inputName: action.file.name.split('.').slice(0, -1).join('.'),\r\n      };\r\n    }\r\n    case 'delete': {\r\n      if (!state.selectedFile)\r\n        return {\r\n          ...state,\r\n          errorMessage: 'No Database selected',\r\n        };\r\n      return {\r\n        ...state,\r\n        isDeletingFile: true,\r\n      };\r\n    }\r\n    case 'save': {\r\n      if (!state.inputName)\r\n        return {\r\n          ...state,\r\n          errorMessage: 'Database name cannot be empty',\r\n        };\r\n      if (state.uploadedFile) {\r\n        return {\r\n          ...state,\r\n          isUploadingFile: true,\r\n        };\r\n      } else if (state.selectedFile) {\r\n        return {\r\n          ...state,\r\n          isSavingFile: true,\r\n        };\r\n      } else {\r\n        return {\r\n          ...state,\r\n          isCreatingFile: true,\r\n        };\r\n      }\r\n    }\r\n    case 'finishDeleting': {\r\n      if (!action.ok) {\r\n        return {\r\n          ...state,\r\n          isDeletingFile: false,\r\n          errorMessage: action.err,\r\n        };\r\n      }\r\n      return {\r\n        ...state,\r\n        isDeletingFile: false,\r\n        selectedFile: null,\r\n        isLoading: true,\r\n        inputName: '',\r\n      };\r\n    }\r\n    case 'finishSaving': {\r\n      if (!action.ok) {\r\n        return {\r\n          ...state,\r\n          isSavingFile: false,\r\n          errorMessage: action.err,\r\n        };\r\n      }\r\n      return {\r\n        ...state,\r\n        isSavingFile: false,\r\n        selectedFile: action.file,\r\n        isLoading: true,\r\n      };\r\n    }\r\n    case 'finishCreating': {\r\n      if (!action.ok) {\r\n        return {\r\n          ...state,\r\n          isCreatingFile: false,\r\n          errorMessage: action.err,\r\n        };\r\n      }\r\n      return {\r\n        ...state,\r\n        isCreatingFile: false,\r\n        selectedFile: action.file,\r\n        isLoading: true,\r\n        inputName: action.file.bibtexdatabasename,\r\n      };\r\n    }\r\n    case 'finishUploading': {\r\n      if (!action.ok) {\r\n        return {\r\n          ...state,\r\n          isUploadingFile: false,\r\n          uploadedFile: null,\r\n          errorMessage: action.err,\r\n        };\r\n      }\r\n      return {\r\n        ...state,\r\n        isUploadingFile: false,\r\n        uploadedFile: null,\r\n        isLoading: true,\r\n        selectedFile: action.file,\r\n        inputName: action.file.bibtexdatabasename,\r\n      };\r\n    }\r\n    //\r\n    // Entry List\r\n    //\r\n    case 'selectEntry': {\r\n      const selectedEntry =\r\n        state.selectedEntry && action.entry._id === state.selectedEntry._id\r\n          ? null\r\n          : action.entry;\r\n      return {\r\n        ...state,\r\n        selectedEntry,\r\n        newEntry: null,\r\n        entryChanges: selectedEntry,\r\n      };\r\n    }\r\n    case 'inputSearch': {\r\n      return {\r\n        ...state,\r\n        inputSearch: action.value,\r\n      };\r\n    }\r\n    case 'selectNew': {\r\n      const newEntry = { entryType: action.value };\r\n      return {\r\n        ...state,\r\n        newEntry,\r\n        selectedEntry: null,\r\n        entryChanges: {\r\n          ...newEntry,\r\n          entryTags: {},\r\n          citationKey: '',\r\n        },\r\n      };\r\n    }\r\n    case 'unselectNew': {\r\n      return {\r\n        ...state,\r\n        newEntry: null,\r\n      };\r\n    }\r\n    //\r\n    // Info List\r\n    //\r\n    case 'inputCitationKey': {\r\n      return {\r\n        ...state,\r\n        entryChanges: {\r\n          ...state.entryChanges,\r\n          citationKey: action.value,\r\n        },\r\n      };\r\n    }\r\n    case 'inputTag': {\r\n      return {\r\n        ...state,\r\n        entryChanges: {\r\n          ...state.entryChanges,\r\n          entryTags: {\r\n            ...state.entryChanges.entryTags,\r\n            [action.tag]: action.value,\r\n          },\r\n        },\r\n      };\r\n    }\r\n    case 'deleteEntry': {\r\n      if (state.newEntry) {\r\n        return {\r\n          ...state,\r\n          newEntry: null,\r\n        };\r\n      }\r\n      return {\r\n        ...state,\r\n        isDeletingEntry: true,\r\n      };\r\n    }\r\n    case 'saveEntry': {\r\n      for (let tag of entryFields[state.entryChanges.entryType].required) {\r\n        if (\r\n          !state.entryChanges.entryTags[tag] ||\r\n          state.entryChanges.entryTags[tag] === ''\r\n        )\r\n          return {\r\n            ...state,\r\n            errorMessage: `Entry field '${tag}' cannot be empty`,\r\n          };\r\n      }\r\n      if (state.entryChanges.citationKey === '')\r\n        return {\r\n          ...state,\r\n          errorMessage: `Citation key cannot be empty`,\r\n        };\r\n      if (state.newEntry) {\r\n        return {\r\n          ...state,\r\n          isCreatingEntry: true,\r\n        };\r\n      }\r\n      return {\r\n        ...state,\r\n        isSavingEntry: true,\r\n      };\r\n    }\r\n    case 'finishDeletingEntry': {\r\n      if (!action.ok) {\r\n        return {\r\n          ...state,\r\n          isDeletingEntry: false,\r\n          errorMessage: action.err,\r\n        };\r\n      }\r\n      return {\r\n        ...state,\r\n        isDeletingEntry: false,\r\n        selectedEntry: null,\r\n        entryChanges: null,\r\n        isLoading: true,\r\n      };\r\n    }\r\n    case 'finishCreatingEntry': {\r\n      if (!action.ok) {\r\n        return {\r\n          ...state,\r\n          isCreatingEntry: false,\r\n          errorMessage: action.err,\r\n        };\r\n      }\r\n      return {\r\n        ...state,\r\n        isCreatingEntry: false,\r\n        selectedEntry: action.entry,\r\n        inputSearch: '',\r\n        entryChanges: action.entry,\r\n        isLoading: true,\r\n        newEntry: null,\r\n      };\r\n    }\r\n    case 'finishSavingEntry': {\r\n      if (!action.ok) {\r\n        return {\r\n          ...state,\r\n          isSavingEntry: false,\r\n          windowOpened: false,\r\n          errorMessage: action.err,\r\n        };\r\n      }\r\n      return {\r\n        ...state,\r\n        isSavingEntry: false,\r\n        windowOpened: false,\r\n        selectedEntry: action.entry,\r\n        entryChanges: action.entry,\r\n        isLoading: true,\r\n      };\r\n    }\r\n    case 'selectGroup': {\r\n      console.log('GROUP');\r\n      console.log(action);\r\n      return {\r\n        ...state,\r\n        selectedGroup: action.group,\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n    //\r\n    // Edit window\r\n    //\r\n    case 'openWindow': {\r\n      return {\r\n        ...state,\r\n        windowOpened: true,\r\n      };\r\n    }\r\n    case 'closeWindow': {\r\n      return {\r\n        ...state,\r\n        windowOpened: false,\r\n      };\r\n    }\r\n    case 'showError': {\r\n      return {\r\n        ...state,\r\n        errorMessage: action.error,\r\n      };\r\n    }\r\n    case 'removeError': {\r\n      return {\r\n        ...state,\r\n        errorMessage: null,\r\n      };\r\n    }\r\n  }\r\n}\r\n\r\nconst Editor = () => {\r\n  const initialState = {\r\n    user: null,\r\n    groups: null,\r\n    windowOpened: false,\r\n    selectedGroup: 'user',\r\n    isLoading: true,\r\n    isDeletingFile: false,\r\n    isDeletingEntry: false,\r\n    isUploadingFile: false,\r\n    isSavingFile: false,\r\n    isSavingEntry: false,\r\n    isCreatingFile: false,\r\n    isCreatingEntry: false,\r\n    selectedFile: null,\r\n    selectedEntry: null,\r\n    entryChanges: null,\r\n    newEntry: null,\r\n    uploadedFile: null,\r\n    inputName: '',\r\n    inputSearch: '',\r\n    errorMessage: null,\r\n    isErrorAppearing: false,\r\n  };\r\n  const [state, dispatch] = useReducer(editorReducer, initialState);\r\n  const timeout = useRef(null);\r\n\r\n  // USER\r\n  useEffect(() => {\r\n    const fetchUser = async () => {\r\n      const user = await utils.getUser();\r\n      dispatch({ type: 'setUser', user });\r\n    };\r\n    fetchUser();\r\n  }, []);\r\n  // FETCH\r\n  useEffect(() => {\r\n    const fetchFiles = async () => {\r\n      const files = await utils.getDatabases();\r\n      const groups = await utils.getGroups();\r\n      dispatch({ type: 'load', files, groups });\r\n    };\r\n    if (state.isLoading) fetchFiles();\r\n  }, [state.isLoading]);\r\n  // DELETE FILE\r\n  useEffect(() => {\r\n    const deleteFile = async () => {\r\n      const res = await utils.deleteDatabase(state.selectedFile._id);\r\n      const err = res.data.error ? res.data.error.reason : null;\r\n      dispatch({ type: 'finishDeleting', ok: res.data.ok, err });\r\n    };\r\n    if (state.isDeletingFile) deleteFile();\r\n  }, [state.isDeletingFile, state.selectedFile]);\r\n  // CREATE FILE\r\n  useEffect(() => {\r\n    const createFile = async () => {\r\n      if (state.selectedGroup === 'user') {\r\n        const res = await utils.createDatabase(state.inputName);\r\n        const err = res.data.error ? res.data.error.reason : null;\r\n        dispatch({\r\n          type: 'finishCreating',\r\n          ok: res.data.ok,\r\n          file: res.data.response,\r\n          err,\r\n        });\r\n      } else {\r\n        const res = await utils.createDatabase(\r\n          state.inputName,\r\n          state.selectedGroup\r\n        );\r\n        const err = res.data.error ? res.data.error.reason : null;\r\n        dispatch({\r\n          type: 'finishCreating',\r\n          ok: res.data.ok,\r\n          file: res.data.response,\r\n          err,\r\n        });\r\n      }\r\n    };\r\n    if (state.isCreatingFile) createFile();\r\n  }, [state.isCreatingFile, state.inputName, state.selectedGroup]);\r\n  // UPLOAD FILE\r\n  useEffect(() => {\r\n    const uploadFile = async () => {\r\n      const fileReader = new FileReader();\r\n      fileReader.readAsText(state.uploadedFile);\r\n      fileReader.onload = async () => {\r\n        const res = await utils.uploadDatabase(\r\n          fileReader.result,\r\n          state.inputName,\r\n          state.selectedGroup\r\n        );\r\n        const err = res.data.error ? res.data.error.reason : null;\r\n        dispatch({\r\n          type: 'finishUploading',\r\n          ok: res.data.ok,\r\n          file: res.data.response,\r\n          err,\r\n        });\r\n      };\r\n      fileReader.onerror = () => {\r\n        console.log(fileReader.error);\r\n        dispatch({\r\n          type: 'finishUploading',\r\n          ok: false,\r\n          err: 'Failed to read Bibtex file',\r\n        });\r\n      };\r\n    };\r\n    if (state.isUploadingFile) uploadFile();\r\n  }, [\r\n    state.isUploadingFile,\r\n    state.uploadedFile,\r\n    state.inputName,\r\n    state.selectedGroup,\r\n  ]);\r\n  // CHANGE NAME\r\n  useEffect(() => {\r\n    const changeName = async () => {\r\n      const res = await utils.changeName(\r\n        state.inputName,\r\n        state.selectedFile._id\r\n      );\r\n      const err = res.data.error ? res.data.error.reason : null;\r\n      dispatch({\r\n        type: 'finishSaving',\r\n        ok: res.data.ok,\r\n        file: res.data.response,\r\n        err,\r\n      });\r\n    };\r\n    if (state.isSavingFile) changeName();\r\n  }, [state.isSavingFile, state.inputName, state.selectedFile]);\r\n  // DELETE ENTRY\r\n  useEffect(() => {\r\n    const deleteEntry = async () => {\r\n      const res = await utils.deleteEntry(\r\n        state.selectedEntry._id,\r\n        state.selectedFile._id\r\n      );\r\n      const err = res.data.error ? res.data.error.reason : null;\r\n      dispatch({ type: 'finishDeletingEntry', ok: res.data.ok, err });\r\n    };\r\n    if (state.isDeletingEntry) deleteEntry();\r\n  }, [state.isDeletingEntry, state.selectedFile, state.selectedEntry]);\r\n  // CREATE ENTRY\r\n  useEffect(() => {\r\n    const createEntry = async () => {\r\n      const res = await utils.addEntry(\r\n        state.entryChanges,\r\n        state.selectedFile._id\r\n      );\r\n      const err = res.data.error ? res.data.error.reason : null;\r\n      dispatch({\r\n        type: 'finishCreatingEntry',\r\n        ok: res.data.ok,\r\n        entry: res.data.response,\r\n        err,\r\n      });\r\n    };\r\n    if (state.isCreatingEntry) createEntry();\r\n  }, [state.isCreatingEntry, state.entryChanges, state.selectedFile]);\r\n  // SAVE ENTRY\r\n  useEffect(() => {\r\n    const saveEntry = async () => {\r\n      const res = await utils.changeEntry(\r\n        state.entryChanges,\r\n        state.selectedFile._id\r\n      );\r\n      const err = res.data.error ? res.data.error.reason : null;\r\n      dispatch({\r\n        type: 'finishSavingEntry',\r\n        ok: res.data.ok,\r\n        entry: res.data.response,\r\n        err,\r\n      });\r\n    };\r\n    if (state.isSavingEntry) saveEntry();\r\n  }, [state.isSavingEntry, state.entryChanges, state.selectedFile]);\r\n  // ERROR\r\n  useEffect(() => {\r\n    const onTimeout = () => {\r\n      dispatch({ type: 'removeError' });\r\n    };\r\n\r\n    if (state.errorMessage) {\r\n      if (timeout.current) {\r\n        clearTimeout(timeout.current);\r\n      }\r\n      timeout.current = setTimeout(onTimeout, 6000);\r\n    }\r\n  }, [state.errorMessage]);\r\n\r\n  const fileActive = !state.isLoading;\r\n  const entryActive = !!state.selectedFile && !state.isLoading;\r\n  const infoActive =\r\n    !!state.selectedFile &&\r\n    !state.isLoading &&\r\n    ((!!state.selectedEntry &&\r\n      !!state.selectedFile.entries.find(\r\n        (entry) => entry._id === state.selectedEntry._id\r\n      )) ||\r\n      !!state.newEntry);\r\n\r\n  const isSelectedAllowed =\r\n    state.selectedFile &&\r\n    ((state.selectedFile.user &&\r\n      state.selectedFile.user._id === state.user._id) ||\r\n      (state.selectedFile.group &&\r\n        (state.selectedFile.group.owner === state.user._id ||\r\n          state.selectedFile.group.users.includes(state.user._id))));\r\n\r\n  return (\r\n    <div className='Editor'>\r\n      <div className='main-part'>\r\n        <FileList\r\n          active={fileActive}\r\n          isSelectedAllowed={isSelectedAllowed}\r\n          selectedFile={state.selectedFile}\r\n          uploading={!!state.uploadedFile}\r\n          inputName={state.inputName}\r\n          fileList={state.fileList}\r\n          groups={state.groups}\r\n          user={state.user}\r\n          dispatch={dispatch}\r\n        />\r\n        <EntryList\r\n          active={entryActive}\r\n          isSelectedAllowed={isSelectedAllowed}\r\n          file={state.selectedFile}\r\n          selectedEntry={state.selectedEntry}\r\n          newEntry={state.newEntry}\r\n          search={state.inputSearch}\r\n          dispatch={dispatch}\r\n        />\r\n        <InfoList\r\n          active={infoActive}\r\n          isSelectedAllowed={isSelectedAllowed}\r\n          entry={state.selectedEntry || state.newEntry}\r\n          entryChanges={state.entryChanges}\r\n          dispatch={dispatch}\r\n        />\r\n        <EditWindow\r\n          active={state.windowOpened}\r\n          entry={state.selectedEntry || state.newEntry}\r\n          entryChanges={state.entryChanges}\r\n          dispatch={dispatch}\r\n        />\r\n      </div>\r\n      <div\r\n        className='editor-error-message'\r\n        style={{\r\n          bottom: state.errorMessage ? '60px' : '30px',\r\n          opacity: state.errorMessage ? '1' : '0',\r\n        }}\r\n      >\r\n        {state.errorMessage || ''}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nEditor.propTypes = {};\r\n\r\nexport default Editor;\r\n","import axios from 'axios';\r\nimport { uploadDatabase } from './editor';\r\nimport bibtexParse from 'bibtex-parser-js';\r\nimport entryFields from '../utils/entryFields';\r\nimport reference from '@devisle/reference-js';\r\nimport { xmlToBib } from './bibtex';\r\n\r\nconst typeChange = {\r\n  ARTICLE: 'article',\r\n  BOOK: 'book',\r\n  BOOKLET: 'booklet',\r\n  CONFERENCE: 'conference',\r\n  INBOOK: 'inBook',\r\n  INCOLLECTION: 'inCollection',\r\n  INPROCEEDINGS: 'inProceedings',\r\n  MANUAL: 'manual',\r\n  MASTERSTHESIS: 'mastersThesis',\r\n  MISC: 'misc',\r\n  ONLINE: 'online',\r\n  PHDTHESIS: 'phdThesis',\r\n  PROCEEDINGS: 'proceedings',\r\n};\r\n\r\nconst extractDatabase = async (bibtexFile, name, group) => {\r\n  console.log('GROUP');\r\n  console.log(group);\r\n  const bibtexJSON = bibtexParse.toJSON(bibtexFile);\r\n  console.log(bibtexJSON);\r\n  const entries = [];\r\n  for (let entry of bibtexJSON) {\r\n    entry.entryType = typeChange[entry.entryType];\r\n    if (!entryFields[entry.entryType]) {\r\n      continue;\r\n    }\r\n    for (let tag of Object.keys(entry.entryTags)) {\r\n      if (\r\n        entryFields[entry.entryType].required.includes(tag.toLowerCase()) ||\r\n        entryFields[entry.entryType].extra.includes(tag.toLowerCase())\r\n      ) {\r\n        entry.entryTags[tag.toLowerCase()] = entry.entryTags[tag];\r\n      }\r\n      delete entry.entryTags[tag];\r\n    }\r\n    let contains = true;\r\n    for (let tag of entryFields[entry.entryType].required) {\r\n      if (!entry.entryTags[tag]) {\r\n        contains = false;\r\n      }\r\n    }\r\n    if (contains) entries.push(entry);\r\n  }\r\n  const database = { bibtexdatabasename: name, entries };\r\n  try {\r\n    const res = await axios.post(`/api/database/extract`, {\r\n      ...database,\r\n      group: group === 'user' ? null : group,\r\n    });\r\n    console.log(res.data);\r\n    return res;\r\n  } catch (err) {\r\n    console.log(err.response);\r\n    return err.response;\r\n  }\r\n};\r\n\r\nexport const getFiles = async () => {\r\n  try {\r\n    const res = await axios.get('/api/papers/files');\r\n    return res;\r\n  } catch (err) {\r\n    return err.response;\r\n  }\r\n};\r\n\r\nexport const deleteFile = async (id) => {\r\n  try {\r\n    const res = await axios.delete(`/api/papers/files/${id}`);\r\n    return res;\r\n  } catch (err) {\r\n    return err.response;\r\n  }\r\n};\r\n\r\nexport const saveFile = async (file, changeProgress) => {\r\n  const data = new FormData();\r\n  data.append('file', file);\r\n  try {\r\n    const res = await axios.post('/api/papers/files', data, {\r\n      onUploadProgress: (progressEvent) => {\r\n        const totalLength = progressEvent.lengthComputable\r\n          ? progressEvent.total\r\n          : progressEvent.target.getResponseHeader('content-length') ||\r\n            progressEvent.target.getResponseHeader(\r\n              'x-decompressed-content-length'\r\n            );\r\n        console.log('onUploadProgress', totalLength);\r\n        if (totalLength !== null) {\r\n          changeProgress(\r\n            Math.round((progressEvent.loaded * 100) / totalLength)\r\n          );\r\n        }\r\n      },\r\n    });\r\n    return res;\r\n  } catch (err) {\r\n    return err.response;\r\n  }\r\n};\r\n\r\nconst extractFile = async (fileId) => {\r\n  const blob = await fetch(`/api/papers/files/${fileId}`).then((res) =>\r\n    res.blob()\r\n  );\r\n\r\n  const formData = new FormData();\r\n  formData.append('input', blob);\r\n\r\n  console.log('SENT');\r\n  const res = await fetch(\r\n    `http://cloud.science-miner.com/grobid/api/processReferences`,\r\n    {\r\n      method: 'POST',\r\n      body: formData,\r\n      headers: {\r\n        Accept: 'application/x-bibtex',\r\n      },\r\n    }\r\n  );\r\n  if (res.status !== 200) return { ok: false, err: 'No references found' };\r\n  const bibBlob = await res.blob();\r\n  return { ok: true, blob: bibBlob };\r\n};\r\n\r\nconst extractHeader = async (fileId) => {\r\n  const blob = await fetch(`/api/papers/files/${fileId}`).then((res) =>\r\n    res.blob()\r\n  );\r\n\r\n  const formData = new FormData();\r\n  formData.append('input', blob);\r\n  formData.append('consolidateHeader', '1');\r\n\r\n  console.log('SENT');\r\n  const res = await fetch(\r\n    `http://cloud.science-miner.com/grobid/api/processHeaderDocument`,\r\n    {\r\n      method: 'POST',\r\n      body: formData,\r\n    }\r\n  ).then((res) => res.text());\r\n  const bibtex = xmlToBib(res);\r\n  return bibtex;\r\n};\r\n\r\nconst readUploadedFileAsText = (inputFile) => {\r\n  const temporaryFileReader = new FileReader();\r\n  return new Promise((resolve, reject) => {\r\n    temporaryFileReader.onerror = () => {\r\n      temporaryFileReader.abort();\r\n      reject(new DOMException('Problem parsing input file.'));\r\n    };\r\n\r\n    temporaryFileReader.onload = () => {\r\n      resolve(temporaryFileReader.result);\r\n    };\r\n    temporaryFileReader.readAsText(inputFile);\r\n  });\r\n};\r\n\r\nexport const extractAndUploadBibtex = async (fileId, databaseName, group) => {\r\n  try {\r\n    const blob = await extractFile(fileId);\r\n    if (!blob.ok) return { data: blob };\r\n    const bibtexFile = await readUploadedFileAsText(blob.blob);\r\n    const res = await extractDatabase(bibtexFile, databaseName, group);\r\n    return res;\r\n  } catch (err) {\r\n    return { data: { ok: false, err: err.message } };\r\n  }\r\n};\r\n\r\nexport const extractAndUploadHeader = async (\r\n  fileId,\r\n  databaseName,\r\n  group,\r\n  citationKey\r\n) => {\r\n  try {\r\n    const bibtex = await extractHeader(fileId);\r\n    if (!bibtex.ok) {\r\n      return { data: { ok: false, err: 'Failed to extract reference' } };\r\n    }\r\n    const entry = {\r\n      entryType: 'article',\r\n      entryTags: bibtex.entry,\r\n      citationKey: citationKey,\r\n    };\r\n    const database = { bibtexdatabasename: databaseName, entry };\r\n    try {\r\n      const res = await axios.post(`/api/database/header`, {\r\n        ...database,\r\n        group: group === 'user' ? null : group,\r\n      });\r\n      console.log(res.data);\r\n      return res;\r\n    } catch (err) {\r\n      console.log(err.response);\r\n      return {\r\n        data: {\r\n          ok: false,\r\n          err: err.response.data.error.reason,\r\n        },\r\n      };\r\n    }\r\n  } catch (err) {\r\n    console.log(err);\r\n    return { data: { ok: false, err: err.message } };\r\n  }\r\n};\r\n\r\nexport const getDatabases = async () => {\r\n  const res = await axios.get('/api/database/all');\r\n  return res.data.response;\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './PaperTableRow.css';\r\n\r\nconst PaperTableRow = (props) => {\r\n  const d = new Date(props.paper.file.uploadDate);\r\n  return (\r\n    <tr>\r\n      <td>{props.paper.filename}</td>\r\n      <td>{`${d.toLocaleDateString()} ${d.toLocaleTimeString()}`}</td>\r\n      <td>{Math.round(props.paper.file.length / 100) / 10 + 'KB'}</td>\r\n      <td>\r\n        <div className='paper-buttons'>\r\n          <button\r\n            onClick={(e) =>\r\n              props.dispatch({\r\n                type: 'deleteFile',\r\n                file: props.paper,\r\n              })\r\n            }\r\n            className='remove-btn'\r\n          >\r\n            Remove\r\n          </button>\r\n          <button\r\n            onClick={(e) => {\r\n              props.dispatch({\r\n                type: 'openWindow',\r\n                file: props.paper,\r\n              });\r\n            }}\r\n            className='extract-btn'\r\n          >\r\n            Extract\r\n          </button>\r\n          <a\r\n            className='download-paper-btn'\r\n            href={props.paper.url}\r\n            download={`${props.paper.filename}`}\r\n          >\r\n            Download\r\n          </a>\r\n        </div>\r\n      </td>\r\n    </tr>\r\n  );\r\n};\r\n\r\nPaperTableRow.propTypes = {\r\n  paper: PropTypes.object.isRequired,\r\n  dispatch: PropTypes.any.isRequired,\r\n  downloadString: PropTypes.any,\r\n};\r\n\r\nexport default PaperTableRow;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './ExtractWindow.css';\r\n\r\nconst ExtractWindow = (props) => {\r\n  if (!props.active) {\r\n    return <div className='paper-window disabled'></div>;\r\n  }\r\n  const groupOptions = props.groups.map((group, i) => {\r\n    return {\r\n      key: i,\r\n      text: group.name,\r\n      value: group._id,\r\n    };\r\n  });\r\n  groupOptions.push({\r\n    key: props.groups.length,\r\n    text: 'Personal',\r\n    value: 'personal',\r\n  });\r\n  const options = props.databases\r\n    .filter((database) => {\r\n      if (props.selectedGroup === 'personal') {\r\n        return database.user;\r\n      }\r\n      return database.group && database.group._id === props.selectedGroup;\r\n    })\r\n    .map((database, i) => {\r\n      return {\r\n        key: i,\r\n        text: database.bibtexdatabasename,\r\n        value: database.bibtexdatabasename,\r\n      };\r\n    });\r\n  options.push({\r\n    key: props.databases.length,\r\n    text: 'New database',\r\n    value: 'new',\r\n  });\r\n\r\n  return (\r\n    <div className='paper-window'>\r\n      <div className='paper-window-file'>{props.file.filename}</div>\r\n      <div className='select-method-label'>Select Extraction Method</div>\r\n      <div className='select-method-btn'>\r\n        <select\r\n          className='select-method'\r\n          placeholder='Select extraction method'\r\n          value={props.method}\r\n          onChange={(e) =>\r\n            props.dispatch({\r\n              type: 'selectMethod',\r\n              value: e.target.value,\r\n            })\r\n          }\r\n        >\r\n          <option value='header'>Single reference (Header)</option>\r\n          <option value='references'>All references</option>\r\n        </select>\r\n      </div>\r\n      <div className='select-group-label'>Select a group</div>\r\n      <div className='select-group-btn'>\r\n        <select\r\n          className='select-group'\r\n          placeholder='Select a group'\r\n          value={props.selectedGroup}\r\n          onChange={(e) =>\r\n            props.dispatch({\r\n              type: 'selectGroup',\r\n              value: e.target.value,\r\n            })\r\n          }\r\n        >\r\n          {groupOptions.map((option) => (\r\n            <option value={option.value} key={option.key}>\r\n              {option.text}\r\n            </option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n      <div className='select-database-label'>Select a database</div>\r\n      <div className='select-database-btn'>\r\n        <select\r\n          className='select-database'\r\n          placeholder='Select a database'\r\n          disabled={!props.selectedGroup}\r\n          value={props.selected || 'new'}\r\n          onChange={(e) =>\r\n            props.dispatch({\r\n              type: 'selectDatabase',\r\n              value: e.target.value,\r\n            })\r\n          }\r\n        >\r\n          {options.map((option) => (\r\n            <option value={option.value} key={option.key}>\r\n              {option.text}\r\n            </option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n      <div className='name-label'>Enter a name</div>\r\n      <input\r\n        className='name-input'\r\n        id='database-name'\r\n        autoComplete='off'\r\n        readOnly={props.selected && props.selected !== 'new'}\r\n        value={props.inputValue}\r\n        onChange={(e) =>\r\n          props.dispatch({\r\n            type: 'inputName',\r\n            value: e.target.value,\r\n          })\r\n        }\r\n      ></input>\r\n      <div\r\n        className={`extra-input ${props.method === 'header' ? '' : 'disabled'}`}\r\n      >\r\n        <div className='name-label'>Enter Citation Key</div>\r\n        <input\r\n          className='name-input'\r\n          id='citation-key'\r\n          autoComplete='off'\r\n          placeholder='Enter new Citation Key'\r\n          readOnly={props.method !== 'header'}\r\n          value={props.citationKey}\r\n          onChange={(e) =>\r\n            props.dispatch({\r\n              type: 'changeCitationKey',\r\n              value: e.target.value,\r\n            })\r\n          }\r\n        ></input>\r\n      </div>\r\n\r\n      <div className={`message-div ${props.windowMessage.type || ''}`}>\r\n        {props.windowMessage.message || ''}\r\n      </div>\r\n      <button\r\n        className='paper-extract'\r\n        onClick={(e) =>\r\n          props.dispatch({\r\n            type: 'extractBibtex',\r\n          })\r\n        }\r\n      >\r\n        Extract\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nExtractWindow.propTypes = {\r\n  active: PropTypes.bool.isRequired,\r\n  file: PropTypes.object,\r\n  databases: PropTypes.array,\r\n  groups: PropTypes.array,\r\n  citationKey: PropTypes.string.isRequired,\r\n  selectedGroup: PropTypes.any,\r\n  inputValue: PropTypes.string.isRequired,\r\n  selected: PropTypes.string,\r\n  windowMessage: PropTypes.object.isRequired,\r\n  dispatch: PropTypes.any.isRequired,\r\n  method: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default ExtractWindow;\r\n","import React, { useEffect, useReducer } from 'react';\r\nimport * as utils from '../../actions/paper';\r\nimport { getGroups } from '../../actions/editor';\r\nimport { Table } from 'react-bootstrap';\r\nimport PaperTableRow from './PaperTableRow';\r\nimport './Paper.css';\r\nimport ExtractWindow from './ExtractWindow';\r\n\r\nfunction paperReducer(state, action) {\r\n  switch (action.type) {\r\n    case 'extractBibtex': {\r\n      if (state.isExtracting) return state;\r\n      return {\r\n        ...state,\r\n        isExtracting: true,\r\n        windowMessage: {\r\n          type: 'loading',\r\n          message: 'Extracting...',\r\n        },\r\n      };\r\n    }\r\n    case 'changeProgress': {\r\n      return {\r\n        ...state,\r\n        progress: action.progress,\r\n      };\r\n    }\r\n    case 'setDatabases': {\r\n      return {\r\n        ...state,\r\n        databases: action.databases,\r\n      };\r\n    }\r\n    case 'setGroups': {\r\n      return {\r\n        ...state,\r\n        groups: action.groups,\r\n      };\r\n    }\r\n    case 'selectGroup': {\r\n      return {\r\n        ...state,\r\n        selectedGroup: action.value,\r\n        selected: 'new',\r\n        windowMessage: {},\r\n      };\r\n    }\r\n    case 'selectDatabase': {\r\n      return {\r\n        ...state,\r\n        selected: action.value,\r\n        inputName: action.value !== 'new' ? action.value : '',\r\n        windowMessage: {},\r\n      };\r\n    }\r\n    case 'inputName': {\r\n      return {\r\n        ...state,\r\n        inputName: action.value,\r\n        windowMessage: {},\r\n      };\r\n    }\r\n    case 'searchName': {\r\n      return {\r\n        ...state,\r\n        searchName: action.value,\r\n      };\r\n    }\r\n    case 'uploadFile': {\r\n      console.log(action.file);\r\n      if (!action.file || action.file.type !== 'application/pdf')\r\n        return {\r\n          ...state,\r\n          uploadedFile: null,\r\n        };\r\n      return {\r\n        ...state,\r\n        uploadedFile: action.file,\r\n      };\r\n    }\r\n    case 'closeUploaded': {\r\n      return {\r\n        ...state,\r\n        uploadedFile: null,\r\n      };\r\n    }\r\n    case 'saveFile': {\r\n      return {\r\n        ...state,\r\n        isSaving: true,\r\n        progress: 0,\r\n      };\r\n    }\r\n    case 'deleteFile': {\r\n      return {\r\n        ...state,\r\n        isDeleting: true,\r\n        deletedFile: action.file,\r\n      };\r\n    }\r\n    case 'openWindow': {\r\n      return {\r\n        ...state,\r\n        windowOpened: true,\r\n        extractedFile: action.file,\r\n      };\r\n    }\r\n    case 'closeWindow': {\r\n      if (state.isExtracting) return state;\r\n      return {\r\n        ...state,\r\n        windowOpened: false,\r\n        windowMessage: {},\r\n      };\r\n    }\r\n    case 'finishLoading': {\r\n      console.log(action.papers);\r\n      return {\r\n        ...state,\r\n        isLoading: false,\r\n        papers: action.papers,\r\n        windowMessage: {},\r\n      };\r\n    }\r\n    case 'finishDeleting': {\r\n      if (!action.ok) return { ...state, isDeleting: false };\r\n      return {\r\n        ...state,\r\n        isDeleting: false,\r\n        isLoading: true,\r\n      };\r\n    }\r\n    case 'finishSaving': {\r\n      if (!action.ok) return { ...state, isSaving: false };\r\n      return {\r\n        ...state,\r\n        isSaving: false,\r\n        isLoading: true,\r\n        progress: null,\r\n      };\r\n    }\r\n    case 'finishExtracting': {\r\n      if (!action.ok)\r\n        return {\r\n          ...state,\r\n          windowMessage: {\r\n            type: 'err',\r\n            message: action.err,\r\n          },\r\n          isExtracting: false,\r\n        };\r\n      return {\r\n        ...state,\r\n        isExtracting: false,\r\n        windowMessage: {\r\n          type: 'success',\r\n          message: 'File uploaded',\r\n        },\r\n      };\r\n    }\r\n    case 'selectMethod': {\r\n      return {\r\n        ...state,\r\n        selectedMethod: action.value,\r\n        selectedCitationKey: '',\r\n      };\r\n    }\r\n    case 'changeCitationKey': {\r\n      return {\r\n        ...state,\r\n        selectedCitationKey: action.value,\r\n      };\r\n    }\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nconst Paper = () => {\r\n  const initialState = {\r\n    progress: null,\r\n    isLoading: true,\r\n    isDeleting: false,\r\n    isSaving: false,\r\n    isExtracting: false,\r\n    windowOpened: false,\r\n    papers: null,\r\n    uploadedFile: null,\r\n    deletedFile: null,\r\n    extractedFile: null,\r\n    groups: null,\r\n    databases: null,\r\n    selectedMethod: 'header',\r\n    selectedGroup: 'personal',\r\n    selected: null,\r\n    inputName: '',\r\n    searchName: '',\r\n    windowMessage: {},\r\n    selectedCitationKey: '',\r\n  };\r\n\r\n  const [state, dispatch] = useReducer(paperReducer, initialState);\r\n\r\n  useEffect(() => {\r\n    const setDatabases = async () => {\r\n      const databases = await utils.getDatabases();\r\n      dispatch({\r\n        type: 'setDatabases',\r\n        databases,\r\n      });\r\n    };\r\n    const setGroups = async () => {\r\n      const groups = await getGroups();\r\n      dispatch({\r\n        type: 'setGroups',\r\n        groups,\r\n      });\r\n    };\r\n    setGroups();\r\n    setDatabases();\r\n  }, []);\r\n  useEffect(() => {\r\n    const loadFiles = async () => {\r\n      const res = await utils.getFiles();\r\n      const papers = res.data.response;\r\n      const promises = [];\r\n      console.log(papers);\r\n      for (let paper of papers) {\r\n        promises.push(\r\n          fetch(`/api/papers/files/${paper.file._id}`)\r\n            .then((res) => res.blob())\r\n            .then((blob) => {\r\n              const url = window.URL.createObjectURL(blob);\r\n              paper.url = url;\r\n            })\r\n        );\r\n      }\r\n      console.log(papers);\r\n      await Promise.all(promises);\r\n      dispatch({\r\n        type: 'finishLoading',\r\n        papers,\r\n      });\r\n    };\r\n    if (state.isLoading) loadFiles();\r\n  }, [state.isLoading]);\r\n  useEffect(() => {\r\n    const deleteFile = async () => {\r\n      const res = await utils.deleteFile(state.deletedFile.file._id);\r\n      dispatch({\r\n        type: 'finishDeleting',\r\n        ok: res.data.ok,\r\n      });\r\n    };\r\n    if (state.isDeleting) deleteFile();\r\n  }, [state.isDeleting, state.deletedFile]);\r\n  useEffect(() => {\r\n    const saveFile = async () => {\r\n      const res = await utils.saveFile(state.uploadedFile, (n) => {\r\n        dispatch({\r\n          type: 'changeProgress',\r\n          progress: n,\r\n        });\r\n      });\r\n      dispatch({\r\n        type: 'finishSaving',\r\n        ok: res.data.ok,\r\n        file: res.data.response,\r\n      });\r\n    };\r\n    if (state.isSaving) saveFile();\r\n  }, [state.isSaving, state.uploadedFile]);\r\n  useEffect(() => {\r\n    const extractBibtex = async () => {\r\n      if (!state.inputName) {\r\n        return dispatch({\r\n          type: 'finishExtracting',\r\n          ok: false,\r\n          err: 'Database name cannot be empty',\r\n        });\r\n      }\r\n      console.log(state.inputName);\r\n      if (state.selectedMethod === 'references') {\r\n        const res = await utils.extractAndUploadBibtex(\r\n          state.extractedFile.file._id,\r\n          state.inputName,\r\n          state.selectedGroup === 'personal' ? null : state.selectedGroup\r\n        );\r\n        console.log(res);\r\n        console.log(res.data);\r\n        dispatch({\r\n          type: 'finishExtracting',\r\n          ok: res.data.ok,\r\n          err: res.data.err,\r\n          file: res.data.response,\r\n        });\r\n      } else {\r\n        if (state.selectedCitationKey === '') {\r\n          return dispatch({\r\n            type: 'finishExtracting',\r\n            ok: false,\r\n            err: 'Citation key cannot be empty',\r\n          });\r\n        }\r\n        const res = await utils.extractAndUploadHeader(\r\n          state.extractedFile.file._id,\r\n          state.inputName,\r\n          state.selectedGroup === 'personal' ? null : state.selectedGroup,\r\n          state.selectedCitationKey\r\n        );\r\n        console.log(res);\r\n        console.log(res.data);\r\n        dispatch({\r\n          type: 'finishExtracting',\r\n          ok: res.data.ok,\r\n          err: res.data.err,\r\n          file: res.data.response,\r\n        });\r\n      }\r\n    };\r\n    if (state.isExtracting) extractBibtex();\r\n  }, [\r\n    state.isExtracting,\r\n    state.extractedFile,\r\n    state.selectedCitationKey,\r\n    state.inputName,\r\n    state.selectedGroup,\r\n    state.selectedMethod,\r\n  ]);\r\n\r\n  if (state.isLoading || !state.papers) {\r\n    return <div className='Paper'>Loading</div>;\r\n  }\r\n\r\n  const paperFilter = (paper) => {\r\n    if (state.searchName === '') {\r\n      return true;\r\n    }\r\n    return paper.filename.includes(state.searchName);\r\n  };\r\n\r\n  const dataTable = state.papers\r\n    .filter(paperFilter)\r\n    .map((paper) => {\r\n      return (\r\n        <PaperTableRow paper={paper} dispatch={dispatch} key={paper._id} />\r\n      );\r\n    })\r\n    .reverse();\r\n  const uploadText = state.uploadedFile\r\n    ? state.uploadedFile.name\r\n    : 'No file selected';\r\n\r\n  return (\r\n    <div className='Paper'>\r\n      <div\r\n        className={\r\n          state.windowOpened ? 'paper-layout' : 'paper-layout disabled'\r\n        }\r\n        onClick={(e) => dispatch({ type: 'closeWindow' })}\r\n      ></div>\r\n      <ExtractWindow\r\n        active={state.windowOpened}\r\n        file={state.extractedFile}\r\n        groups={state.groups}\r\n        citationKey={state.selectedCitationKey}\r\n        method={state.selectedMethod}\r\n        selectedGroup={state.selectedGroup}\r\n        databases={state.databases}\r\n        inputValue={state.inputName}\r\n        windowMessage={state.windowMessage}\r\n        selected={state.selected}\r\n        dispatch={dispatch}\r\n      />\r\n      <div className='w3-light-grey'>\r\n        <div\r\n          className={`w3-container w3-blue w3-center ${\r\n            state.progress ? '' : 'disabled'\r\n          }`}\r\n          style={{\r\n            width: state.progress || 0 + '%',\r\n          }}\r\n        >\r\n          {state.progress || 0}%\r\n        </div>\r\n      </div>\r\n      <div className='paper-header'>\r\n        <div className='search-label'>Search by file name: </div>\r\n        <input\r\n          className='search-paper'\r\n          value={state.searchName}\r\n          onChange={(e) =>\r\n            dispatch({\r\n              type: 'searchName',\r\n              value: e.target.value,\r\n            })\r\n          }\r\n        ></input>\r\n        <input\r\n          type='file'\r\n          id='paper-file'\r\n          className='upload-input'\r\n          onChange={(e) =>\r\n            dispatch({\r\n              type: 'uploadFile',\r\n              file: e.target.files[0],\r\n            })\r\n          }\r\n        ></input>\r\n        <label htmlFor='paper-file' className='upload-label'>\r\n          Choose a file\r\n        </label>\r\n        <button\r\n          className={`upload-file-btn ${state.uploadedFile ? '' : 'disabled'}`}\r\n          onClick={(e) =>\r\n            dispatch({\r\n              type: 'saveFile',\r\n            })\r\n          }\r\n        >\r\n          Upload\r\n        </button>\r\n        <div\r\n          className={`upload-file-name ${\r\n            state.uploadedFile ? 'activated' : ''\r\n          }`}\r\n        >\r\n          {uploadText}\r\n        </div>\r\n        <button\r\n          className={`remove-uploaded ${state.uploadedFile ? '' : 'disabled'}`}\r\n          onClick={(e) =>\r\n            dispatch({\r\n              type: 'closeUploaded',\r\n            })\r\n          }\r\n        >\r\n          x\r\n        </button>\r\n      </div>\r\n      <div className='paper-wrapper'>\r\n        <Table className='paper-table' striped bordered hover>\r\n          <thead>\r\n            <tr>\r\n              <th>Paper</th>\r\n              <th>Uploaded</th>\r\n              <th>Size</th>\r\n              <th></th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>{dataTable}</tbody>\r\n        </Table>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Paper;\r\n","import React from 'react';\r\nimport { Link, Redirect } from 'react-router-dom';\r\n\r\nconst PublicDatabases = () => (\r\n  <ul>\r\n    <li>\r\n      <a href='https://www.scopus.com/'>Scopus</a>\r\n    </li>\r\n    <li>\r\n      <a href='http://login.webofknowledge.com/error/Error?Error=IPError&PathInfo=%2F&RouterURL=http%3A%2F%2Fwww.webofknowledge.com%2F&Domain=.webofknowledge.com&Src=IP&Alias=WOK5'>\r\n        Web of Science\r\n      </a>\r\n    </li>\r\n    <li>\r\n      <a href='https://pubmed.ncbi.nlm.nih.gov/'>PubMed</a>\r\n    </li>\r\n    <li>\r\n      <a href='https://eric.ed.gov/'>ERIC</a>\r\n    </li>\r\n    <li>\r\n      <a href='https://ieeexplore.ieee.org/Xplore/home.jsp'>IEEE Xplore</a>\r\n    </li>\r\n    <li>\r\n      <a href='https://www.sciencedirect.com/'>ScienceDirect</a>\r\n    </li>\r\n    <li>\r\n      <a href='https://doaj.org/'>Directory of Open Access Journals (DOAJ)</a>\r\n    </li>\r\n    <li>\r\n      <a href='https://www.jstor.org/'>JSTOR</a>\r\n    </li>\r\n    <li>\r\n      <a href='https://scholar.google.com/'>Google Scholar</a>\r\n    </li>\r\n  </ul>\r\n);\r\n\r\nexport default PublicDatabases;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\n\r\nconst Alert = ({ alerts }) =>\r\n  alerts !== null &&\r\n  alerts.length > 0 &&\r\n  alerts.map((alert) => (\r\n    <div key={alert.id} className={`alert alert-${alert.alertType}`}>\r\n      {alert.msg}\r\n    </div>\r\n  ));\r\n\r\nAlert.propTypes = {\r\n  alerts: PropTypes.array.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  alerts: state.alert,\r\n});\r\n\r\nexport default connect(mapStateToProps)(Alert);\r\n","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\n\r\nconst PrivateRoute = ({\r\n  component: Component,\r\n  roles,\r\n  auth: { isAuthenticated, loading },\r\n  ...rest\r\n}) => (\r\n  <Route\r\n    {...rest}\r\n    render={(props) =>\r\n      !isAuthenticated && !loading ? (\r\n        <Redirect to='/login' />\r\n      ) : (\r\n        <Component {...props} />\r\n      )\r\n    }\r\n  />\r\n);\r\n\r\nPrivateRoute.propTypes = {\r\n  auth: PropTypes.object.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  auth: state.auth,\r\n});\r\n\r\nexport default connect(mapStateToProps)(PrivateRoute);\r\n","import { SET_ALERT, REMOVE_ALERT } from '../actions/types';\r\n\r\nconst initialState = [];\r\n\r\nexport default function (state = initialState, action) {\r\n  const { type, payload } = action;\r\n\r\n  switch (type) {\r\n    case SET_ALERT:\r\n      return [...state, payload];\r\n    case REMOVE_ALERT:\r\n      return state.filter((alert) => alert.id !== payload);\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import {\r\n  REGISTER_SUCCESS,\r\n  REGISTER_FAIL,\r\n  USER_LOADED,\r\n  AUTH_ERROR,\r\n  LOGIN_SUCCESS,\r\n  LOGIN_FAIL,\r\n  LOGOUT,\r\n} from '../actions/types';\r\n\r\nconst initialState = {\r\n  token: localStorage.getItem('token'),\r\n  role: localStorage.getItem('role'),\r\n  isAuthenticated: null,\r\n  loading: true,\r\n  user: null,\r\n};\r\n\r\nexport default function (state = initialState, action) {\r\n  const { type, payload } = action;\r\n  console.log(action);\r\n\r\n  switch (type) {\r\n    case USER_LOADED:\r\n      return {\r\n        ...state,\r\n        isAuthenticated: true,\r\n        loading: false,\r\n        user: payload,\r\n      };\r\n    case REGISTER_SUCCESS:\r\n    case LOGIN_SUCCESS:\r\n      localStorage.setItem('token', payload.token);\r\n      localStorage.setItem('role', payload.role);\r\n      return {\r\n        ...state,\r\n        ...payload,\r\n        isAuthenticated: true,\r\n        loading: false,\r\n        role: payload.role,\r\n      };\r\n    case AUTH_ERROR:\r\n    case LOGIN_FAIL:\r\n    case LOGOUT:\r\n      localStorage.removeItem('token');\r\n      localStorage.removeItem('role');\r\n      return {\r\n        ...state,\r\n        token: null,\r\n        isAuthenticated: false,\r\n        loading: false,\r\n        role: null,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { combineReducers } from 'redux';\r\nimport alert from './alert';\r\nimport auth from './auth';\r\n\r\nexport default combineReducers({\r\n  alert,\r\n  auth,\r\n});\r\n","import { createStore, applyMiddleware } from 'redux';\r\nimport { composeWithDevTools } from 'redux-devtools-extension';\r\nimport thunk from 'redux-thunk';\r\nimport rootReducer from './reducers';\r\n\r\nconst initialState = {};\r\n\r\nconst middleware = [thunk];\r\n\r\nconst store = createStore(\r\n  rootReducer,\r\n  initialState,\r\n  composeWithDevTools(applyMiddleware(...middleware))\r\n);\r\n\r\nexport default store;\r\n","import axios from 'axios';\r\n\r\nexport const getUser = async () => {\r\n  const res = await axios.get('/api/user/me');\r\n  return res;\r\n};\r\n\r\nexport const getGroups = async (type) => {\r\n  const res = await axios.get(`/api/group/${type}`);\r\n  return res;\r\n};\r\n\r\nexport const deleteGroup = async (groupId) => {\r\n  try {\r\n    const res = await axios.delete(`/api/group/${groupId}`);\r\n    return res;\r\n  } catch (err) {\r\n    return err.response;\r\n  }\r\n};\r\n\r\nexport const leaveGroup = async (groupId) => {\r\n  try {\r\n    const res = await axios.post(`/api/group/leave`, {\r\n      id: groupId,\r\n    });\r\n    return res;\r\n  } catch (err) {\r\n    return err.response;\r\n  }\r\n};\r\n\r\nexport const joinGroup = async (groupId) => {\r\n  try {\r\n    const res = await axios.post('/api/group/join-request', {\r\n      id: groupId,\r\n    });\r\n    return res;\r\n  } catch (err) {\r\n    return err.response;\r\n  }\r\n};\r\n\r\nexport const createGroup = async (name) => {\r\n  try {\r\n    const res = await axios.post('/api/group/', { name });\r\n    return res;\r\n  } catch (err) {\r\n    return err.response;\r\n  }\r\n};\r\n\r\nexport const saveGroup = async (name, id) => {\r\n  try {\r\n    const res = await axios.put('/api/group', { name, id });\r\n    return res;\r\n  } catch (err) {\r\n    return err.response;\r\n  }\r\n};\r\n\r\nexport const acceptMember = async (groupId, userId) => {\r\n  try {\r\n    const res = await axios.post('/api/group/accept', { groupId, userId });\r\n    return res;\r\n  } catch (err) {\r\n    return err.response;\r\n  }\r\n};\r\n\r\nexport const rejectMember = async (groupId, userId) => {\r\n  try {\r\n    const res = await axios.post('/api/group/decline', { groupId, userId });\r\n    return res;\r\n  } catch (err) {\r\n    return err.response;\r\n  }\r\n};\r\n\r\nexport const banMember = async (groupId, userId) => {\r\n  try {\r\n    const res = await axios.post('/api/group/ban', { groupId, userId });\r\n    return res;\r\n  } catch (err) {\r\n    return err.response;\r\n  }\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './GroupBox.css';\r\n\r\nconst GroupBox = (props) => {\r\n  let btnName;\r\n  let btnClass;\r\n  let isRequested = false;\r\n  switch (props.groupType) {\r\n    case '': {\r\n      for (const user of props.group.joinRequests) {\r\n        if (user._id === props.user._id) {\r\n          isRequested = true;\r\n        }\r\n      }\r\n      btnName = isRequested ? 'Requested to join' : 'Join';\r\n      btnClass = 'box-click-btn box-safe';\r\n      break;\r\n    }\r\n    case 'own': {\r\n      btnName = 'Delete';\r\n      btnClass = 'box-click-btn box-dang';\r\n      break;\r\n    }\r\n    case 'me': {\r\n      btnName = 'Leave';\r\n      btnClass = 'box-click-btn box-dang';\r\n      break;\r\n    }\r\n    default:\r\n      break;\r\n  }\r\n  return (\r\n    <div\r\n      className={`group-box ${props.isSelected ? 'selected-group' : ''}`}\r\n      onClick={(e) => {\r\n        if (!e.target.classList.contains('box-click-btn'))\r\n          props.dispatch({\r\n            type: 'selectGroup',\r\n            group: props.group,\r\n          });\r\n      }}\r\n    >\r\n      <div className='box-header'>\r\n        <div className='box-name'>{props.group.name}</div>\r\n      </div>\r\n      <div className='box-body'>\r\n        <div className='box-owner'>\r\n          <div className='box-owner-label'>Owner:</div>\r\n          <div className='box-owner-name'>{props.group.owner.name}</div>\r\n        </div>\r\n        <div className='box-members'>\r\n          <div className='box-members-label'>Members:</div>\r\n          <div className='box-members-name'>{props.group.users.length + 1}</div>\r\n        </div>\r\n      </div>\r\n      <button\r\n        className={btnClass}\r\n        onClick={(e) => {\r\n          if (!isRequested)\r\n            props.dispatch({\r\n              type: 'clickGroup',\r\n              group: props.group,\r\n            });\r\n        }}\r\n      >\r\n        {btnName}\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nGroupBox.propTypes = {\r\n  group: PropTypes.any.isRequired,\r\n  isSelected: PropTypes.bool,\r\n  groupType: PropTypes.string.isRequired,\r\n  user: PropTypes.any,\r\n  dispatch: PropTypes.any.isRequired,\r\n};\r\n\r\nexport default GroupBox;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './GroupList.css';\r\nimport GroupBox from './GroupBox';\r\n\r\nconst GroupList = (props) => {\r\n    if (!props.active) return <div className=\"group-list\"></div>\r\n    return (\r\n        <div className=\"group-list\">\r\n            <div className=\"group-head\">\r\n                <button className={`group-all ${props.selectedType === '' ?\r\n                'clicked' : ''}`}\r\n                onClick={e => props.dispatch({ type: 'selectType', value: '' })}>All</button>\r\n                <button className={`group-own ${props.selectedType === 'own' ?\r\n                'clicked' : ''}`}\r\n                onClick={e => props.dispatch({ type: 'selectType', value: 'own' })}>Own</button>\r\n                <button className={`group-withme ${props.selectedType === 'me' ?\r\n                'clicked' : ''}`}\r\n                onClick={e => props.dispatch({ type: 'selectType', value: 'me' })}>\r\n                    With me</button>\r\n            </div>\r\n            <div className=\"group-body\">\r\n                {props.groups.map(group => <GroupBox\r\n                key={group._id}\r\n                isSelected={props.selectedGroup && group._id === props.selectedGroup._id}\r\n                group={group}\r\n                groupType={props.selectedType}\r\n                user={props.user}\r\n                dispatch={props.dispatch}\r\n                />)}\r\n            </div>\r\n            <div className={`group-footer ${props.selectedType === 'own' ? '' : 'disabled'}`}>\r\n                <div className=\"input-group-label\">Enter group name</div>\r\n                <input className=\"input-group-name\"\r\n                value={props.inputName}\r\n                onChange={e => props.dispatch({\r\n                    type: 'inputName',\r\n                    value: e.target.value,\r\n                })}></input>\r\n                <button className=\"group-create-btn\"\r\n                onClick={e => props.dispatch({\r\n                    type: 'clickCreate'\r\n                })}>\r\n                    {props.selectedGroup ? 'Save': 'Create'}\r\n                </button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nGroupList.propTypes = {\r\n    active: PropTypes.bool,\r\n    groups: PropTypes.array,\r\n    selectedType: PropTypes.string,\r\n    selectedGroup: PropTypes.any,\r\n    inputName: PropTypes.string.isRequired,\r\n    user: PropTypes.any,\r\n    dispatch: PropTypes.any.isRequired,\r\n}\r\n\r\nexport default GroupList;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './GroupUser.css';\r\n\r\nconst GroupUser = (props) => {\r\n  return (\r\n    <div className='group-info-user'>\r\n      <div className='group-info-username'>{props.user.name}</div>\r\n      <button\r\n        className={`group-info-ban ${props.isOwner ? '' : 'disabled'}`}\r\n        onClick={(e) =>\r\n          props.dispatch({\r\n            type: 'ban',\r\n            user: props.user,\r\n          })\r\n        }\r\n      >\r\n        Ban\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nGroupUser.propTypes = {\r\n  user: PropTypes.any.isRequired,\r\n  isOwner: PropTypes.bool,\r\n  dispatch: PropTypes.any.isRequired,\r\n};\r\n\r\nexport default GroupUser;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './GroupRequest.css';\r\n\r\nconst GroupRequest = (props) => {\r\n    return (\r\n        <div className=\"group-info-req\">\r\n            <div className=\"group-info-req-name\">{props.user.username}</div>\r\n            <div className=\"group-info-req-buttons\">\r\n                <button className=\"group-info-accept box-safe\"\r\n                onClick={e => props.dispatch({\r\n                    type: 'reply',\r\n                    reply: true,\r\n                    user: props.user,\r\n                })}>Accept</button>\r\n                <button className=\"group-info-reject box-dang\"\r\n                onClick={e => props.dispatch({\r\n                    type: 'reply',\r\n                    reply: false,\r\n                    user: props.user,\r\n                })}>Reject</button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nGroupRequest.propTypes = {\r\n    user: PropTypes.any.isRequired,\r\n    dispatch: PropTypes.any.isRequired,\r\n}\r\n\r\nexport default GroupRequest;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport GroupUser from './GroupUser';\r\nimport GroupRequest from './GroupRequest';\r\nimport './GroupInfo.css';\r\n\r\nconst GroupInfo = (props) => {\r\n    if (!props.active) return (\r\n        <div className=\"group-info\"></div>\r\n    )\r\n    const users = props.group.users.map(user => <GroupUser \r\n        key={user._id + 'user'}\r\n        user={user} isOwner={props.isOwner} dispatch={props.dispatch}/>\r\n    )\r\n    const requests = props.isOwner ? props.group.joinRequests.map(user => <GroupRequest \r\n        key={user._id + 'req'}\r\n        user={user} dispatch={props.dispatch}/>) : null;\r\n    console.log(props.group);\r\n    return (\r\n        <div className=\"group-info\">\r\n            <div className={`group-info-users ${props.isOwner ? '' : 'full-height'}`}>\r\n                {users}\r\n            </div>\r\n            <div className={`group-info-requests ${props.isOwner ? '' : 'disabled'}`}>\r\n                {requests}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nGroupInfo.propTypes = {\r\n    active: PropTypes.bool,\r\n    group: PropTypes.any,\r\n    isOwner: PropTypes.bool,\r\n    dispatch: PropTypes.any.isRequired,\r\n}\r\n\r\nexport default GroupInfo;\r\n","import React, { useReducer, useEffect } from 'react';\r\nimport * as utils from '../../actions/group';\r\nimport './Group.css';\r\nimport GroupList from './GroupList';\r\nimport GroupInfo from './GroupInfo';\r\n\r\nfunction groupReducer(state, action) {\r\n    switch (action.type) {\r\n        case 'setUser': {\r\n            return {\r\n                ...state,\r\n                user: action.user,\r\n            }\r\n        }\r\n        case 'selectType': {\r\n            if (state.reqType === action.value) return state;\r\n            return {\r\n                ...state,\r\n                reqType: action.value,\r\n                isLoading: true,\r\n                selectedGroup: null,\r\n                inputName: '',\r\n            }\r\n        }\r\n        case 'selectGroup': {\r\n            const group = state.selectedGroup && state.selectedGroup._id === action.group._id ?\r\n            null : action.group\r\n            const inputName = group ? group.name : '';\r\n            return {\r\n                ...state,\r\n                selectedGroup: group,\r\n                inputName,\r\n            }\r\n        }\r\n        case 'clickGroup': {\r\n            return {\r\n                ...state,\r\n                isGroupClicked: true,\r\n                clickedGroup: action.group,\r\n            }\r\n        }\r\n        case 'inputName': {\r\n            return { ...state, inputName: action.value }\r\n        }\r\n        case 'clickCreate': {\r\n            if (state.selectedGroup\r\n            && state.selectedGroup.name !== state.inputName) {\r\n                return { ...state, isSaving: true }\r\n            }\r\n            return { ...state, isCreating: true }\r\n\r\n        }\r\n        case 'reply': {\r\n            return {\r\n                ...state,\r\n                isReplying: true,\r\n                reply: action.reply,\r\n                repliedUser: action.user,\r\n            }\r\n        }\r\n        case 'ban': {\r\n            return {\r\n                ...state,\r\n                isBanning: true,\r\n                bannedUser: action.user,\r\n            }\r\n        }\r\n        case 'finishLoading': {\r\n            return {\r\n                ...state,\r\n                isLoading: false,\r\n                groups: action.groups,\r\n            }\r\n        }\r\n        case 'finishClicking': {\r\n            if (!action.ok) return {\r\n                ...state,\r\n                isGroupClicked: false,\r\n                clickedGroup: null,\r\n            }\r\n            return {\r\n                ...state,\r\n                isLoading: true,\r\n                isGroupClicked: false,\r\n                clickedGroup: null,\r\n                selectedGroup: action.group,\r\n            }\r\n\r\n        }\r\n        case 'finishSaving': {\r\n            if (!action.ok) return {\r\n                ...state,\r\n                isSaving: false,\r\n            }\r\n            return {\r\n                ...state,\r\n                isSaving: false,\r\n                isLoading: true,\r\n            }\r\n        }\r\n        case 'finishCreating': {\r\n            if (!action.ok) return {\r\n                ...state,\r\n                isCreating: false,\r\n            }\r\n            return {\r\n                ...state,\r\n                isCreating: false,\r\n                isLoading: true,\r\n                selectedGroup: action.group,\r\n            }\r\n        }\r\n        case 'finishReplying': {\r\n            if (!action.ok) return {\r\n                ...state,\r\n                isReplying: false,\r\n                reply: null,\r\n                repliedUser: null,\r\n            }\r\n            return {\r\n                ...state,\r\n                isReplying: false,\r\n                isLoading: true,\r\n                reply: null,\r\n                repliedUser: null,\r\n                selectedGroup: action.group,\r\n            }\r\n        }\r\n        case 'finishBanning': {\r\n            if (!action.ok) return {\r\n                ...state,\r\n                isBanning: false,\r\n                bannedUser: null,\r\n            }\r\n            return {\r\n                ...state,\r\n                isLoading: true,\r\n                isBanning: false,\r\n                bannedUser: null,\r\n                selectedGroup: action.group,\r\n            }\r\n        }\r\n        default: return state;\r\n    }\r\n}\r\n\r\nconst Group = () => {\r\n    const initialState = {\r\n        isLoading: true,\r\n        groups: null,\r\n        user: null,\r\n        isGroupClicked: false,\r\n        clickedGroup: null,\r\n        selectedGroup: null,\r\n        isBanning: false,\r\n        bannedUser: null,\r\n        isReplying: false,\r\n        repliedUser: null,\r\n        isCreating: false,\r\n        isSaving: false,\r\n        reply: null,\r\n        reqType: '',\r\n        inputName: '',\r\n    }\r\n    \r\n    const [state, dispatch] = useReducer(groupReducer, initialState);\r\n\r\n\r\n    useEffect(() => {\r\n        const setUser = async () => {\r\n            const res = await utils.getUser();\r\n            dispatch({\r\n                type: 'setUser',\r\n                user: res.data,\r\n            });\r\n        }\r\n        setUser();\r\n    }, [])\r\n    useEffect(() => {\r\n        const loadGroups = async () => {\r\n            const res = await utils.getGroups(state.reqType);\r\n            dispatch({\r\n                type: 'finishLoading',\r\n                isGroupClicked: false,\r\n                clickedGroup: null,\r\n                groups: res.data.response,\r\n            })\r\n        }\r\n        if (state.isLoading) loadGroups();\r\n    }, [state.isLoading, state.reqType])\r\n    useEffect(() => {\r\n        const saveGroup = async () => {\r\n            const res = await utils.saveGroup(state.inputName, state.selectedGroup._id);\r\n            dispatch({\r\n                type: 'finishSaving',\r\n                ok: res.data.ok,\r\n                group: res.data.response,\r\n            })\r\n        }\r\n        if (state.isSaving) saveGroup();\r\n    }, [state.isSaving, state.inputName, state.selectedGroup])\r\n    useEffect(() => {\r\n        const createGroup = async () => {\r\n            const res = await utils.createGroup(state.inputName);\r\n            dispatch({\r\n                type: 'finishCreating',\r\n                ok: res.data.ok,\r\n                group: res.data.response,\r\n            })\r\n        }\r\n        if (state.isCreating) createGroup();\r\n    }, [state.isCreating, state.inputName])\r\n    useEffect(() => {\r\n        const reply = async () => {\r\n            if (state.reply) {\r\n                const res = await utils.acceptMember(\r\n                    state.selectedGroup._id,\r\n                    state.repliedUser._id\r\n                )\r\n                return dispatch({\r\n                    type: 'finishReplying',\r\n                    ok: res.data.ok,\r\n                    group: res.data.response,\r\n                })\r\n            }\r\n            else {\r\n                const res = await utils.rejectMember(\r\n                    state.selectedGroup._id,\r\n                    state.repliedUser._id\r\n                )\r\n                return dispatch({\r\n                    type: 'finishReplying',\r\n                    ok: res.data.ok,\r\n                    group: res.data.response,\r\n                })\r\n            }\r\n        }\r\n        if (state.isReplying) reply();\r\n    }, [state.isReplying, state.repliedUser, state.reply, state.selectedGroup])\r\n    useEffect(() => {\r\n        const ban = async () => {\r\n            const res = await utils.banMember(\r\n                state.selectedGroup._id,\r\n                state.bannedUser._id\r\n            )\r\n            return dispatch({\r\n                type: 'finishBanning',\r\n                ok: res.data.ok,\r\n                group: res.data.response,\r\n            })\r\n        }\r\n        if (state.isBanning) ban();\r\n    }, [state.isBanning, state.selectedGroup, state.bannedUser])\r\n    useEffect(() => {\r\n        const interactGroup = async () => {\r\n            if (state.reqType === '') {\r\n                const res = await utils.joinGroup(state.clickedGroup._id);\r\n                return dispatch({\r\n                    type: 'finishClicking',\r\n                    ok: res.data.ok,\r\n                    group: res.data.response,\r\n                })\r\n            }\r\n            if (state.reqType === 'own') {\r\n                const res = await utils.deleteGroup(state.clickedGroup._id);\r\n                return dispatch({\r\n                    type: 'finishClicking',\r\n                    ok: res.data.ok,\r\n                    group: res.data.response,\r\n                })\r\n            }\r\n            if (state.reqType === 'me') {\r\n                const res = await utils.leaveGroup(state.clickedGroup._id);\r\n                return dispatch({\r\n                    type: 'finishClicking',\r\n                    ok: res.data.ok,\r\n                    group: res.data.response,\r\n                })\r\n            }\r\n        }\r\n        if (state.isGroupClicked) interactGroup();\r\n    }, [state.isGroupClicked, state.clickedGroup, state.reqType])\r\n\r\n    return (\r\n        <div className=\"Group\">\r\n            <GroupList active={!state.isLoading}\r\n            groups={state.groups}\r\n            selectedType={state.reqType}\r\n            inputName={state.inputName}\r\n            selectedGroup={state.selectedGroup}\r\n            user={state.user}\r\n            dispatch={dispatch}/>\r\n            <GroupInfo active={!!state.selectedGroup && !state.isLoading}\r\n            group={state.selectedGroup}\r\n            isOwner={state.reqType === 'own'}\r\n            dispatch={dispatch}/>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Group;\r\n","import React, { Fragment, useEffect } from 'react';\r\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\r\nimport Navbar from './components/layout/Navbar';\r\nimport Home from './components/layout/Homepage';\r\nimport Login from './components/auth/Login';\r\nimport RecoverPassword from './components/passwordReset/RecoverPassword';\r\nimport UpdatePassword from './components/passwordReset/UpdatePassword';\r\nimport Welcome from './components/welcome/Welcome';\r\nimport Admin from './components/admin/Admin';\r\nimport CreateUser from './components/admin/CreateUser';\r\nimport EditUser from './components/admin/EditUser';\r\nimport Editor from './components/editor/Editor';\r\nimport Paper from './components/paper/Paper';\r\nimport PublicDatabases from './components/publicDatabases/publicDatabases';\r\nimport Alert from './components/layout/Alert';\r\nimport PrivateRoute from './components/routing/PrivateRoute';\r\n// Redux\r\nimport { Provider } from 'react-redux';\r\nimport store from './store';\r\nimport { loadUser } from './actions/auth';\r\nimport setAuthToken from './utils/setAuthToken';\r\n\r\nimport './App.css';\r\nimport Group from './components/group/Group';\r\n\r\nif (localStorage.token) {\r\n  setAuthToken(localStorage.token);\r\n}\r\n\r\nconst App = () => {\r\n  useEffect(() => {\r\n    store.dispatch(loadUser());\r\n  }, []);\r\n\r\n  return (\r\n    <Provider store={store}>\r\n      <Router>\r\n        <Fragment>\r\n          <Navbar />\r\n          <Route exact path='/' component={Home} />\r\n          <section className='container'>\r\n            <Alert />\r\n            <Switch>\r\n              <Route exact path='/login' component={Login} />\r\n              <Route\r\n                exact\r\n                path='/recoverPassword'\r\n                component={RecoverPassword}\r\n              />\r\n              <Route exact path='/reset/:id' component={UpdatePassword} />\r\n              <PrivateRoute exact path='/welcome' component={Welcome} />\r\n              <PrivateRoute exact path='/admin' component={Admin} />\r\n              <PrivateRoute exact path='/create-users' component={CreateUser} />\r\n              <PrivateRoute exact path='/edit-user/:id' component={EditUser} />\r\n              <PrivateRoute exact path='/editor' component={Editor} />\r\n              <PrivateRoute exact path='/papers' component={Paper} />\r\n              <PrivateRoute\r\n                exact\r\n                path='/publicDatabases'\r\n                component={PublicDatabases}\r\n              />\r\n              <PrivateRoute exact path='/groups' component={Group} />\r\n            </Switch>\r\n          </section>\r\n        </Fragment>\r\n      </Router>\r\n    </Provider>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n"],"sourceRoot":""}