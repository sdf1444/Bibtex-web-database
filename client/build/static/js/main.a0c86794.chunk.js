(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{345:function(e,t){e.exports="data:image/gif;base64,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"},379:function(e,t,n){e.exports=n(743)},597:function(e,t,n){},598:function(e,t,n){},725:function(e,t,n){},727:function(e,t,n){},728:function(e,t,n){},729:function(e,t,n){},730:function(e,t,n){},731:function(e,t,n){},732:function(e,t,n){},733:function(e,t,n){},734:function(e,t,n){},735:function(e,t,n){},736:function(e,t,n){},737:function(e,t,n){},738:function(e,t,n){},739:function(e,t,n){},740:function(e,t,n){},741:function(e,t,n){},742:function(e,t,n){},743:function(e,t,n){"use strict";n.r(t);n(380),n(389);var a=n(0),r=n.n(a),c=n(75),s=n.n(c),i=n(25),o=n(36),l=n(45),u=n(3),p=n.n(u),d=n(7),m=n(13),f=n.n(m),g=n(755),b=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;return function(a){var r=Object(g.a)();a({type:"SET_ALERT",payload:{msg:e,alertType:t,id:r}}),setTimeout((function(){return a({type:"REMOVE_ALERT",payload:r})}),n)}},h=function(e){e?f.a.defaults.headers.common["x-auth-token"]=e:delete f.a.defaults.headers.common["x-auth-token"]},E=function(){return function(){var e=Object(d.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.token&&h(localStorage.token),e.prev=1,e.next=4,f.a.get("/api/auth");case 4:n=e.sent,t({type:"USER_LOADED",payload:n.data.response}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:"AUTH_ERROR"});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},v=Object(l.b)((function(e){return{auth:e.auth}}),{logout:function(){return function(e){e({type:"LOGOUT"})}}})((function(e){var t=e.auth,n=t.isAuthenticated,c=t.loading,s=t.role,o=e.logout;console.log(s);var l=r.a.createElement("ul",null,function(){if("admin"==s)return r.a.createElement("li",null,r.a.createElement(i.b,{to:"/admin"},"Admin"))}(),r.a.createElement("li",null,r.a.createElement(i.b,{to:"/editor"},"Editor")),r.a.createElement("li",null,r.a.createElement(i.b,{to:"/papers"},"Papers")),r.a.createElement("li",null,r.a.createElement(i.b,{to:"/publicDatabases"},"Databases")),r.a.createElement("li",null,r.a.createElement(i.b,{to:"/groups"},"Groups")),r.a.createElement("li",null,r.a.createElement("a",{onClick:o,href:"#!"},r.a.createElement("i",{className:"fas fa-sign-out-alt"})," ",r.a.createElement("span",{className:"hide-sm"}),"Logout")));return r.a.createElement("nav",{className:"navbar bg-dark"},r.a.createElement("h1",null,r.a.createElement(i.b,{to:"/"},r.a.createElement("i",{className:"fas fa-code"})," Bibtex")),!c&&r.a.createElement(a.Fragment,null,n?l:null))})),y=Object(l.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}))((function(e){return e.isAuthenticated?r.a.createElement(o.a,{to:"/welcome"}):r.a.createElement("div",null,r.a.createElement("section",{className:"landing"},r.a.createElement("div",{className:"dark-overlay"},r.a.createElement("div",{className:"landing-inner"},r.a.createElement("h1",{className:"x-large"},"Bibtex"),r.a.createElement("p",{className:"lead"},"Online editor for bibtex references"),r.a.createElement("div",{className:"buttons centered"},r.a.createElement(i.b,{to:"/login",className:"btn btn-light"},"Login"))))))})),A=n(69),w=n(1),O=n(37),j=Object(l.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{login:function(e,t){return function(){var n=Object(d.a)(p.a.mark((function n(a){var r,c,s;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={headers:{"Content-Type":"application/json"}},n.prev=1,n.next=4,f.a.post("/api/auth",{username:e,password:t},r);case 4:c=n.sent,a({type:"LOGIN_SUCCESS",payload:c.data.response}),a(E()),n.next=14;break;case 9:n.prev=9,n.t0=n.catch(1),(s=n.t0.response.data.error)&&a(b(s.reason,"danger")),a({type:"LOGIN_FAIL"});case 14:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(e){return n.apply(this,arguments)}}()}})((function(e){var t=e.login,n=e.isAuthenticated,c=Object(a.useState)({username:"",password:""}),s=Object(O.a)(c,2),l=s[0],u=s[1],m=l.username,f=l.password,g=function(e){return u(Object(w.a)(Object(w.a)({},l),{},Object(A.a)({},e.target.name,e.target.value)))},b=function(){var e=Object(d.a)(p.a.mark((function e(n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),t(m,f);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return n?r.a.createElement(o.a,{to:"/welcome"}):r.a.createElement(a.Fragment,null,r.a.createElement("h1",{className:"large text-primary"},"Sign In"),r.a.createElement("p",{className:"lead"},r.a.createElement("i",{className:"fas fa-user"})," Sign Into Your Account"),r.a.createElement("form",{className:"form",onSubmit:b},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"username",placeholder:"Username",name:"username",value:m,onChange:g,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",placeholder:"Password",name:"password",value:f,onChange:g,minLength:"6"})),r.a.createElement("input",{type:"submit",className:"btn btn-primary",value:"Login"})),r.a.createElement(i.b,{to:"/recoverPassword"},"Forgot your password?"),r.a.createElement("p",{className:"my-1"},"Don't have an account? Please contact admin."))})),x=n(164),k=n(165),C=n(171),N=n(169),B=n(35),F=n(32);function S(){var e=Object(B.a)(["\n  html * {\n    font-family: Wals, sans-serif;\n    /* @SET: 1rem === 16px */\n    font-size: 16px;\n    text-rendering: optimizeLegibility;\n    -webkit-font-smoothing: antialiased;\n  }\n\n  h1 {\n    font-size: 3rem;\n    font-weight: 400;\n    color: ",";\n  }\n\n  h2 {\n    font-size: 2.75rem;\n    font-weight: 500;\n  }\n\n  h3 {\n    font-size: 2.5rem;\n    letter-spacing: 0.01875rem;\n  }\n\n  h4 {\n    font-family: Wals, sans-serif;\n    font-weight: 500;\n    font-size: 1.75rem;\n    margin-bottom: 16px;\n  }\n"]);return S=function(){return e},e}function G(){var e=Object(B.a)(['\n  @font-face {\n    font-family: "Wals";\n    src: local("Wals Regular"), local("Wals-Regular"),\n      url("/fonts/Wals-Regular.otf") format("opentype");\n    font-weight: 400;\n    font-style: normal;\n    font-display: fallback;\n  }\n  @font-face {\n    font-family: "Wals";\n    src: local("Wals Regular Oblique"), local("Wals-Regular-Oblique"),\n      url("/fonts/Wals-Regular-Oblique.otf") format("opentype");\n    font-weight: 400;\n    font-style: italic;\n    font-display: fallback;\n  }\n  @font-face {\n    font-family: "Wals";\n    src: local("Wals Light"), local("Wals-Light"),\n      url("/fonts/Wals-Light.otf") format("opentype");\n    font-weight: 300;\n    font-style: normal;\n    font-display: fallback;\n  }\n  @font-face {\n    font-family: "Wals";\n    src: local("Wals Light Oblique"), local("Wals-Light-Oblique"),\n      url("/fonts/Wals-Light-Oblique.otf") format("opentype");\n    font-weight: 300;\n    font-style: italic;\n    font-display: fallback;\n  }\n  @font-face {\n    font-family: "Wals";\n    src: local("Wals Medium"), local("Wals-Medium"),\n      url("/fonts/Wals-Medium.otf") format("opentype");\n    font-weight: 500;\n    font-style: normal;\n    font-display: fallback;\n  }\n  @font-face {\n    font-family: "Wals";\n    src: local("Wals Medium Oblique"), local("Wals-Medium-Oblique"),\n      url("/fonts/Wals-Medium-Oblique.otf") format("opentype");\n    font-weight: 500;\n    font-style: italic;\n    font-display: fallback;\n  }\n']);return G=function(){return e},e}function I(){var e=Object(B.a)(["\n  background: ",";\n  box-shadow: ",";\n"]);return I=function(){return e},e}function D(){var e=Object(B.a)(["\n  filter: blur(1px);\n"]);return D=function(){return e},e}function Q(){var e=Object(B.a)(["\n  box-shadow: 0 0 0.625rem 0 rgba(0, 0, 0, 0.1);\n"]);return Q=function(){return e},e}function U(){var e=Object(B.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]);return U=function(){return e},e}function R(){var e=Object(B.a)(["\n  .form-field {\n    ",';\n    /* Mixin overrides: */\n    .error {\n      display: block;\n      padding: 5px 8px;\n      height: 30px;\n      background: #ffdce0;\n      border-radius: 3px;\n      border: 1px solid #cea0a5;\n      color: #86181d;\n      font-size: 0.75rem;\n      z-index: 10;\n    }\n    .client-error {\n      margin: 35px 0 0 5px;\n      position: absolute;\n    }\n    .client-error:after,\n    .client-error:before {\n      bottom: 100%;\n      left: 15%;\n      border: solid transparent;\n      content: "";\n      height: 0;\n      width: 0;\n      position: absolute;\n      pointer-events: none;\n    }\n\n    .client-error:after {\n      border-color: rgba(255, 220, 224, 0);\n      border-bottom-color: #ffdce0;\n      border-width: 6px;\n      margin-left: -6px;\n    }\n    .client-error:before {\n      border-color: rgba(206, 160, 165, 0);\n      border-bottom-color: #cea0a5;\n      border-width: 7px;\n      margin-left: -7px;\n    }\n    .server-error {\n      margin-top: 16px;\n    }\n  }\n  .spinner {\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    padding: 10px;\n  }\n']);return R=function(){return e},e}function L(){var e=Object(B.a)(["\n  .error + input {\n    /* Color input red when adjacent to an error: */\n    border: 1px solid #cea0a5;\n  }\n"]);return L=function(){return e},e}function T(){var e=Object(B.a)(["\n    @media (min-width: ","em) {\n      ",";\n    }\n  "]);return T=function(){return e},e}function M(){var e=Object(B.a)(["\n    @media (max-width: ","em) {\n      ",";\n    }\n  "]);return M=function(){return e},e}var Y={desktop:1024,tablet:768,phone:576},W=(Object.keys(Y).reduce((function(e,t){return e[t]=function(){return Object(F.a)(M(),Y[t]/16,F.a.apply(void 0,arguments))},e}),{}),Object.keys({tablet:577,desktop:769}).reduce((function(e,t){return e[t]=function(){return Object(F.a)(T(),Y[t]/16,F.a.apply(void 0,arguments))},e}),{}),Object(F.a)(L())),H=(Object(F.a)(R(),W),Object(F.a)(U()));Object(F.a)(Q()),Object(F.a)(D()),Object(F.a)(I(),(function(e){return e.theme.primary}),(function(e){return e.theme.boxShadow})),Object(F.a)(G()),Object(F.a)(S(),(function(e){return e.theme.primary}));function P(){var e=Object(B.a)(["\n  position: absolute;\n  right: 4rem;\n  border: 0;\n  cursor: pointer;\n  color: rgba(128, 128, 128, 0.5);\n  padding: 0;\n  font-size: 2rem;\n  padding: 0 !important;\n  font-weight: 300;\n  background: white;\n"]);return P=function(){return e},e}function K(){var e=Object(B.a)(["\n  position: absolute;\n  right: 1%;\n  top: -50%;\n  display: block;\n  width: 65px;\n  height: 65px;\n  font-weight: bold;\n  border-radius: 100%;\n  background: #fff;\n  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.15);\n  text-align: center;\n  text-decoration: bold;\n  color: ",';\n  transition: all 0.3s ease;\n  /* &::after {\n    margin-left: 2%;\n    content: "\f054";\n    font-family: FontAwesome;\n    line-height: 10%;\n  } */\n\n  &:hover,\n  &:focus {\n    background: ',";\n    color: #fff;\n    box-shadow: 0 2px 8px 0 rgba(",", 0.4);\n    &::after {\n      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n    }\n  }\n"],["\n  position: absolute;\n  right: 1%;\n  top: -50%;\n  display: block;\n  width: 65px;\n  height: 65px;\n  font-weight: bold;\n  border-radius: 100%;\n  background: #fff;\n  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.15);\n  text-align: center;\n  text-decoration: bold;\n  color: ",';\n  transition: all 0.3s ease;\n  /* &::after {\n    margin-left: 2%;\n    content: "\\f054";\n    font-family: FontAwesome;\n    line-height: 10%;\n  } */\n\n  &:hover,\n  &:focus {\n    background: ',";\n    color: #fff;\n    box-shadow: 0 2px 8px 0 rgba(",", 0.4);\n    &::after {\n      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n    }\n  }\n"]);return K=function(){return e},e}function q(){var e=Object(B.a)(["\n  color: white;\n  border-radius: 5px;\n  margin-top: 8px;\n  padding: 6px 12px;\n  font-weight: 500;\n  width: ",";\n\n  /* Button & btn-primary */\n  will-change: background-color, border-color, color;\n  -webkit-transition: background-color 0.15s ease, border-color 0.15s ease,\n    color 0.15s ease;\n  transition: background-color 0.15s ease, border-color 0.15s ease,\n    color 0.15s ease;\n  background-color: ",";\n  border-color: ",";\n  &:hover,\n  &:focus {\n    background-color: ",";\n    border-color: ",";\n  }\n\n  /* Styles for Link/anchor elements that might be children of Button */\n  a {\n    color: ",";\n    &:hover {\n      color: ",";\n    }\n  }\n\n  &.btn-primary {\n    border: 0;\n  }\n\n  &.btn-tertiary {\n    background-color: ",";\n    border-color: ",";\n    color: ",";\n    box-shadow: 0 0 15px 0 rgba(0, 0, 0, 0.15);\n    border-radius: 6px;\n    &:hover,\n    &:focus {\n      background-color: ",";\n      border-color: ",";\n      color: ",";\n    }\n  }\n\n  &.btn-light {\n    background-color: ",";\n    border-color: ",";\n    &:hover,\n    &:focus {\n      background-color: ",";\n      border-color: ",";\n    }\n  }\n\n  &.btn-gray {\n    background-color: ",";\n    border-color: ",";\n  }\n\n  &.btn-neutral {\n    background-color: ",";\n    border-color: ",";\n    color: ",";\n\n    &:hover,\n    &:focus {\n      background-color: ",";\n      border-color: ",";\n      color: ",";\n    }\n  }\n\n  &.btn-inverted {\n    color: ",";\n    /* target anchors for when we nest Links inside buttons */\n    & a {\n      color: ",";\n    }\n    background-color: ",";\n    border-color: ",";\n    &:hover,\n    &:focus {\n      background-color: ",";\n      border-color: ",";\n      color: ",";\n      & a {\n        color: ",";\n      }\n    }\n  }\n\n  &.btn-secondary {\n    background-color: ",";\n    border-color: ",";\n    &:hover,\n    &:focus {\n      background-color: ",";\n      border-color: ",";\n    }\n  }\n\n  &:not(:disabled) {\n    cursor: pointer;\n  }\n"]);return q=function(){return e},e}function J(){var e=Object(B.a)(["\n  width: 100%;\n  padding: 30px 20px 20px 20px;\n  border-radius: 5px;\n  background: rgba(255, 255, 255, 0.75);\n  box-shadow: 0 0.3125rem 0.0625rem 0 rgba(0, 0, 0, 0.05),\n    0 0 0 0.0625rem rgba(0, 0, 0, 0.03), 0 0.0625rem 0 0 rgba(0, 0, 0, 0.05),\n    0 0.0625rem 0.1875rem 0 rgba(0, 0, 0, 0.01);\n\n  input {\n    width: 100%;\n    margin-bottom: 20px;\n    background: white;\n  }\n\n  button {\n    width: 100%;\n  }\n\n  .text-align-right {\n    text-align: right;\n    button {\n      width: unset;\n      padding-left: 3.5rem;\n      padding-right: 3.5rem;\n    }\n  }\n"]);return J=function(){return e},e}function Z(){var e=Object(B.a)(["\n  padding: 0.5rem 1rem 0.43rem;\n  border-radius: 0.375rem;\n  border: ",";\n  font-size: 1rem;\n"]);return Z=function(){return e},e}function V(){var e=Object(B.a)(["\n  background-color: ",";\n  color: ",";\n  border: ",";\n  padding: 0.5rem 1rem 0.43rem;\n  border-radius: 0.375rem;\n\n  &:focus {\n    outline: none;\n    border-color: ",";\n    box-shadow: ",";\n  }\n"]);return V=function(){return e},e}function z(){var e=Object(B.a)(["\n  color: ",";\n  font-weight: 500;\n  text-transform: capitalize;\n"]);return z=function(){return e},e}function X(){var e=Object(B.a)(["\n  ",";\n"]);return X=function(){return e},e}F.b.div(X(),H),F.b.label(z(),(function(e){return e.theme.primary})),F.b.input(V(),(function(e){return e.theme.white}),(function(e){return e.theme.inputTextColor}),(function(e){return"1px ".concat(e.theme.inputBorderColor," solid")}),(function(e){return e.theme.primary}),(function(e){return"0 0 0 1px ".concat(e.theme.primary)}));var _=F.b.input(Z(),(function(e){return"1px ".concat(e.theme.inputBorderColor," solid")})),$=(F.b.form(J()),F.b.button(q(),(function(e){return e.width}),(function(e){return e.theme.primary}),(function(e){return e.theme.primary}),(function(e){return e.theme.primaryHover}),(function(e){return e.theme.primaryHover}),(function(e){return e.theme.white}),(function(e){return e.theme.white}),(function(e){return e.theme.tertiary}),(function(e){return e.theme.tertiary}),(function(e){return e.theme.white}),(function(e){return e.theme.tertiaryHover}),(function(e){return e.theme.tertiaryHover}),(function(e){return e.theme.white}),(function(e){return e.theme.primaryLight}),(function(e){return e.theme.primaryLight}),(function(e){return e.theme.primaryDark}),(function(e){return e.theme.primaryDark}),(function(e){return e.theme.lightGray}),(function(e){return e.theme.lightGray}),(function(e){return e.theme.offWhite}),(function(e){return e.theme.offWhite}),(function(e){return e.theme.midGray}),(function(e){return e.theme.lightGray}),(function(e){return e.theme.lightGray}),(function(e){return e.theme.darkGray}),(function(e){return e.theme.white}),(function(e){return e.theme.white}),(function(e){return e.theme.primary}),(function(e){return e.theme.primary}),(function(e){return e.theme.primaryLight}),(function(e){return e.theme.primaryLight}),(function(e){return e.theme.primary}),(function(e){return e.theme.primary}),(function(e){return e.theme.secondaryDark}),(function(e){return e.theme.secondaryDark}),(function(e){return e.theme.secondary}),(function(e){return e.theme.secondary})));F.b.button(K(),(function(e){return e.theme.tertiary}),(function(e){return e.theme.tertiary}),(function(e){return e.theme.tertiary})),F.b.button(P());function ee(){var e=Object(B.a)(["\n  height: 100%;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  form {\n    width: 300px;\n  }\n  p,\n  input {\n    margin-bottom: 0.625rem;\n    font-size: 1.125rem;\n  }\n\n  input,\n  button {\n    width: 100%;\n  }\n  p {\n    font-size: 1.125rem;\n  }\n  a {\n    margin-top: 1rem;\n  }\n  .reset-password-form-wrapper {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    max-width: 430px;\n    margin: 0 auto;\n  }\n  .reset-password-form-sent-wrapper {\n    max-width: 360px;\n    text-align: center;\n    p {\n      text-align: left;\n      margin-top: 1rem;\n      margin-bottom: 0.75rem;\n    }\n  }\n  .password-reset-btn {\n    padding: 0.625rem 1.25rem;\n    font-size: 1.125rem;\n  }\n"]);return ee=function(){return e},e}for(var te=F.b.div(ee()),ne=function(e){Object(C.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(x.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={email:"",submitted:!1},e.handleChange=function(t){e.setState({email:t.target.value})},e.sendPasswordResetEmail=function(t){t.preventDefault();var n=e.state.email;f.a.post("/api/user/".concat(n)),e.setState({email:"",submitted:!0})},e}return Object(k.a)(n,[{key:"render",value:function(){var e=this.state,t=e.email,n=e.submitted;return r.a.createElement(te,null,r.a.createElement("h3",null,"Reset your password"),n?r.a.createElement("div",{className:"reset-password-form-sent-wrapper"},r.a.createElement("p",null,"If that account is in our system, we emailed you a link to reset your password."),r.a.createElement(i.b,{to:"/login",className:"ghost-btn"},"Return to sign in")):r.a.createElement("div",{className:"reset-password-form-wrapper"},r.a.createElement("p",null,"It happens to the best of us. Enter your email and we'll send you reset instructions."),r.a.createElement("form",{onSubmit:this.sendPasswordResetEmail},r.a.createElement(_,{onChange:this.handleChange,value:t,placeholder:"Email address"}),r.a.createElement($,{className:"btn-primary password-reset-btn"},"Send password reset email")),r.a.createElement(i.b,{to:"/login"},"I remember my password")))}}]),n}(a.Component),ae=function(e){Object(C.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(x.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={password:"",confirmPassword:"",submitted:!1},e.handleChange=function(t){return function(n){e.setState(Object(A.a)({},t,n.target.value))}},e.updatePassword=function(t){t.preventDefault();var n=e.state.password;f.a.put("/api/user/updatePassword/"+e.props.match.params.id,{password:n}).then((function(e){return e})).catch((function(e){return console.warn("ERROR FROM SERVER UPDATING PASSWORD:",e)})),e.setState({submitted:!e.state.submitted})},e}return Object(k.a)(n,[{key:"render",value:function(){var e=this.state.submitted;return r.a.createElement(te,null,r.a.createElement("h3",{style:{paddingBottom:"1.25rem"}},"Update your password"),e?r.a.createElement("div",{className:"reset-password-form-sent-wrapper"},r.a.createElement("p",null,"Your password has been saved."),r.a.createElement(i.b,{to:"/login",className:"ghost-btn"},"Sign back in")):r.a.createElement("div",{className:"reset-password-form-wrapper"},r.a.createElement("form",{onSubmit:this.updatePassword,style:{paddingBottom:"1.5rem"}},r.a.createElement(_,{onChange:this.handleChange("password"),value:this.state.password,placeholder:"New password",type:"password"}),r.a.createElement(_,{onChange:this.handleChange("confirmPassword"),value:this.state.confirmPassword,placeholder:"Confirm password",type:"password"}),r.a.createElement($,{className:"btn-primary password-reset-btn"},"Update password")),r.a.createElement("p",{style:{fontSize:"1rem",maxWidth:"420px",paddingLeft:"0.5rem"}},"Make sure it's at least 8 characters including a number and a lowercase letter. Read some documentation on"," ",r.a.createElement("a",{href:"https://help.github.com/articles/creating-a-strong-password/",target:"_blank",rel:"noopener noreferrer"},"safer password practices"),".")))}}]),n}(a.Component),re=n(345),ce=n.n(re),se=function(){return r.a.createElement(a.Fragment,null,r.a.createElement("img",{src:ce.a,style:{width:"200px",margin:"auto",display:"block"},alt:"Loading..."}))},ie=Object(l.b)((function(e){return{auth:e.auth,user:e.user}}))((function(e){var t=e.auth.user,n=e.auth,c=n.auth,s=n.loading;return Object(a.useEffect)((function(){}),[]),s&&null===c?r.a.createElement(se,null):r.a.createElement(a.Fragment,null,r.a.createElement("h1",{className:"large text-primary"},"Bibtex"),r.a.createElement("p",{className:"lead"},r.a.createElement("i",null),"Hello! ",t&&t.name," Welcome to the Bibtex editor!"),r.a.createElement("p",null,r.a.createElement("small",null,"Logged in as: ",t&&t.role)))})),oe=n(364),le=n(170),ue=(n(597),function(e){return r.a.createElement("tr",null,r.a.createElement("td",null,e.user.name),r.a.createElement("td",null,e.user.email),r.a.createElement("td",null,e.user.role),r.a.createElement("td",null,e.user.username),r.a.createElement("td",{className:"actions"},r.a.createElement(i.b,{to:"/edit-user/"+e.user._id,className:"button-big"},"Edit"),r.a.createElement(le.a,{onClick:function(){return e.dispatch({type:"delete",user:e.user})},variant:"danger",className:"delete-btn"},"Delete")))}),pe=n(754),de=n(753),me=n(64),fe=n(347),ge=n.n(fe),be={article:["journal"],book:["publisher"],booklet:[],conference:["booktitle"],inBook:["chapter","publisher"],inCollection:["booktitle","publisher"],inProceedings:["booktitle"],manual:[],mastersThesis:[],misc:[],online:[],phdThesis:["school"],proceedings:[]},he={article:["number","pages","volume","month","url","annotation"],book:["series","address","edition","volume","month","url","annotation"],booklet:["howpublished","address","month","url","annotation"],conference:["editor","volume","series","pages","address","organisation","publisher","month","url","annotation"],inBook:["volime","series","type","address","edition","month","url","annotation"],inCollection:["editor","volume","series","type","address","chapter","pages","edition","organization","month","url","annotation"],inProceedings:["editor","volume","series","pages","address","organization","publisher","month","url","annotation"],manual:["organization","address","edititon","month","url","annotation"],mastersThesis:["school","type","address","month","url","annotation"],misc:["howpublished","month","url","annotation"],online:["url"],phdThesis:["type","address","month","url","annotation"],proceedings:["editor","volume","series","address","publisher","organization","month","url","annotation"]},Ee=0,ve=Object.entries(be);Ee<ve.length;Ee++){var ye=Object(O.a)(ve[Ee],2),Ae=ye[0];ye[1];be[Ae].push("author"),be[Ae].push("title"),be[Ae].push("year")}var we={};Object.keys(be).forEach((function(e){we[e]={required:be[e],extra:he[e]}}));var Oe=we,je={ARTICLE:"article",BOOK:"book",BOOKLET:"booklet",CONFERENCE:"conference",INBOOK:"inBook",INCOLLECTION:"inCollection",INPROCEEDINGS:"inProceedings",MANUAL:"manual",MASTERSTHESIS:"mastersThesis",MISC:"misc",ONLINE:"online",PHDTHESIS:"phdThesis",PROCEEDINGS:"proceedings"},xe=function(){var e=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("/api/group/withme");case 2:return t=e.sent,e.abrupt("return",t.data.response);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ke=function(){var e=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("/api/user/me");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ce=function(){var e=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("/api/database/all");case 2:return t=e.sent,e.abrupt("return",t.data.response);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ne=function(){var e=Object(d.a)(p.a.mark((function e(t,n){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.put("/api/database",{id:n,bibtexdatabasename:t});case 3:return a=e.sent,e.abrupt("return",a);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),Be=function(){var e=Object(d.a)(p.a.mark((function e(t,n){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.post("/api/database",{bibtexdatabasename:t,group:n});case 3:return a=e.sent,e.abrupt("return",a);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),Fe=function(){var e=Object(d.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.delete("/api/database/".concat(t));case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),Se=function(){var e=Object(d.a)(p.a.mark((function e(t,n){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.prev=1,e.next=4,f.a.post("/api/database/entry/",{id:n,entry:t});case 4:return a=e.sent,e.abrupt("return",a);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",e.t0.response);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}(),Ge=function(){var e=Object(d.a)(p.a.mark((function e(t,n){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.put("/api/database/entry",Object(w.a)(Object(w.a)({},t),{},{entryId:t._id,databaseId:n}));case 3:return a=e.sent,e.abrupt("return",a);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),Ie=function(){var e=Object(d.a)(p.a.mark((function e(t,n){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.delete("/api/database/entry/".concat(n,"/").concat(t));case 3:return a=e.sent,e.abrupt("return",a);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),De=function(){var e=Object(d.a)(p.a.mark((function e(t,n,a){var r,c,s,i,o,l,u,d,m,g,b,h,E,v;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("GROUP"),console.log(a),r=ge.a.toJSON(t),console.log(r),c=[],s=Object(me.a)(r),e.prev=6,s.s();case 8:if((i=s.n()).done){e.next=20;break}if((o=i.value).entryType=je[o.entryType],Oe[o.entryType]){e.next=13;break}return e.abrupt("continue",18);case 13:for(l=0,u=Object.keys(o.entryTags);l<u.length;l++)d=u[l],(Oe[o.entryType].required.includes(d.toLowerCase())||Oe[o.entryType].extra.includes(d.toLowerCase()))&&(o.entryTags[d.toLowerCase()]=o.entryTags[d]),delete o.entryTags[d];m=!0,g=Object(me.a)(Oe[o.entryType].required);try{for(g.s();!(b=g.n()).done;)h=b.value,o.entryTags[h]||(m=!1)}catch(p){g.e(p)}finally{g.f()}m&&c.push(o);case 18:e.next=8;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(6),s.e(e.t0);case 25:return e.prev=25,s.f(),e.finish(25);case 28:return E={bibtexdatabasename:n,entries:c},e.prev=29,e.next=32,f.a.post("/api/database/upload",Object(w.a)(Object(w.a)({},E),{},{group:"user"===a?null:a}));case 32:return v=e.sent,console.log(v.data),e.abrupt("return",v);case 37:return e.prev=37,e.t1=e.catch(29),console.log(e.t1.response),e.abrupt("return",e.t1.response);case 41:case"end":return e.stop()}}),e,null,[[6,22,25,28],[29,37]])})));return function(t,n,a){return e.apply(this,arguments)}}();n(598);function Qe(e,t){switch(t.type){case"setCurrentUser":return Object(w.a)(Object(w.a)({},e),{},{currentUser:t.user});case"delete":return Object(w.a)(Object(w.a)({},e),{},{isDeleting:!0,deletedUser:t.user});case"search":return Object(w.a)(Object(w.a)({},e),{},{search:t.value});case"searchParam":return Object(w.a)(Object(w.a)({},e),{},{searchParam:t.value});case"finishLoading":return Object(w.a)(Object(w.a)({},e),{},{isLoading:!1,users:t.users});case"finishDeleting":return t.ok?Object(w.a)(Object(w.a)({},e),{},{isDeleting:!1,isLoading:!0,deletedUser:null}):Object(w.a)(Object(w.a)({},e),{},{isDeleting:!1,deletedUser:null});default:return e}}var Ue=[{key:1,text:"Name",value:"name"},{key:2,text:"Email",value:"email"},{key:3,text:"Username",value:"username"}],Re=function(e){var t=Object(a.useReducer)(Qe,{isLoading:!0,currentUser:null,isDeleting:!1,deletedUser:null,users:null,search:"",searchParam:"name"}),n=Object(O.a)(t,2),c=n[0],s=n[1];if(Object(a.useEffect)((function(){var e=function(){var e=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ke();case 2:t=e.sent,s({type:"setCurrentUser",user:t});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();c.currentUser||e()}),[c.currentUser]),Object(a.useEffect)((function(){c.isLoading&&f.a.get("/api/user").then((function(e){console.log(e.data),s({type:"finishLoading",users:e.data,ok:!0})}))}),[c.isLoading]),Object(a.useEffect)((function(){var e=function(){var e=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.delete("/api/user/".concat(c.deletedUser._id));case 2:t=e.sent,s({type:"finishDeleting",user:t.data,ok:!0});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();c.isDeleting&&e()}),[c.isDeleting,c.deletedUser]),c.isLoading)return r.a.createElement("div",null,"Loading...");if("admin"!==c.currentUser.role)return r.a.createElement("div",null,r.a.createElement("div",{className:"warning"},"You don't have access to this page"));var o=c.users.filter((function(e){return""===c.search||e[c.searchParam].includes(c.search)})).map((function(e){return r.a.createElement(ue,{user:e,dispatch:s,key:e._id})}));return console.log(c.searchParam),console.log(c.search),r.a.createElement("div",{className:"admin"},r.a.createElement("div",{className:"buttons"},r.a.createElement(i.b,{to:"/create-users",className:"create-btn button-big"},"Create User"),r.a.createElement("div",{className:"select-param"},r.a.createElement(pe.a,{compact:!0,className:"select-param"},r.a.createElement(de.a,{value:c.searchParam,options:Ue,simple:!0,item:!0,onChange:function(e,t){return s({type:"searchParam",value:t.value})}}))),r.a.createElement("input",{className:"search",placeholder:"Enter a value",value:c.search,onChange:function(e){return s({type:"search",value:e.target.value})}})),r.a.createElement("div",{className:"table-wrapper"},r.a.createElement(oe.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Email"),r.a.createElement("th",null,"Role"),r.a.createElement("th",null,"Username"),r.a.createElement("th",null,"Actions"))),r.a.createElement("tbody",null,o))))},Le=Object(l.b)(null,{setAlert:b,register:function(e){var t=e.name,n=e.email,a=e.role,r=e.username,c=e.password;return function(){var e=Object(d.a)(p.a.mark((function e(s){var i,o,l,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={headers:{"Content-Type":"application/json"}},o=JSON.stringify({name:t,email:n,role:a,username:r,password:c}),e.prev=2,e.next=5,f.a.post("/api/user/register-user",o,i);case 5:l=e.sent,console.log("HERE"),s({type:"REGISTER_SUCCESS",payload:l.data}),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(2),(u=e.t0.response.data.errors)&&u.forEach((function(e){return s(b(e.msg,"danger"))})),s({type:"REGISTER_FAIL"});case 15:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.setAlert,n=e.register,c=Object(a.useState)({name:"",email:"",role:"",username:"",password:"",password2:""}),s=Object(O.a)(c,2),o=s[0],l=s[1],u=o.name,m=o.email,f=o.role,g=o.username,b=o.password,h=o.password2,E=function(e){return l(Object(w.a)(Object(w.a)({},o),{},Object(A.a)({},e.target.name,e.target.value)))},v=function(){var e=Object(d.a)(p.a.mark((function e(a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),b!==h?t("Passwords do not match","danger"):n({name:u,email:m,role:f,username:g,password:b});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(a.Fragment,null,r.a.createElement("h1",{className:"large text-primary"},"Create User"),r.a.createElement("form",{className:"form",onSubmit:v},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",placeholder:"Name",name:"name",value:u,required:!0,onChange:E})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"email",placeholder:"Email Address",name:"email",value:m,onChange:E})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",placeholder:"Role",name:"role",value:f,onChange:E})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",placeholder:"Username",name:"username",value:g,onChange:E})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",placeholder:"Password",name:"password",value:b,onChange:E})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",placeholder:"Confirm Password",name:"password2",value:h,onChange:E})),r.a.createElement("input",{type:"submit",className:"btn btn-primary",value:"Register"}),r.a.createElement("div",{className:"buttons"},r.a.createElement(i.b,{to:"/admin",className:"btn btn-dark"},"Back"))))})),Te=n(42),Me=function(){var e=Object(d.a)(p.a.mark((function e(t,n,a){var r,c,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},c=function(){var e=Object(d.a)(p.a.mark((function e(){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.put("/api/user/"+a,t);case 3:n=e.sent,r.fields={message:n.data.msg,ok:n.data.success},console.log(n.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),r.fields={message:e.t0.response.data.msg,ok:e.t0.response.data.success};case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===n){e.next=12;break}return e.prev=1,e.next=4,f.a.put("/api/user/updatePassword/"+a,{password:n});case 4:t=e.sent,console.log(t.data),r.password={message:t.data.msg,ok:t.data.success},e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),r.password={message:e.t0.response.data.msg,ok:e.t0.response.data.success};case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),e.next=5,Promise.all([c(),s()]);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}();n(725);function Ye(e,t){switch(t.type){case"clearMessages":return console.log("CLEARING"),Object(w.a)(Object(w.a)({},e),{},{messages:[],clearing:!1});case"save":return Object(w.a)(Object(w.a)({},e),{},{isSaving:!0});case"finishSaving":var n=!1;return(t.fields&&t.fields.ok||t.password&&t.password.ok)&&(n=!0),t.fields&&e.messages.push(t.fields),t.password&&e.messages.push(t.password),Object(w.a)(Object(w.a)({},e),{},{isSaving:!1,clearing:!0,isLoading:n});case"changePassword":return console.log("here"),t.ok?Object(w.a)(Object(w.a)({},e),{},{isLoading:!0,password:""}):e;case"finishLoading":return Object(w.a)(Object(w.a)({},e),{},{isLoading:!1,name:t.name,email:t.email,role:t.role,username:t.username});case"name":return Object(w.a)(Object(w.a)({},e),{},{name:t.value});case"email":return Object(w.a)(Object(w.a)({},e),{},{email:t.value});case"role":return Object(w.a)(Object(w.a)({},e),{},{role:t.value});case"username":return Object(w.a)(Object(w.a)({},e),{},{username:t.value});case"password":return Object(w.a)(Object(w.a)({},e),{},{password:t.value});default:return e}}var We=function(e){var t=Object(a.useReducer)(Ye,{messages:[],clearing:!1,isLoading:!0,isSaving:!1,name:"",email:"",role:"",username:"",password:""}),n=Object(O.a)(t,2),c=n[0],s=n[1];Object(a.useEffect)((function(){c.clearing&&setTimeout((function(){return s({type:"clearMessages"})}),5e3)}),[c.clearing]),Object(a.useEffect)((function(){f.a.get("/api/user/"+e.match.params.id).then((function(e){s({type:"finishLoading",name:e.data.name,email:e.data.email,role:e.data.role,username:e.data.username})}))}),[e.match.params.id]),Object(a.useEffect)((function(){var t=function(){var t=Object(d.a)(p.a.mark((function t(){var n,a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("submiting"),n={name:c.name,email:c.email,role:c.role,username:c.username},t.next=4,Me(n,c.password,e.match.params.id);case 4:a=t.sent,s(Object(w.a)({type:"finishSaving"},a));case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();c.isSaving&&t()}),[c.isSaving,c.name,c.email,c.role,c.username,c.password,e.match.params.id]);return r.a.createElement("div",{className:"form-wrapper"},r.a.createElement(Te.a,{onSubmit:function(e){e.preventDefault(),s({type:"save"})},autoComplete:"off"},r.a.createElement(Te.a.Group,{controlId:"Name"},r.a.createElement(Te.a.Label,null,"Name"),r.a.createElement(Te.a.Control,{required:!0,type:"text",value:c.name,onChange:function(e){return s({type:"name",value:e.target.value})}})),r.a.createElement(Te.a.Group,{controlId:"Email"},r.a.createElement(Te.a.Label,null,"Email"),r.a.createElement(Te.a.Control,{unique:!0,required:!0,type:"email",value:c.email,onChange:function(e){return s({type:"email",value:e.target.value})}})),r.a.createElement(Te.a.Group,{controlId:"Role"},r.a.createElement(Te.a.Label,null,"Role"),r.a.createElement(Te.a.Control,{required:!0,as:"select",value:c.role,onChange:function(e){return s({type:"role",value:e.target.value})}},r.a.createElement("option",null,"user"),r.a.createElement("option",null,"admin"))),r.a.createElement(Te.a.Group,{controlId:"Username"},r.a.createElement(Te.a.Label,null,"Username"),r.a.createElement(Te.a.Control,{required:!0,type:"text",value:c.username,onChange:function(e){return s({type:"username",value:e.target.value})}})),r.a.createElement(Te.a.Group,{controlId:"Password"},r.a.createElement(Te.a.Label,null,"New Password"),r.a.createElement(Te.a.Control,{minLength:"6",type:"password",autoComplete:"new-password","aria-autocomplete":"none",value:c.password,onChange:function(e){return s({type:"password",value:e.target.value})}})),r.a.createElement(le.a,{variant:"danger",size:"lg",block:"block",type:"submit"},"Update User")),r.a.createElement(i.b,{to:"/admin",className:"link-back"},"Back to admin page"),c.messages.map((function(e,t){return r.a.createElement("div",{className:"edit-message ".concat(e.ok?"message-safe":"message-dang")},e.message)})))},He=(n(727),n(728),n(729),function(e){var t=e.file.user?{label:"User",name:e.file.user.name}:{label:"Group",name:e.file.group.name},n=new Date(e.file.updatedAt);return r.a.createElement("div",{className:e.isSelected?"file-box chosen-file":"file-box",onClick:function(t){return e.dispatch({type:"select",file:e.file})}},r.a.createElement("div",{className:"file-head"},r.a.createElement("div",{className:"file-bibtex-name"},e.file.bibtexdatabasename),r.a.createElement("img",{className:"file-icon ".concat(e.isAllowed?"disabled":""),src:"https://www.pngmart.com/files/12/Corona-Lockdown-PNG-Clipart.png",alt:""})),r.a.createElement("div",{className:"file-info"},r.a.createElement("div",{className:"file-info-label"},t.label,":"),r.a.createElement("div",{className:"file-info-name"},t.name)),r.a.createElement("div",{className:"file-date-label"},"Last updated:"),r.a.createElement("div",{className:"file-date"},n.toLocaleDateString()," ",n.toLocaleTimeString()))}),Pe=function(e){if(!e.active||!e.fileList)return r.a.createElement("div",{className:"file-div"});var t,n=e.fileList.map((function(t){var n=t.user&&t.user._id===e.user._id||t.group&&(t.group.owner===e.user._id||t.group.users.includes(e.user._id));return r.a.createElement(He,{key:t._id,file:t,isSelected:e.selectedFile&&e.selectedFile._id===t._id,isAllowed:n,dispatch:e.dispatch})}));return t=e.uploading?"Upload a database":e.selectedFile?"Save":"Add a database",r.a.createElement("div",{className:"file-div"},r.a.createElement("label",{className:"upload-btn",htmlFor:"file"},"Upload"),r.a.createElement("input",{type:"file",name:"file",id:"file",onChange:function(t){return e.dispatch({type:"upload",file:t.target.files[0]})},className:"file-upload-input"}),r.a.createElement("div",{className:"file-body"},n),r.a.createElement("select",{className:"file-group ".concat(!e.selectedFile||e.uploading?"":"disabled"),onChange:function(t){return e.dispatch({type:"selectGroup",group:t.target.value})}},r.a.createElement("option",{value:"user"},"Personal Database"),e.groups.map((function(e){return r.a.createElement("option",{value:e._id,key:e._id},e.name)}))),r.a.createElement("div",{className:"file-name ".concat(e.isSelectedAllowed||!e.selectedFile?"":"disabled")},r.a.createElement("div",{className:"file-name-label"},"Enter a name:"),r.a.createElement("input",{className:"file-name-input",value:e.inputName,onChange:function(t){return e.dispatch({type:"inputName",value:t.target.value})}})),r.a.createElement("div",{className:"file-footer ".concat(e.isSelectedAllowed||!e.selectedFile?"":"disabled")},r.a.createElement("button",{className:"delete-db-btn",onClick:function(t){return e.dispatch({type:"delete"})}},"Delete a database"),r.a.createElement("button",{className:"add-db-btn",onClick:function(t){return e.dispatch({type:"save"})}},t)))},Ke=function(e){var t="";return e.forEach((function(e){t+=function(e){var t=e.entryType.toLowerCase(),n=Object.entries(e.entryTags),a=n.map((function(e,t){var a=Object(O.a)(e,2),r=a[0],c=a[1];return t===n.length-1?function(e,t){return"".concat(e,' = "').concat(t,'"}\n\n')}(r,c):function(e,t){return"".concat(e,' = "').concat(t,'",\n')}(r,c)})),r="@".concat(t,"{").concat(e.citationKey,",\n");return a.forEach((function(e){return r+=e})),r}(e)})),t},qe=(n(730),function(e){var t=e.isChosen?"entry chosen-entry":"entry";return e.isNew&&e.isDisabled?r.a.createElement("button",{className:"entry-new disabled"}):e.isNew?r.a.createElement("button",{className:"entry-new chosen-entry",onClick:e.onClick},r.a.createElement("div",{className:"entry-text"},r.a.createElement("p",null,"new ",r.a.createElement("span",{className:"entry-text-new"},e.entry.entryType)))):r.a.createElement("button",{className:t,onClick:e.onClick},r.a.createElement("div",{className:"entry-text"},r.a.createElement("p",{className:"entry-header"},r.a.createElement("span",{className:"entry-type"},"@",e.entry.entryType),"{",r.a.createElement("span",{className:"entry-key"},e.entry.citationKey)),r.a.createElement("div",{className:"entry-title-cont entry-cont"},r.a.createElement("div",{className:"entry-title"},"title"),r.a.createElement("div",{className:"entry-eq"},"="),r.a.createElement("div",{className:"entry-tag"},e.entry.entryTags.title)),r.a.createElement("div",{className:"entry-author-cont entry-cont"},r.a.createElement("div",{className:"entry-author"},"author"),r.a.createElement("div",{className:"entry-eq"},"="),r.a.createElement("div",{className:"entry-tag"},e.entry.entryTags.author)),r.a.createElement("div",{className:"entry-year-cont entry-cont"},r.a.createElement("div",{className:"entry-year"},"year"),r.a.createElement("div",{className:"entry-eq"},"="),r.a.createElement("div",{className:"entry-tag"},e.entry.entryTags.year)),r.a.createElement("p",{className:"entry-footer"},r.a.createElement("span",{className:"entry-end"},"..."),"}")))}),Je=(n(731),[{key:1,text:"Article",value:"article"},{key:2,text:"Book",value:"book"},{key:3,text:"Booklet",value:"booklet"},{key:4,text:"Conference",value:"conference"},{key:5,text:"InBook",value:"inBook"},{key:6,text:"InCollection",value:"inCollection"},{key:7,text:"InProceedings",value:"inProceedings"},{key:8,text:"Manual",value:"manual"},{key:9,text:"Masters Thesis",value:"mastersThesis"},{key:10,text:"Misc",value:"misc"},{key:11,text:"Online",value:"online"},{key:12,text:"Phd Thesis",value:"phdThesis"},{key:13,text:"Proceedings",value:"proceedings"}]);var Ze=function(e){if(Object(a.useEffect)((function(){var e=document.querySelector(".chosen-entry");e&&e.scrollIntoView({behavior:"smooth"})})),!e.active||!e.file)return r.a.createElement("div",{className:"entry-div"});var t=function(e){var t={entryTags:{}},n=e.trim().split(" "),a=n.find((function(e){return e.startsWith("@")}));return a&&(t.entryType=a.split("@")[1]),n.forEach((function(e){if(2===e.split("=").length){var n=e.split("="),a=Object(O.a)(n,2),r=a[0],c=a[1];t.entryTags[r]=c}})),t}(e.search),n=0!==Object.keys(t.entryTags).length||t.entryType?e.file.entries.filter((function(e){var n=!0;t.entryType&&(n=n&&(e.entryType.toLowerCase().startsWith(t.entryType)||e.entryType.toLowerCase().includes(t.entryType)));var a=Object.entries(t.entryTags);if(0!==a.length){var r,c=!1,s=Object(me.a)(a);try{for(s.s();!(r=s.n()).done;){var i=Object(O.a)(r.value,2),o=i[0],l=i[1];"citationKey"!==o?e.entryTags[o]&&(e.entryTags[o].startsWith(l)||e.entryTags[o].includes(l))&&(c=!0):(e[o].startsWith(l)||e[o].includes(l))&&(c=!0)}}catch(u){s.e(u)}finally{s.f()}return n&&c}return n})):e.file.entries,c=Ke(n),s=n.map((function(t){var n=e.selectedEntry&&e.selectedEntry._id===t._id;return r.a.createElement(qe,{isChosen:n,isNew:!1,entry:t,key:t._id,onClick:function(){return e.dispatch({type:"selectEntry",entry:t})}})})),i=r.a.createElement(qe,{isChosen:!!e.newEntry,isNew:!0,isDisabled:!e.newEntry,entry:e.newEntry,key:"newEntry",onClick:function(){return e.dispatch({type:"unselectNew"})}});return r.a.createElement("div",{className:"entry-div"},r.a.createElement(pe.a,{compact:!0,className:"add-entry-btn"},r.a.createElement(de.a,{text:"Add entry",options:Je,simple:!0,item:!0,onChange:function(t,n){e.isSelectedAllowed&&e.dispatch({type:"selectNew",value:n.value})}})),r.a.createElement("div",{className:"entry-search"},r.a.createElement("label",{htmlFor:"entry-search"},"Find entries"),r.a.createElement("input",{className:"entry-search-input",id:"entry-search",placeholder:"example: @article title=mytitle",value:e.search,onChange:function(t){return e.dispatch({type:"inputSearch",value:t.target.value})}})),r.a.createElement("div",{className:"entry-body"},s,i),r.a.createElement("a",{className:"download-btn",href:"data:text/x-bibtex, ".concat(c),download:"".concat(e.file.bibtexdatabasename,".bib")},"Download"))},Ve=(n(732),function(e){if(!e.active||!e.entry)return r.a.createElement("div",{className:"info-div"});var t=[];return t.push(r.a.createElement("div",{className:"info info-required info-citation",key:"citationKey"},r.a.createElement("div",{className:"info-key","data-tag":"citationKey"},"*citationKey:"),r.a.createElement("input",{className:"info-value",value:e.entryChanges.citationKey,readOnly:!e.isSelectedAllowed,onChange:function(t){return e.dispatch({type:"inputCitationKey",value:t.target.value})}}))),Oe[e.entry.entryType].required.forEach((function(n){return t.push(r.a.createElement("div",{className:"info info-required",key:n},r.a.createElement("div",{className:"info-key","data-tag":n},"*",n,":"),r.a.createElement("input",{className:"info-value",value:e.entryChanges.entryTags[n]||"",readOnly:!e.isSelectedAllowed,onChange:function(t){return e.dispatch({type:"inputTag",tag:n,value:t.target.value})}})))})),Oe[e.entry.entryType].extra.forEach((function(n){return t.push(r.a.createElement("div",{className:"info info-required",key:n},r.a.createElement("div",{className:"info-key","data-tag":n},n,":"),r.a.createElement("input",{className:"info-value",value:e.entryChanges.entryTags[n]||"",readOnly:!e.isSelectedAllowed,onChange:function(t){return e.dispatch({type:"inputTag",tag:n,value:t.target.value})}})))})),r.a.createElement("div",{className:"info-div"},r.a.createElement("div",{className:"info-head"},"@",e.entry.entryType.toLowerCase()),r.a.createElement("div",{className:"info-body"},t),r.a.createElement("div",{className:"info-footer ".concat(e.isSelectedAllowed?"":"disabled")},r.a.createElement("button",{className:"save-btn",onClick:function(t){return e.dispatch({type:"saveEntry"})}},"Save"),r.a.createElement("button",{className:"delete-btn",onClick:function(t){return e.dispatch({type:"deleteEntry"})}},"Delete")))});function ze(e,t){switch(t.type){case"setUser":return Object(w.a)(Object(w.a)({},e),{},{user:t.user});case"load":var n=e.selectedFile?t.files.find((function(t){return t._id===e.selectedFile._id})):null;return Object(w.a)(Object(w.a)({},e),{},{isLoading:!1,fileList:t.files,groups:t.groups,selectedFile:n,selectedGroup:"user"});case"inputName":return Object(w.a)(Object(w.a)({},e),{},{inputName:t.value});case"select":var a=e.selectedFile&&t.file._id===e.selectedFile._id?null:t.file,r=a?a.bibtexdatabasename:"";return Object(w.a)(Object(w.a)({},e),{},{uploadedFile:null,selectedFile:a,inputName:r,inputSearch:"",newEntry:null});case"upload":return"text/x-bibtex"!==t.file.type?e:Object(w.a)(Object(w.a)({},e),{},{uploadedFile:t.file,inputName:t.file.name.split(".").slice(0,-1).join(".")});case"delete":return e.selectedFile?Object(w.a)(Object(w.a)({},e),{},{isDeletingFile:!0}):e;case"save":return e.inputName?e.uploadedFile?Object(w.a)(Object(w.a)({},e),{},{isUploadingFile:!0}):e.selectedFile?Object(w.a)(Object(w.a)({},e),{},{isSavingFile:!0}):Object(w.a)(Object(w.a)({},e),{},{isCreatingFile:!0}):e;case"finishDeleting":return t.ok?Object(w.a)(Object(w.a)({},e),{},{isDeletingFile:!1,selectedFile:null,isLoading:!0,inputName:""}):Object(w.a)(Object(w.a)({},e),{},{isDeletingFile:!1});case"finishSaving":return t.ok?Object(w.a)(Object(w.a)({},e),{},{isSavingFile:!1,selectedFile:t.file,isLoading:!0}):Object(w.a)(Object(w.a)({},e),{},{isSavingFile:!1});case"finishCreating":return t.ok?Object(w.a)(Object(w.a)({},e),{},{isCreatingFile:!1,selectedFile:t.file,isLoading:!0,inputName:t.file.bibtexdatabasename}):Object(w.a)(Object(w.a)({},e),{},{isCreatingFile:!1});case"finishUploading":return t.ok?Object(w.a)(Object(w.a)({},e),{},{isUploadingFile:!1,uploadedFile:null,isLoading:!0,selectedFile:t.file,inputName:t.file.bibtexdatabasename}):Object(w.a)(Object(w.a)({},e),{},{isUploadingFile:!1,uploadedFile:null});case"selectEntry":var c=e.selectedEntry&&t.entry._id===e.selectedEntry._id?null:t.entry;return Object(w.a)(Object(w.a)({},e),{},{selectedEntry:c,newEntry:null,entryChanges:c});case"inputSearch":return Object(w.a)(Object(w.a)({},e),{},{inputSearch:t.value});case"selectNew":var s={entryType:t.value};return Object(w.a)(Object(w.a)({},e),{},{newEntry:s,selectedEntry:null,entryChanges:Object(w.a)(Object(w.a)({},s),{},{entryTags:{},citationKey:""})});case"unselectNew":return Object(w.a)(Object(w.a)({},e),{},{newEntry:null});case"inputCitationKey":return Object(w.a)(Object(w.a)({},e),{},{entryChanges:Object(w.a)(Object(w.a)({},e.entryChanges),{},{citationKey:t.value})});case"inputTag":return Object(w.a)(Object(w.a)({},e),{},{entryChanges:Object(w.a)(Object(w.a)({},e.entryChanges),{},{entryTags:Object(w.a)(Object(w.a)({},e.entryChanges.entryTags),{},Object(A.a)({},t.tag,t.value))})});case"deleteEntry":return e.newEntry?Object(w.a)(Object(w.a)({},e),{},{newEntry:null}):Object(w.a)(Object(w.a)({},e),{},{isDeletingEntry:!0});case"saveEntry":var i,o=Object(me.a)(Oe[e.entryChanges.entryType].required);try{for(o.s();!(i=o.n()).done;){var l=i.value;if(!e.entryChanges.entryTags[l]||""===e.entryChanges.entryTags[l])return e}}catch(u){o.e(u)}finally{o.f()}return e.newEntry?Object(w.a)(Object(w.a)({},e),{},{isCreatingEntry:!0}):Object(w.a)(Object(w.a)({},e),{},{isSavingEntry:!0});case"finishDeletingEntry":return t.ok?Object(w.a)(Object(w.a)({},e),{},{isDeletingEntry:!1,selectedEntry:null,entryChanges:null,isLoading:!0}):Object(w.a)(Object(w.a)({},e),{},{isDeletingEntry:!1});case"finishCreatingEntry":return t.ok?Object(w.a)(Object(w.a)({},e),{},{isCreatingEntry:!1,selectedEntry:t.entry,inputSearch:"",entryChanges:t.entry,isLoading:!0,newEntry:null}):Object(w.a)(Object(w.a)({},e),{},{isCreatingEntry:!1});case"finishSavingEntry":return t.ok?Object(w.a)(Object(w.a)({},e),{},{isSavingEntry:!1,selectedEntry:t.entry,entryChanges:t.entry,isLoading:!0}):Object(w.a)(Object(w.a)({},e),{},{isSavingEntry:!1});case"selectGroup":return console.log("GROUP"),console.log(t),Object(w.a)(Object(w.a)({},e),{},{selectedGroup:t.group});default:return e}}var Xe=function(){var e=Object(a.useReducer)(ze,{user:null,groups:null,selectedGroup:"user",isLoading:!0,isDeletingFile:!1,isDeletingEntry:!1,isUploadingFile:!1,isSavingFile:!1,isSavingEntry:!1,isCreatingFile:!1,isCreatingEntry:!1,selectedFile:null,selectedEntry:null,entryChanges:null,newEntry:null,uploadedFile:null,inputName:"",inputSearch:""}),t=Object(O.a)(e,2),n=t[0],c=t[1];Object(a.useEffect)((function(){(function(){var e=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ke();case 2:t=e.sent,c({type:"setUser",user:t});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(a.useEffect)((function(){var e=function(){var e=Object(d.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce();case 2:return t=e.sent,e.next=5,xe();case 5:n=e.sent,c({type:"load",files:t,groups:n});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n.isLoading&&e()}),[n.isLoading]),Object(a.useEffect)((function(){var e=function(){var e=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fe(n.selectedFile._id);case 2:t=e.sent,c({type:"finishDeleting",ok:t.data.ok});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n.isDeletingFile&&e()}),[n.isDeletingFile,n.selectedFile]),Object(a.useEffect)((function(){var e=function(){var e=Object(d.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("user"!==n.selectedGroup){e.next=7;break}return e.next=3,Be(n.inputName);case 3:t=e.sent,c({type:"finishCreating",ok:t.data.ok,file:t.data.response}),e.next=11;break;case 7:return e.next=9,Be(n.inputName,n.selectedGroup);case 9:a=e.sent,c({type:"finishCreating",ok:a.data.ok,file:a.data.response});case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n.isCreatingFile&&e()}),[n.isCreatingFile,n.inputName,n.selectedGroup]),Object(a.useEffect)((function(){var e=function(){var e=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=new FileReader).readAsText(n.uploadedFile),t.onload=Object(d.a)(p.a.mark((function e(){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De(t.result,n.inputName,n.selectedGroup);case 2:a=e.sent,c({type:"finishUploading",ok:a.data.ok,file:a.data.response});case 4:case"end":return e.stop()}}),e)}))),t.onerror=function(){console.log(t.error),c({type:"finishUploading",ok:!1})};case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n.isUploadingFile&&e()}),[n.isUploadingFile,n.uploadedFile,n.inputName,n.selectedGroup]),Object(a.useEffect)((function(){var e=function(){var e=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne(n.inputName,n.selectedFile._id);case 2:t=e.sent,c({type:"finishSaving",ok:t.data.ok,file:t.data.response});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n.isSavingFile&&e()}),[n.isSavingFile,n.inputName,n.selectedFile]),Object(a.useEffect)((function(){var e=function(){var e=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(n.selectedEntry._id,n.selectedFile._id);case 2:t=e.sent,c({type:"finishDeletingEntry",ok:t.data.ok});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n.isDeletingEntry&&e()}),[n.isDeletingEntry,n.selectedFile,n.selectedEntry]),Object(a.useEffect)((function(){var e=function(){var e=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se(n.entryChanges,n.selectedFile._id);case 2:t=e.sent,c({type:"finishCreatingEntry",ok:t.data.ok,entry:t.data.response});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n.isCreatingEntry&&e()}),[n.isCreatingEntry,n.entryChanges,n.selectedFile]),Object(a.useEffect)((function(){var e=function(){var e=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ge(n.entryChanges,n.selectedFile._id);case 2:t=e.sent,c({type:"finishSavingEntry",ok:t.data.ok,entry:t.data.response});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n.isSavingEntry&&e()}),[n.isSavingEntry,n.entryChanges,n.selectedFile]);var s=!n.isLoading,i=!!n.selectedFile&&!n.isLoading,o=!!n.selectedFile&&!n.isLoading&&(!!n.selectedEntry&&!!n.selectedFile.entries.find((function(e){return e._id===n.selectedEntry._id}))||!!n.newEntry),l=n.selectedFile&&(n.selectedFile.user&&n.selectedFile.user._id===n.user._id||n.selectedFile.group&&(n.selectedFile.group.owner===n.user._id||n.selectedFile.group.users.includes(n.user._id)));return r.a.createElement("div",{className:"Editor"},r.a.createElement(Pe,{active:s,isSelectedAllowed:l,selectedFile:n.selectedFile,uploading:!!n.uploadedFile,inputName:n.inputName,fileList:n.fileList,groups:n.groups,user:n.user,dispatch:c}),r.a.createElement(Ze,{active:i,isSelectedAllowed:l,file:n.selectedFile,selectedEntry:n.selectedEntry,newEntry:n.newEntry,search:n.inputSearch,dispatch:c}),r.a.createElement(Ve,{active:o,isSelectedAllowed:l,entry:n.selectedEntry||n.newEntry,entryChanges:n.entryChanges,dispatch:c}))},_e=function(){var e=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.get("/api/papers/files");case 3:return t=e.sent,e.abrupt("return",t);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),$e=function(){var e=Object(d.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.delete("/api/papers/files/".concat(t));case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),et=function(){var e=Object(d.a)(p.a.mark((function e(t,n){var a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("file",t),e.prev=2,e.next=5,f.a.post("/api/papers/files",a,{onUploadProgress:function(e){var t=e.lengthComputable?e.total:e.target.getResponseHeader("content-length")||e.target.getResponseHeader("x-decompressed-content-length");console.log("onUploadProgress",t),null!==t&&n(Math.round(100*e.loaded/t))}});case 5:return r=e.sent,e.abrupt("return",r);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",e.t0.response);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n){return e.apply(this,arguments)}}(),tt=function(){var e=Object(d.a)(p.a.mark((function e(t){var n,a,r,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/papers/files/".concat(t)).then((function(e){return e.blob()}));case 2:return n=e.sent,(a=new FormData).append("input",n),console.log("SENT"),e.next=8,fetch("https://ec2-3-136-41-26.us-east-2.compute.amazonaws.com/api/processReferences",{method:"POST",body:a,headers:{Accept:"application/x-bibtex"}});case 8:if(200===(r=e.sent).status){e.next=11;break}return e.abrupt("return",{ok:!1,err:"No references found"});case 11:return e.next=13,r.blob();case 13:return c=e.sent,e.abrupt("return",{ok:!0,blob:c});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),nt=function(e){var t=new FileReader;return new Promise((function(n,a){t.onerror=function(){t.abort(),a(new DOMException("Problem parsing input file."))},t.onload=function(){n(t.result)},t.readAsText(e)}))},at=function(){var e=Object(d.a)(p.a.mark((function e(t,n,a){var r,c,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,tt(t);case 3:if((r=e.sent).ok){e.next=6;break}return e.abrupt("return",{data:r});case 6:return e.next=8,nt(r.blob);case 8:return c=e.sent,e.next=11,De(c,n,a);case 11:return s=e.sent,e.abrupt("return",s);case 15:return e.prev=15,e.t0=e.catch(0),e.abrupt("return",{data:{ok:!1,err:e.t0.message}});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,n,a){return e.apply(this,arguments)}}(),rt=function(){var e=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("/api/database");case 2:return t=e.sent,e.abrupt("return",t.data.response);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ct=(n(733),function(e){var t=new Date(e.file.uploadDate);return r.a.createElement("tr",null,r.a.createElement("td",null,e.file.filename),r.a.createElement("td",null,"".concat(t.toLocaleDateString()," ").concat(t.toLocaleTimeString())),r.a.createElement("td",null,Math.round(e.file.length/100)/10+"KB"),r.a.createElement("td",null,r.a.createElement("div",{className:"paper-buttons"},r.a.createElement("button",{onClick:function(t){return e.dispatch({type:"deleteFile",file:e.file})},className:"remove-btn"},"Remove"),r.a.createElement("button",{onClick:function(t){e.dispatch({type:"openWindow",file:e.file})},className:"extract-btn"},"Extract"),r.a.createElement("a",{className:"download-paper-btn",href:e.file.url,download:"".concat(e.file.filename)},"Download"))))}),st=(n(734),n(735),function(e){if(!e.active)return r.a.createElement("div",{className:"paper-window disabled"});var t=e.groups.map((function(e,t){return{key:t,text:e.name,value:e._id}}));t.push({key:e.groups.length,text:"Personal",value:"personal"});var n=e.databases.filter((function(t){return"personal"===e.selectedGroup?t.user:t.group&&t.group._id===e.selectedGroup})).map((function(e,t){return{key:t,text:e.bibtexdatabasename,value:e.bibtexdatabasename}}));return n.push({key:e.databases.length,text:"New database",value:"new"}),r.a.createElement("div",{className:"paper-window"},r.a.createElement("div",{className:"paper-window-file"},e.file.filename),r.a.createElement("div",{className:"select-group-label"},"Select a group"),r.a.createElement("div",{className:"select-group-btn"},r.a.createElement("select",{className:"select-group",placeholder:"Select a group",value:e.selectedGroup,onChange:function(t){return e.dispatch({type:"selectGroup",value:t.target.value})}},t.map((function(e){return r.a.createElement("option",{value:e.value,key:e.key},e.text)})))),r.a.createElement("div",{className:"select-database-label"},"Select a database"),r.a.createElement("div",{className:"select-database-btn"},r.a.createElement("select",{className:"select-database",placeholder:"Select a database",disabled:!e.selectedGroup,value:e.selected||"new",onChange:function(t){return e.dispatch({type:"selectDatabase",value:t.target.value})}},n.map((function(e){return r.a.createElement("option",{value:e.value,key:e.key},e.text)})))),r.a.createElement("div",{className:"name-label"},"Enter a name"),r.a.createElement("input",{className:"name-input",id:"database-name",autoComplete:"off",readOnly:e.selected&&"new"!==e.selected,value:e.inputValue,onChange:function(t){return e.dispatch({type:"inputName",value:t.target.value})}}),r.a.createElement("div",{className:"message-div ".concat(e.windowMessage.type||"")},e.windowMessage.message||""),r.a.createElement("button",{className:"paper-extract",onClick:function(t){return e.dispatch({type:"extractBibtex"})}},"Extract"))});function it(e,t){switch(t.type){case"extractBibtex":return e.isExtracting?e:Object(w.a)(Object(w.a)({},e),{},{isExtracting:!0,windowMessage:{type:"loading",message:"Extracting..."}});case"changeProgress":return Object(w.a)(Object(w.a)({},e),{},{progress:t.progress});case"setDatabases":return Object(w.a)(Object(w.a)({},e),{},{databases:t.databases});case"setGroups":return Object(w.a)(Object(w.a)({},e),{},{groups:t.groups});case"selectGroup":return Object(w.a)(Object(w.a)({},e),{},{selectedGroup:t.value,selected:"new",windowMessage:{}});case"selectDatabase":return Object(w.a)(Object(w.a)({},e),{},{selected:t.value,inputName:"new"!==t.value?t.value:"",windowMessage:{}});case"inputName":return Object(w.a)(Object(w.a)({},e),{},{inputName:t.value,windowMessage:{}});case"searchName":return Object(w.a)(Object(w.a)({},e),{},{searchName:t.value});case"uploadFile":return console.log(t.file),t.file&&"application/pdf"===t.file.type?Object(w.a)(Object(w.a)({},e),{},{uploadedFile:t.file}):Object(w.a)(Object(w.a)({},e),{},{uploadedFile:null});case"closeUploaded":return Object(w.a)(Object(w.a)({},e),{},{uploadedFile:null});case"saveFile":return Object(w.a)(Object(w.a)({},e),{},{isSaving:!0,progress:0});case"deleteFile":return Object(w.a)(Object(w.a)({},e),{},{isDeleting:!0,deletedFile:t.file});case"openWindow":return Object(w.a)(Object(w.a)({},e),{},{windowOpened:!0,extractedFile:t.file});case"closeWindow":return e.isExtracting?e:Object(w.a)(Object(w.a)({},e),{},{windowOpened:!1,windowMessage:{}});case"finishLoading":return console.log(t.files),Object(w.a)(Object(w.a)({},e),{},{isLoading:!1,files:t.files,windowMessage:{}});case"finishDeleting":return t.ok?Object(w.a)(Object(w.a)({},e),{},{isDeleting:!1,isLoading:!0}):Object(w.a)(Object(w.a)({},e),{},{isDeleting:!1});case"finishSaving":return t.ok?Object(w.a)(Object(w.a)({},e),{},{isSaving:!1,isLoading:!0,progress:null}):Object(w.a)(Object(w.a)({},e),{},{isSaving:!1});case"finishExtracting":return t.ok?Object(w.a)(Object(w.a)({},e),{},{isExtracting:!1,windowMessage:{type:"success",message:"File uploaded"}}):Object(w.a)(Object(w.a)({},e),{},{windowMessage:{type:"err",message:t.err},isExtracting:!1});default:return e}}var ot=function(){var e=Object(a.useReducer)(it,{progress:null,isLoading:!0,isDeleting:!1,isSaving:!1,isExtracting:!1,windowOpened:!1,files:null,uploadedFile:null,deletedFile:null,extractedFile:null,groups:null,databases:null,selectedGroup:"personal",selected:null,inputName:"",searchName:"",windowMessage:{}}),t=Object(O.a)(e,2),n=t[0],c=t[1];if(Object(a.useEffect)((function(){var e=function(){var e=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rt();case 2:t=e.sent,c({type:"setDatabases",databases:t});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(function(){var e=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xe();case 2:t=e.sent,c({type:"setGroups",groups:t});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()(),e()}),[]),Object(a.useEffect)((function(){var e=function(){var e=Object(d.a)(p.a.mark((function e(){var t,n,a,r,s,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_e();case 2:t=e.sent,n=t.data.response,a=[],r=Object(me.a)(n);try{for(i=function(){var e=s.value;a.push(fetch("/api/papers/files/".concat(e.filename)).then((function(e){return e.blob()})).then((function(t){var n=window.URL.createObjectURL(t);e.url=n})))},r.s();!(s=r.n()).done;)i()}catch(o){r.e(o)}finally{r.f()}return console.log(n),e.next=10,Promise.all(a);case 10:c({type:"finishLoading",files:n});case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n.isLoading&&e()}),[n.isLoading]),Object(a.useEffect)((function(){var e=function(){var e=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$e(n.deletedFile._id);case 2:t=e.sent,c({type:"finishDeleting",ok:t.data.ok});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n.isDeleting&&e()}),[n.isDeleting,n.deletedFile]),Object(a.useEffect)((function(){var e=function(){var e=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,et(n.uploadedFile,(function(e){c({type:"changeProgress",progress:e})}));case 2:t=e.sent,c({type:"finishSaving",ok:t.data.ok,file:t.data.response});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n.isSaving&&e()}),[n.isSaving,n.uploadedFile]),Object(a.useEffect)((function(){var e=function(){var e=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.inputName){e.next=2;break}return e.abrupt("return",c({type:"finishExtracting",ok:!1,err:"Database name cannot be empty"}));case 2:return console.log(n.inputName),e.next=5,at(n.extractedFile.filename,n.inputName,"personal"===n.selectedGroup?null:n.selectedGroup);case 5:t=e.sent,console.log(t),console.log(t.data),c({type:"finishExtracting",ok:t.data.ok,err:t.data.err,file:t.data.response});case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n.isExtracting&&e()}),[n.isExtracting,n.extractedFile,n.inputName,n.selectedGroup]),n.isLoading||!n.files)return r.a.createElement("div",{className:"Paper"},"Loading");var s=n.files.filter((function(e){return""===n.searchName||e.filename.includes(n.searchName)})).map((function(e){return r.a.createElement(ct,{file:e,dispatch:c,key:e._id})})).reverse(),i=n.uploadedFile?n.uploadedFile.name:"No file selected";return r.a.createElement("div",{className:"Paper"},r.a.createElement("div",{className:n.windowOpened?"paper-layout":"paper-layout disabled",onClick:function(e){return c({type:"closeWindow"})}}),r.a.createElement(st,{active:n.windowOpened,file:n.extractedFile,groups:n.groups,selectedGroup:n.selectedGroup,databases:n.databases,inputValue:n.inputName,windowMessage:n.windowMessage,selected:n.selected,dispatch:c}),r.a.createElement("div",{className:"w3-light-grey"},r.a.createElement("div",{className:"w3-container w3-blue w3-center ".concat(n.progress?"":"disabled"),style:{width:n.progress||"0%"}},n.progress||0,"%")),r.a.createElement("div",{className:"paper-header"},r.a.createElement("div",{className:"search-label"},"Search by file name: "),r.a.createElement("input",{className:"search-paper",value:n.searchName,onChange:function(e){return c({type:"searchName",value:e.target.value})}}),r.a.createElement("input",{type:"file",id:"paper-file",className:"upload-input",onChange:function(e){return c({type:"uploadFile",file:e.target.files[0]})}}),r.a.createElement("label",{htmlFor:"paper-file",className:"upload-label"},"Choose a file"),r.a.createElement("button",{className:"upload-file-btn ".concat(n.uploadedFile?"":"disabled"),onClick:function(e){return c({type:"saveFile"})}},"Upload"),r.a.createElement("div",{className:"upload-file-name ".concat(n.uploadedFile?"activated":"")},i),r.a.createElement("button",{className:"remove-uploaded ".concat(n.uploadedFile?"":"disabled"),onClick:function(e){return c({type:"closeUploaded"})}},"x")),r.a.createElement("div",{className:"paper-wrapper"},r.a.createElement(oe.a,{className:"paper-table",striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Paper"),r.a.createElement("th",null,"Uploaded"),r.a.createElement("th",null,"Size"),r.a.createElement("th",null))),r.a.createElement("tbody",null,s))))},lt=function(){return r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("a",{href:"https://www.scopus.com/"},"Scopus")),r.a.createElement("li",null,r.a.createElement("a",{href:"http://login.webofknowledge.com/error/Error?Error=IPError&PathInfo=%2F&RouterURL=http%3A%2F%2Fwww.webofknowledge.com%2F&Domain=.webofknowledge.com&Src=IP&Alias=WOK5"},"Web of Science")),r.a.createElement("li",null,r.a.createElement("a",{href:"https://pubmed.ncbi.nlm.nih.gov/"},"PubMed")),r.a.createElement("li",null,r.a.createElement("a",{href:"https://eric.ed.gov/"},"ERIC")),r.a.createElement("li",null,r.a.createElement("a",{href:"https://ieeexplore.ieee.org/Xplore/home.jsp"},"IEEE Xplore")),r.a.createElement("li",null,r.a.createElement("a",{href:"https://www.sciencedirect.com/"},"ScienceDirect")),r.a.createElement("li",null,r.a.createElement("a",{href:"https://doaj.org/"},"Directory of Open Access Journals (DOAJ)")),r.a.createElement("li",null,r.a.createElement("a",{href:"https://www.jstor.org/"},"JSTOR")),r.a.createElement("li",null,r.a.createElement("a",{href:"https://scholar.google.com/"},"Google Scholar")))},ut=Object(l.b)((function(e){return{alerts:e.alert}}))((function(e){var t=e.alerts;return null!==t&&t.length>0&&t.map((function(e){return r.a.createElement("div",{key:e.id,className:"alert alert-".concat(e.alertType)},e.msg)}))})),pt=n(368),dt=Object(l.b)((function(e){return{auth:e.auth}}))((function(e){var t=e.component,n=(e.roles,e.auth),a=n.isAuthenticated,c=n.loading,s=Object(pt.a)(e,["component","roles","auth"]);return r.a.createElement(o.b,Object.assign({},s,{render:function(e){return a||c?r.a.createElement(t,e):r.a.createElement(o.a,{to:"/login"})}}))})),mt=n(87),ft=n(365),gt=n(366),bt=n(367),ht=[],Et={token:localStorage.getItem("token"),role:localStorage.getItem("role"),isAuthenticated:null,loading:!0,user:null},vt=Object(mt.combineReducers)({alert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"SET_ALERT":return[].concat(Object(bt.a)(e),[a]);case"REMOVE_ALERT":return e.filter((function(e){return e.id!==a}));default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Et,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(console.log(t),n){case"USER_LOADED":return Object(w.a)(Object(w.a)({},e),{},{isAuthenticated:!0,loading:!1,user:a});case"REGISTER_SUCCESS":case"LOGIN_SUCCESS":return localStorage.setItem("token",a.token),localStorage.setItem("role",a.role),Object(w.a)(Object(w.a)(Object(w.a)({},e),a),{},{isAuthenticated:!0,loading:!1,role:a.role});case"AUTH_ERROR":case"LOGIN_FAIL":case"LOGOUT":return localStorage.removeItem("token"),localStorage.removeItem("role"),Object(w.a)(Object(w.a)({},e),{},{token:null,isAuthenticated:!1,loading:!1,role:null});default:return e}}}),yt=[gt.a],At=Object(mt.createStore)(vt,{},Object(ft.composeWithDevTools)(mt.applyMiddleware.apply(void 0,yt))),wt={auth:{token:null,isAuthenticated:null,loading:!0,user:null}};At.subscribe((function(){var e=wt;if(wt=At.getState(),e.auth.token!==wt.auth.token){var t=wt.auth.token;h(t)}}));var Ot=At,jt=(n(736),function(){var e=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("/api/user/me");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),xt=function(){var e=Object(d.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("/api/group/".concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),kt=function(){var e=Object(d.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.delete("/api/group/".concat(t));case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),Ct=function(){var e=Object(d.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.post("/api/group/leave",{id:t});case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),Nt=function(){var e=Object(d.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.post("/api/group/join-request",{id:t});case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),Bt=function(){var e=Object(d.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.post("/api/group/",{name:t});case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),Ft=function(){var e=Object(d.a)(p.a.mark((function e(t,n){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.put("/api/group",{name:t,id:n});case 3:return a=e.sent,e.abrupt("return",a);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),St=function(){var e=Object(d.a)(p.a.mark((function e(t,n){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.post("/api/group/accept",{groupId:t,userId:n});case 3:return a=e.sent,e.abrupt("return",a);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),Gt=function(){var e=Object(d.a)(p.a.mark((function e(t,n){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.post("/api/group/decline",{groupId:t,userId:n});case 3:return a=e.sent,e.abrupt("return",a);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),It=function(){var e=Object(d.a)(p.a.mark((function e(t,n){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.post("/api/group/ban",{groupId:t,userId:n});case 3:return a=e.sent,e.abrupt("return",a);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),Dt=(n(737),n(738),n(739),function(e){var t,n,a=!1;switch(e.groupType){case"":var c,s=Object(me.a)(e.group.joinRequests);try{for(s.s();!(c=s.n()).done;){c.value._id===e.user._id&&(a=!0)}}catch(i){s.e(i)}finally{s.f()}t=a?"Requested to join":"Join",n="box-click-btn box-safe";break;case"own":t="Delete",n="box-click-btn box-dang";break;case"me":t="Leave",n="box-click-btn box-dang"}return r.a.createElement("div",{className:"group-box ".concat(e.isSelected?"selected-group":""),onClick:function(t){t.target.classList.contains("box-click-btn")||e.dispatch({type:"selectGroup",group:e.group})}},r.a.createElement("div",{className:"box-header"},r.a.createElement("div",{className:"box-name"},e.group.name)),r.a.createElement("div",{className:"box-body"},r.a.createElement("div",{className:"box-owner"},r.a.createElement("div",{className:"box-owner-label"},"Owner:"),r.a.createElement("div",{className:"box-owner-name"},e.group.owner.name)),r.a.createElement("div",{className:"box-members"},r.a.createElement("div",{className:"box-members-label"},"Members:"),r.a.createElement("div",{className:"box-members-name"},e.group.users.length+1))),r.a.createElement("button",{className:n,onClick:function(t){a||e.dispatch({type:"clickGroup",group:e.group})}},t))}),Qt=function(e){return e.active?r.a.createElement("div",{className:"group-list"},r.a.createElement("div",{className:"group-head"},r.a.createElement("button",{className:"group-all ".concat(""===e.selectedType?"clicked":""),onClick:function(t){return e.dispatch({type:"selectType",value:""})}},"All"),r.a.createElement("button",{className:"group-own ".concat("own"===e.selectedType?"clicked":""),onClick:function(t){return e.dispatch({type:"selectType",value:"own"})}},"Own"),r.a.createElement("button",{className:"group-withme ".concat("me"===e.selectedType?"clicked":""),onClick:function(t){return e.dispatch({type:"selectType",value:"me"})}},"With me")),r.a.createElement("div",{className:"group-body"},e.groups.map((function(t){return r.a.createElement(Dt,{key:t._id,isSelected:e.selectedGroup&&t._id===e.selectedGroup._id,group:t,groupType:e.selectedType,user:e.user,dispatch:e.dispatch})}))),r.a.createElement("div",{className:"group-footer ".concat("own"===e.selectedType?"":"disabled")},r.a.createElement("div",{className:"input-group-label"},"Enter group name"),r.a.createElement("input",{className:"input-group-name",value:e.inputName,onChange:function(t){return e.dispatch({type:"inputName",value:t.target.value})}}),r.a.createElement("button",{className:"group-create-btn",onClick:function(t){return e.dispatch({type:"clickCreate"})}},e.selectedGroup?"Save":"Create"))):r.a.createElement("div",{className:"group-list"})},Ut=(n(740),function(e){return r.a.createElement("div",{className:"group-info-user"},r.a.createElement("div",{className:"group-info-username"},e.user.username),r.a.createElement("button",{className:"group-info-ban ".concat(e.isOwner?"":"disabled"),onClick:function(t){return e.dispatch({type:"ban",user:e.user})}},"Ban"))}),Rt=(n(741),function(e){return r.a.createElement("div",{className:"group-info-req"},r.a.createElement("div",{className:"group-info-req-name"},e.user.username),r.a.createElement("div",{className:"group-info-req-buttons"},r.a.createElement("button",{className:"group-info-accept box-safe",onClick:function(t){return e.dispatch({type:"reply",reply:!0,user:e.user})}},"Accept"),r.a.createElement("button",{className:"group-info-reject box-dang",onClick:function(t){return e.dispatch({type:"reply",reply:!1,user:e.user})}},"Reject")))}),Lt=(n(742),function(e){if(!e.active)return r.a.createElement("div",{className:"group-info"});var t=e.group.users.map((function(t){return r.a.createElement(Ut,{key:t._id+"user",user:t,isOwner:e.isOwner,dispatch:e.dispatch})})),n=e.isOwner?e.group.joinRequests.map((function(t){return r.a.createElement(Rt,{key:t._id+"req",user:t,dispatch:e.dispatch})})):null;return console.log(e.group),r.a.createElement("div",{className:"group-info"},r.a.createElement("div",{className:"group-info-users ".concat(e.isOwner?"":"full-height")},t),r.a.createElement("div",{className:"group-info-requests ".concat(e.isOwner?"":"disabled")},n))});function Tt(e,t){switch(t.type){case"setUser":return Object(w.a)(Object(w.a)({},e),{},{user:t.user});case"selectType":return e.reqType===t.value?e:Object(w.a)(Object(w.a)({},e),{},{reqType:t.value,isLoading:!0,selectedGroup:null,inputName:""});case"selectGroup":var n=e.selectedGroup&&e.selectedGroup._id===t.group._id?null:t.group,a=n?n.name:"";return Object(w.a)(Object(w.a)({},e),{},{selectedGroup:n,inputName:a});case"clickGroup":return Object(w.a)(Object(w.a)({},e),{},{isGroupClicked:!0,clickedGroup:t.group});case"inputName":return Object(w.a)(Object(w.a)({},e),{},{inputName:t.value});case"clickCreate":return e.selectedGroup&&e.selectedGroup.name!==e.inputName?Object(w.a)(Object(w.a)({},e),{},{isSaving:!0}):Object(w.a)(Object(w.a)({},e),{},{isCreating:!0});case"reply":return Object(w.a)(Object(w.a)({},e),{},{isReplying:!0,reply:t.reply,repliedUser:t.user});case"ban":return Object(w.a)(Object(w.a)({},e),{},{isBanning:!0,bannedUser:t.user});case"finishLoading":return Object(w.a)(Object(w.a)({},e),{},{isLoading:!1,groups:t.groups});case"finishClicking":return t.ok?Object(w.a)(Object(w.a)({},e),{},{isLoading:!0,isGroupClicked:!1,clickedGroup:null,selectedGroup:t.group}):Object(w.a)(Object(w.a)({},e),{},{isGroupClicked:!1,clickedGroup:null});case"finishSaving":return t.ok?Object(w.a)(Object(w.a)({},e),{},{isSaving:!1,isLoading:!0}):Object(w.a)(Object(w.a)({},e),{},{isSaving:!1});case"finishCreating":return t.ok?Object(w.a)(Object(w.a)({},e),{},{isCreating:!1,isLoading:!0,selectedGroup:t.group}):Object(w.a)(Object(w.a)({},e),{},{isCreating:!1});case"finishReplying":return t.ok?Object(w.a)(Object(w.a)({},e),{},{isReplying:!1,isLoading:!0,reply:null,repliedUser:null,selectedGroup:t.group}):Object(w.a)(Object(w.a)({},e),{},{isReplying:!1,reply:null,repliedUser:null});case"finishBanning":return t.ok?Object(w.a)(Object(w.a)({},e),{},{isLoading:!0,isBanning:!1,bannedUser:null,selectedGroup:t.group}):Object(w.a)(Object(w.a)({},e),{},{isBanning:!1,bannedUser:null});default:return e}}var Mt=function(){var e=Object(a.useReducer)(Tt,{isLoading:!0,groups:null,user:null,isGroupClicked:!1,clickedGroup:null,selectedGroup:null,isBanning:!1,bannedUser:null,isReplying:!1,repliedUser:null,isCreating:!1,isSaving:!1,reply:null,reqType:"",inputName:""}),t=Object(O.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){(function(){var e=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jt();case 2:t=e.sent,c({type:"setUser",user:t.data});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(a.useEffect)((function(){var e=function(){var e=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xt(n.reqType);case 2:t=e.sent,c({type:"finishLoading",isGroupClicked:!1,clickedGroup:null,groups:t.data.response});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n.isLoading&&e()}),[n.isLoading,n.reqType]),Object(a.useEffect)((function(){var e=function(){var e=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ft(n.inputName,n.selectedGroup._id);case 2:t=e.sent,c({type:"finishSaving",ok:t.data.ok,group:t.data.response});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n.isSaving&&e()}),[n.isSaving,n.inputName,n.selectedGroup]),Object(a.useEffect)((function(){var e=function(){var e=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bt(n.inputName);case 2:t=e.sent,c({type:"finishCreating",ok:t.data.ok,group:t.data.response});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n.isCreating&&e()}),[n.isCreating,n.inputName]),Object(a.useEffect)((function(){var e=function(){var e=Object(d.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.reply){e.next=7;break}return e.next=3,St(n.selectedGroup._id,n.repliedUser._id);case 3:return t=e.sent,e.abrupt("return",c({type:"finishReplying",ok:t.data.ok,group:t.data.response}));case 7:return e.next=9,Gt(n.selectedGroup._id,n.repliedUser._id);case 9:return a=e.sent,e.abrupt("return",c({type:"finishReplying",ok:a.data.ok,group:a.data.response}));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n.isReplying&&e()}),[n.isReplying,n.repliedUser,n.reply,n.selectedGroup]),Object(a.useEffect)((function(){var e=function(){var e=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,It(n.selectedGroup._id,n.bannedUser._id);case 2:return t=e.sent,e.abrupt("return",c({type:"finishBanning",ok:t.data.ok,group:t.data.response}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n.isBanning&&e()}),[n.isBanning,n.selectedGroup,n.bannedUser]),Object(a.useEffect)((function(){var e=function(){var e=Object(d.a)(p.a.mark((function e(){var t,a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==n.reqType){e.next=5;break}return e.next=3,Nt(n.clickedGroup._id);case 3:return t=e.sent,e.abrupt("return",c({type:"finishClicking",ok:t.data.ok,group:t.data.response}));case 5:if("own"!==n.reqType){e.next=10;break}return e.next=8,kt(n.clickedGroup._id);case 8:return a=e.sent,e.abrupt("return",c({type:"finishClicking",ok:a.data.ok,group:a.data.response}));case 10:if("me"!==n.reqType){e.next=15;break}return e.next=13,Ct(n.clickedGroup._id);case 13:return r=e.sent,e.abrupt("return",c({type:"finishClicking",ok:r.data.ok,group:r.data.response}));case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n.isGroupClicked&&e()}),[n.isGroupClicked,n.clickedGroup,n.reqType]),r.a.createElement("div",{className:"Group"},r.a.createElement(Qt,{active:!n.isLoading,groups:n.groups,selectedType:n.reqType,inputName:n.inputName,selectedGroup:n.selectedGroup,user:n.user,dispatch:c}),r.a.createElement(Lt,{active:!!n.selectedGroup&&!n.isLoading,group:n.selectedGroup,isOwner:"own"===n.reqType,dispatch:c}))};localStorage.token&&h(localStorage.token);var Yt=function(){return Object(a.useEffect)((function(){Ot.dispatch(E())}),[]),r.a.createElement(l.a,{store:Ot},r.a.createElement(i.a,null,r.a.createElement(a.Fragment,null,r.a.createElement(v,null),r.a.createElement(o.b,{exact:!0,path:"/",component:y}),r.a.createElement("section",{className:"container"},r.a.createElement(ut,null),r.a.createElement(o.d,null,r.a.createElement(o.b,{exact:!0,path:"/login",component:j}),r.a.createElement(o.b,{exact:!0,path:"/recoverPassword",component:ne}),r.a.createElement(o.b,{exact:!0,path:"/reset/:id",component:ae}),r.a.createElement(dt,{exact:!0,path:"/welcome",component:ie}),r.a.createElement(dt,{exact:!0,path:"/admin",component:Re}),r.a.createElement(dt,{exact:!0,path:"/create-users",component:Le}),r.a.createElement(dt,{exact:!0,path:"/edit-user/:id",component:We}),r.a.createElement(dt,{exact:!0,path:"/editor",component:Xe}),r.a.createElement(dt,{exact:!0,path:"/papers",component:ot}),r.a.createElement(dt,{exact:!0,path:"/publicDatabases",component:lt}),r.a.createElement(dt,{exact:!0,path:"/groups",component:Mt}))))))};s.a.render(r.a.createElement(Yt,null),document.getElementById("root"))}},[[379,1,2]]]);
//# sourceMappingURL=main.a0c86794.chunk.js.map